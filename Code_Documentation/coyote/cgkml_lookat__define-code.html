<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:15 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgkml_lookat__define.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgkml_lookat__define.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgKML_LookAt</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   This program implements the KML abstract LOOKAT class.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;</span>
<span class="comments">;+</span>
<span class="comments">;   This program implements the KML abstract LookAt class. For </span>
<span class="comments">;   reference, see  the `Google KML Reference Documentation &lt;https://developers.google.com/kml/documentation/kmlreference#lookat>`.</span>
<span class="comments">;   A LookAt object extends a KML Object. The purpose of this object is to allow</span>
<span class="comments">;   Google Earth to "fly to" a particular location.</span>
<span class="comments">;   </span>
<span class="comments">;</span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics, FileIO</span>
<span class="comments">;    </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    See the `cgKML_File` object for examples of how to create a KML file.</span>
<span class="comments">;       </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written, 31 December 2012 by David W. Fanning.</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;-</span>


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to establish a KML LookAt object class. For reference, see</span>
<span class="comments">; https://developers.google.com/kml/documentation/kmlreference#lookat.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    altitudemode: in, optional, type=string, default="relativeToGround"</span>
<span class="comments">;         The mode of the altitude. Possible values are: "clampToGround", "relativeToGround"</span>
<span class="comments">;         and "absolute".</span>
<span class="comments">;    heading: in, optional, type=float, default=0.0</span>
<span class="comments">;         The angle of the view. Valid values 0 to 360.</span>
<span class="comments">;    height: in, optional, type=double, default=11000.0</span>
<span class="comments">;         The altitude (in km) of the eye with respect to the lat/lon point of the eye.</span>
<span class="comments">;         Called "altitude" in the KML documentation, but called "height" here to differentiate</span>
<span class="comments">;         keyword from "altitudeMode".  Positive values in kilometers.</span>
<span class="comments">;    latitude: in, optional, type=float, default=0.0</span>
<span class="comments">;         The input latitude where the eye should be located. Valid values -90 to 90.</span>
<span class="comments">;    longitude: in, optional, type=float, default=0.0 </span>
<span class="comments">;         The input longitude where the eye should be located. Valid values -180 to 180.</span>
<span class="comments">;    tilt: in, optional, type=float, default=0.0</span>
<span class="comments">;         The tilt angle of the eye. Valid values 0 to 90.</span>
<span class="comments">;     _ref_extra: in, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
FUNCTION cgKML_LookAt::INIT, $
  ALTITUDEMODE=altitudeMode, $
  HEADING=heading, $
  HEIGHT=height, $
  LATITUDE=latitude, $
  LONGITUDE=longitude, $
  TILT=tilt, $
   _REF_EXTRA=extra

  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN, 0
  ENDIF
  
  <span class="comments">; Call the superclass object's INIT method.</span>
  IF ~self -> cgKML_Object::INIT(_Strict_Extra=extra) THEN RETURN, 0
  
  <span class="comments">; Default values for keywords.</span>
  IF N_Elements(altitudeMode) EQ 0 THEN altitudeMode = "relativeToGround"
  IF N_Elements(heading) EQ 0 THEN heading = 0.0
  heading = 0.0 > heading &lt<span class="comments">; 360.0</span>
  IF N_Elements(height) EQ 0 THEN height = 11000 
  height = height * 1000.0
  IF N_Elements(latitude) EQ 0 THEN latitude = 0.0
  latitude = -90.0 > latitude &lt<span class="comments">; 90.0</span>
  IF N_Elements(longitude) EQ 0 THEN longitude = 0.0
  longitude = -180.0 > longitude &lt<span class="comments">; 180.0</span>
  IF N_Elements(tilt) EQ 0 THEN tilt = 0.0
  tilt = 0.0 > tilt &lt<span class="comments">; 90.0</span>
  IF Size(altitudeMode, /TNAME) NE 'STRING' THEN Message, 'The altitudeMode keyword must be a string.'
  
  CASE 1 OF
      StrUpCase(altitudeMode) EQ 'RELATIVETOGROUND': altitudeMode = "relativeToGround"
      StrUpCase(altitudeMode) EQ 'CLAMPTOGROUND': altitudeMode = "clampToGround"
      StrUpCase(altitudeMode) EQ 'ABSOLUTE': altitudeMode = "absolute"
      ELSE: Message, 'Unknown altitude mode of : ' + altitudeMode
  ENDCASE
  
  <span class="comments">; Load the object.</span>
  self.altitude = height
  self.altitudeMode = altitudeMode
  self.heading = heading
  self.latitude = latitude
  self.longitude = longitude
  self.tilt = tilt
  
  RETURN, 1

END


<span class="comments">;+</span>
<span class="comments">; This method builds the feature in a KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::Build, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
    
  <span class="comments">; Write the LookAt object into the file.</span>
  self -> Head, LUN=lun
  self -> Body, LUN=lun
  self -> Tail, LUN=lun
  
END


<span class="comments">;+</span>
<span class="comments">; This method adds LookAt elements to the KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::Body, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  <span class="comments">; We require a logical unit number.</span>
  IF N_Elements(lun) EQ 0 THEN Message, 'A logical unit number (LUN) is required in this method.'
    
  <span class="comments">; Write the lookAt elements.</span>
  self -> XMLTag, 'longitude', self.longitude, LUN=lun, SPACE=6
  self -> XMLTag, 'latitude', self.latitude, LUN=lun, SPACE=6
  self -> XMLTag, 'altitude', self.altitude, LUN=lun, SPACE=6
  self -> XMLTag, 'heading', self.heading, LUN=lun, SPACE=6
  self -> XMLTag, 'tilt', self.tilt, LUN=lun, SPACE=6
  CASE StrUpCase(self.altitudeMode) OF
     'CLAMPTOGROUND': self -> XMLTag, 'altitudeMode', self.altitudeMode, LUN=lun, SPACE=6
     'RELATIVETOGROUND': self -> XMLTag, 'gx:altitudeMode', self.altitudeMode, LUN=lun, SPACE=6
     'ABSOLUTE': self -> XMLTag, 'altitudeMode', self.altitudeMode, LUN=lun, SPACE=6
     ELSE: Message, 'Altitude Mode (' + self.altitudeMode + ') is not recognized as valid.'
  ENDCASE
    
END

<span class="comments">;+</span>
<span class="comments">; This method opens the &lt;LookAt> tag in the KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::Head, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  <span class="comments">; We require a logical unit number.</span>
  IF N_Elements(lun) EQ 0 THEN Message, 'A logical unit number (LUN) is required in this method.'
    
  <span class="comments">; Write the overlay elements.</span>
  IF self.id NE "" THEN BEGIN
    PrintF, lun, '   &lt;LookAt id="' + StrTrim(self.id,2) + '">'
  ENDIF ELSE BEGIN
    PrintF, lun, '   &lt;LookAt>'
  ENDELSE
  
END

<span class="comments">;+</span>
<span class="comments">; This method closes the &lt;LookAt> tag in the KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::Tail, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  <span class="comments">; We require a logical unit number.</span>
  IF N_Elements(lun) EQ 0 THEN Message, 'A logical unit number (LUN) is required in this method.'
    
  <span class="comments">; Write the overlay elements.</span>
  PrintF, lun, '   &lt;/LookAt>'
  
END


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to set the object's properties.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    altitudemode: out, optional, type=string</span>
<span class="comments">;         The mode of the altitude. Possible values are: "clampToGround", "relativeToGround"</span>
<span class="comments">;         and "absolute".</span>
<span class="comments">;    heading: out, optional, type=float</span>
<span class="comments">;         The angle of the view. Valid values 0 to 360.</span>
<span class="comments">;    height: out, optional, type=double</span>
<span class="comments">;         The altitude (in km) of the eye with respect to the lat/lon point of the eye.</span>
<span class="comments">;         Called "altitude" in the KML documentation, but called "height" here to differentiate</span>
<span class="comments">;         keyword from "altitudeMode".</span>
<span class="comments">;    latitude: out, optional, type=float</span>
<span class="comments">;         The input latitude where the eye should be located. Valid values -90 to 90.</span>
<span class="comments">;    longitude: out, optional, type=float</span>
<span class="comments">;         The input longitude where the eye should be located.</span>
<span class="comments">;    tilt: out, optional, type=float</span>
<span class="comments">;         The tilt angle of the eye. Valid values 0 to 90.</span>
<span class="comments">;     _ref_extra: out, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::GetProperty, $
  ALTITUDEMODE=altitudeMode, $
  HEADING=heading, $
  HEIGHT=height, $
  LATITUDE=latitude, $
  LONGITUDE=longitude, $
  TILT=tilt, $
   _REF_EXTRA=extra

  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  IF N_Elements(altitudeMode) NE 0 THEN self.altitudeMode = altitudeMode
  IF N_Elements(heading) NE 0 THEN self.heading = heading
  IF N_Elements(height) NE 0 THEN self.altitude = height
  IF N_Elements(latitude) NE 0 THEN self.latitude = latitude
  IF N_Elements(longitude) NE 0 THEN self.longitude = longitude
  IF N_Elements(tilt) NE 0 THEN self.tilt = tilt
  
   <span class="comments">; Superclass keywords.</span>
   IF N_Elements(extra) NE 0 THEN self -> cgKML_Object::GetProperty, _Strict_Extra=extra

END


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to set the object's properties.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    altitudemode: in, optional, type=string, default="relativeToGround"</span>
<span class="comments">;         The mode of the altitude. Possible values are: "clampToGround", "relativeToGround"</span>
<span class="comments">;         and "absolute".</span>
<span class="comments">;    heading: in, optional, type=float, default=0.0</span>
<span class="comments">;         The angle of the view. Valid values 0 to 360.</span>
<span class="comments">;    height: in, optional, type=double, default=500.0</span>
<span class="comments">;         The altitude (in km) of the eye with respect to the lat/lon point of the eye.</span>
<span class="comments">;         Called "altitude" in the KML documentation, but called "height" here to differentiate</span>
<span class="comments">;         keyword from "altitudeMode".  Positive values in kilometers.</span>
<span class="comments">;    latitude: in, optional, type=float, default=0.0</span>
<span class="comments">;         The input latitude where the eye should be located. Valid values -90 to 90.</span>
<span class="comments">;    longitude: in, optional, type=float, default=0.0 </span>
<span class="comments">;         The input longitude where the eye should be located. Valid values -180 to 180.</span>
<span class="comments">;    tilt: in, optional, type=float, default=0.0</span>
<span class="comments">;         The tilt angle of the eye. Valid values 0 to 90.</span>
<span class="comments">;     _ref_extra: in, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::SetProperty, $
  ALTITUDEMODE=altitudeMode, $
  HEADING=heading, $
  HEIGHT=height, $
  LATITUDE=latitude, $
  LONGITUDE=longitude, $
  TILT=tilt, $
   _REF_EXTRA=extra

  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  IF N_Elements(altitudeMode) NE 0 THEN self.altitudeMode = altitudeMode
  IF N_Elements(heading) NE 0 THEN self.heading = heading
  IF N_Elements(height) NE 0 THEN self.altitude = height
  IF N_Elements(latitude) NE 0 THEN self.latitude = latitude
  IF N_Elements(longitude) NE 0 THEN self.longitude = longitude
  IF N_Elements(tilt) NE 0 THEN self.tilt = tilt
  
   <span class="comments">; Superclass keywords.</span>
   IF N_Elements(extra) NE 0 THEN self -> cgKML_Object::GetProperty, _Strict_Extra=extra

END


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to destroy anything we created that may leak</span>
<span class="comments">; memory or need to be released from use.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt::CLEANUP

    <span class="comments">; Call the superclass object's CLEANUP method</span>
    self -> cgKML_Object::Cleanup
    
END


<span class="comments">;+</span>
<span class="comments">; The cgKML_LookAt class definition module. This is a class that allows the</span>
<span class="comments">; Google Earth application to "fly to" the position indicated.</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;     class: out, optional, type=structure</span>
<span class="comments">;         The class definition returned as a structure variable. Occassionally useful.</span>
<span class="comments">;-</span>
PRO cgKML_LookAt__Define, class

   class = { cgKML_LOOKAT, $
             INHERITS cgKML_Object, $  <span class="comments">; An extended cgKML_Object class.</span>
             latitude: 0.0, $          <span class="comments">; -90 to 90</span>
             longitude: 0.0, $         <span class="comments">; -180 to 180</span>
             altitude: 0.0D, $         <span class="comments">; In meters</span>
             heading: 0.0, $           <span class="comments">; 0 to 360</span>
             tilt: 0.0, $              <span class="comments">; 0 to 90</span>
             range: 0.0D, $            <span class="comments">; Currently unused.</span>
             altitudeMode: "" $        <span class="comments">; "clampToGroupd", "relativeToGround", "absolute"       </span>
           }
END
             
</code>
    </div>
  </body>
</html>