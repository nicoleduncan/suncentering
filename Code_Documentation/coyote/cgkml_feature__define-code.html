<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:13 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgkml_feature__define.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgkml_feature__define.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgKML_Feature</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   This program implements the KML abstract FEATURE class.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;</span>
<span class="comments">;+</span>
<span class="comments">;   This program implements the KML abstract FEATURE class. For </span>
<span class="comments">;   reference, see  the `Google KML Reference Documentation &lt;https://developers.google.com/kml/documentation/kmlreference#feature>`.</span>
<span class="comments">;   A Feature object extends a KML Object, and both should be inherited by,</span>
<span class="comments">;   for example, a KML Overlay object, which further extends this KML abstract</span>
<span class="comments">;   class.</span>
<span class="comments">;   </span>
<span class="comments">;</span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics, FileIO</span>
<span class="comments">;    </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    See the `cgKML_File` object for examples of how to create a KML file.</span>
<span class="comments">;    </span>
<span class="comments">;       </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written, 28 October 2012 by David W. Fanning.</span>
<span class="comments">;        Fixed typo in spelling of N_Elements. 16 Jan 2013. DWF.</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;-</span>


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to establish a KML Feature object class. For reference, see</span>
<span class="comments">; https://developers.google.com/kml/documentation/kmlreference#feature.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    abstractview: in, optional, type=object</span>
<span class="comments">;        Defines a viewpoint associated with any element derived from Feature. Either a cgKML_Camera or</span>
<span class="comments">;        cgKML_LookAt object.</span>
<span class="comments">;    address: in, optional, type=string</span>
<span class="comments">;        A string value representing an unstructured address written as a standard street, city, </span>
<span class="comments">;        state address, and/or as a postal code. You can use the &lt;address> tag to specify the </span>
<span class="comments">;        location of a point instead of using latitude and longitude coordinates. (However, if </span>
<span class="comments">;        a &lt;Point> is provided, it takes precedence over the &lt;address>.)</span>
<span class="comments">;    author: in, optional, type=struct</span>
<span class="comments">;        An anonymous structure with two tags. Tag "NAME" is a string that gives the author's name,</span>
<span class="comments">;        and tag "LINK" is a string that provides a URL to the author's web site.</span>
<span class="comments">;    description: in, optional, type=string</span>
<span class="comments">;        User-supplied content that appears in the description balloon. Can be complicated. See the</span>
<span class="comments">;        KML Reference for "Feature", cited above.</span>
<span class="comments">;    extendeddata: in, optional, type=structure</span>
<span class="comments">;         A scalar or vector of anonymous structures containing a tag NAME and a tag VALUE, which</span>
<span class="comments">;         are both strings. An optional third field DISPLAYNAME can also be present. See the</span>
<span class="comments">;         &lt;ExtendedData> reference (https://developers.google.com/kml/documentation/kmlreference#extendeddata)</span>
<span class="comments">;         for additional information.</span>
<span class="comments">;    open: in, optional, type=boolean, default=0</span>
<span class="comments">;       This keyword specifies whether a Document or Folder appears closed or open when first loaded </span>
<span class="comments">;       into the Places panel. The default is to show the Document or Folder collapsed rather than</span>
<span class="comments">;       expanded.</span>
<span class="comments">;    phonenumber: in, optional, type=string</span>
<span class="comments">;        A phone number. Used only by Google Maps Mobile.</span>
<span class="comments">;    placename: in, optional, type=string</span>
<span class="comments">;        This is the &lt;name> element in a Feature object. It is user-defined text that is used as</span>
<span class="comments">;        the label for an object in Google Earth.</span>
<span class="comments">;    snippet: in, optional, type=string</span>
<span class="comments">;        A short description of the feature. This description is displayed in the Places panel </span>
<span class="comments">;        under the name of the feature. If not supplied, the first two lines of the `Description` </span>
<span class="comments">;        are used.</span>
<span class="comments">;    styleurl: in, optional, type=string</span>
<span class="comments">;        The URL of a &lt;Style> or &lt;StyleMap> defined in a Document. If the style is in the same </span>
<span class="comments">;        file, use a # reference. If the style is defined in an external file, use a full URL </span>
<span class="comments">;        along with # referencing.</span>
<span class="comments">;    timeprimitive: in, optional, type=object</span>
<span class="comments">;        Associates this feature with a period of time (cgKML_Timespan object) or a point in time</span>
<span class="comments">;        (KML_Timestamp object).</span>
<span class="comments">;    visibility: in, optional, type=boolean, default=1</span>
<span class="comments">;       This keyword specifies whether the feature is drawn in the 3D viewer when it is initially loaded. In </span>
<span class="comments">;       order for a feature to be visible, the &lt;visibility> tag of all its ancestors must also be </span>
<span class="comments">;       set to 1. In the Google Earth List View, each Feature has a checkbox that allows the user </span>
<span class="comments">;       to control visibility of the Feature.</span>
<span class="comments">;     _ref_extra: in, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
FUNCTION cgKML_Feature::INIT, $
   ABSTRACTVIEW=abstractView, $
   ADDRESS=address, $
   AUTHOR=author, $
   DESCRIPTION=description, $
   EXTENDEDDATA=extendedData, $
   OPEN=open, $
   PHONENUMBER=phonenumber, $
   PLACENAME=placename, $
   SNIPPET=snippet, $
   STYLEURL=styleURL, $
   TIMEPRIMITIVE=timeprimitive, $
   VISIBILITY=visibility, $
   _REF_EXTRA=extra

  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN, 0
  ENDIF
  
  <span class="comments">; Call the superclass object's INIT method.</span>
  IF ~self -> cgKML_Object::INIT(_Strict_Extra=extra) THEN RETURN, 0
  
  <span class="comments">; Default values for keywords.</span>
  IF N_Elements(visibility) EQ 0 THEN visibility = 1
  
  <span class="comments">; Load the object.</span>
  IF Obj_Valid(abstractView) THEN self.abstractView = abstractView
  IF N_Elements(address) NE 0 THEN self.address = address
  IF N_Elements(author) NE 0 THEN self.author = Ptr_New(author)
  IF N_Elements(description) NE 0 THEN self.description = description
  IF N_Elements(extendedData) NE 0 THEN self.extendedData = Ptr_New(extendedData)
  IF N_Elements(open) NE 0 THEN self.open = open
  IF N_Elements(phonenumber) NE 0 THEN self.phonenumber = phonenumber
  IF N_Elements(placename) NE 0 THEN self.placename = placename
  IF N_Elements(snippet) NE 0 THEN BEGIN
     CASE N_Elements(snippet) OF
        1: self.snippet[0] = snippet
        2: self.snippet = snippet
        ELSE: Message, 'The SNIPPET attribute is restricted to two lines of input.'
     ENDCASE
  ENDIF
  IF N_Elements(styleURL) NE 0 THEN self.styleURL = styleURL
  IF Obj_Valid(timeprimitive) THEN self.timeprimitive = timeprimitive
  IF N_Elements(visibility) NE 0 THEN self.visibility = visibility
  
  RETURN, 1

END


<span class="comments">;+</span>
<span class="comments">; This method adds Feature elements to the KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_Feature::Body, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
  
  <span class="comments">; We require a logical unit number.</span>
  IF N_Elements(lun) EQ 0 THEN Message, 'A logical unit number (LUN) is required in this method.'
    
  <span class="comments">; Write the feature elements.</span>
  IF self.placeName NE "" THEN self -> XMLTag, 'name', self.placeName, LUN=lun, SPACE=6
  self -> XMLTag, 'visibility', Keyword_Set(self.visibility), LUN=lun, SPACE=6
  self -> XMLTag, 'open', Keyword_Set(self.open), LUN=lun, SPACE=6
  IF Ptr_Valid(self.author) THEN BEGIN
    PrintF, lun, '      &lt;atom:author>'
    PrintF, lun, '         &lt;atom:name>' + (*self.author).NAME + '&lt;/atom:name>
    PrintF, lun, '      &lt;/atom:author>'
    IF (*self.author).LINK NE "" THEN BEGIN
       PrintF, lun, '      &lt;atom:link href="' + (*self.author).LINK + '" />'
    ENDIF
  ENDIF
  IF self.address NE "" THEN self -> XMLTag, 'address', self.address, LUN=lun, SPACE=6
  IF self.phoneNumber NE "" THEN self -> XMLTag, 'phoneNumber', self.phoneNumber, LUN=lun, SPACE=6
  CASE (Max(StrLen(self.snippet)) GT 1) OF
      0:
      ELSE: BEGIN
         nlines = N_Elements(self.snippet)
         PrintF, lun, '&lt;Snippet maxLines="' + StrTrim(nlines,2) + '">'
         FOR j=0,nlines-1 DO PrintF, lun, '   ' + self.snippet[j]
         PrintF, lun, '&lt;/Snippet>'
      END
  ENDCASE
  IF self.description NE "" THEN self -> XMLTag, 'description', self.description, LUN=lun, SPACE=6
  IF Obj_Valid(self.AbstractView) THEN self.AbstractView -> Build, LUN=lun
  IF Obj_Valid(self.TimePrimitive) THEN self.TimePrimitive -> Build, LUN=lun
  IF self.styleURL NE "" THEN self -> XMLTag, 'styleURL', self.styleURL, LUN=lun, SPACE=6
  IF Ptr_Valid(self.ExtendedData) THEN BEGIN
    PrintF, lun, '      &lt;ExtendedData>'
    FOR j=0,N_Elements(*self.ExtendedData)-1 DO BEGIN
       thisStruct = (*self.ExtendedData)[j]
       IF thisStruct.name EQ "" THEN BEGIN
          PrintF, lun, '         &lt;Data>' 
       ENDIF ELSE BEGIN
          PrintF, lun, '         &lt;Data name="' + thisStruct.name + '">
       ENDELSE
       IF thisStruct.displayName NE "" THEN BEGIN
          self -> XMLTag, 'displayName', thisStruct.displayName, LUN=lun, SPACE=12
       ENDIF
       self -> XMLTag, 'value', thisStruct.value, LUN=lun, SPACE=12
       PrintF, lun, '         &lt;/Data>'
    ENDFOR
    PrintF, lun, '      &lt;/ExtendedData>'
  ENDIF

  
END


<span class="comments">;+</span>
<span class="comments">; This method builds the feature in a KML file.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     lun: in, required, type=integer</span>
<span class="comments">;        The logical unit number of the open KML file to write to.</span>
<span class="comments">;-</span>
PRO cgKML_Feature::Build, LUN=lun
  Compile_Opt idl2
  
  Catch, theError
  IF theError NE 0 THEN BEGIN
     Catch, /CANCEL
     void = Error_Message()
     RETURN
  ENDIF
    
  <span class="comments">; Only the body can be written, since there is no head or tail in a feature object.</span>
  self -> cgKML_Feature::Body, LUN=lun
  
END



<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to return object properties.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    abstractview: out, optional, type=object</span>
<span class="comments">;        Defines a viewpoint associated with any element derived from Feature. Either a cgKML_Camera or</span>
<span class="comments">;        cgKML_LookAt object.</span>
<span class="comments">;    address: out, optional, type=string</span>
<span class="comments">;        A string value representing an unstructured address written as a standard street, city, </span>
<span class="comments">;        state address, and/or as a postal code. You can use the &lt;address> tag to specify the </span>
<span class="comments">;        location of a point instead of using latitude and longitude coordinates. (However, if </span>
<span class="comments">;        a &lt;Point> is provided, it takes precedence over the &lt;address>.)</span>
<span class="comments">;    author: out, optional, type=struct</span>
<span class="comments">;        An anonymous structure with two tags. Tag "NAME" is a string that gives the author's name,</span>
<span class="comments">;        and tag "LINK" is a string that provides a URL to the author's web site.</span>
<span class="comments">;    description: out, optional, type=string</span>
<span class="comments">;        User-sullied content that appears in the description balloon. Can be complicated. See the</span>
<span class="comments">;        KML Reference for "Feature", cited above.</span>
<span class="comments">;    extendeddata: out, optional, type=structure</span>
<span class="comments">;         A scalar or vector of anonymous structures containing a tag NAME and a tag VALUE, which</span>
<span class="comments">;         are both strings. An optional third field DISPLAYNAME can also be present. See the</span>
<span class="comments">;         &lt;ExtendedData> reference (https://developers.google.com/kml/documentation/kmlreference#extendeddata)</span>
<span class="comments">;         for additional information.</span>
<span class="comments">;    open: out, optional, type=boolean, default=0</span>
<span class="comments">;       This keyword specifies whether a Document or Folder appears closed or open when first loaded </span>
<span class="comments">;       into the Places panel. The default is to show the Document or Folder collapsed rather than</span>
<span class="comments">;       expanded.</span>
<span class="comments">;    phonenumber: out, optional, type=string</span>
<span class="comments">;        A phone number. Used only by Google Maps Mobile.</span>
<span class="comments">;    placename: out, optional, type=string</span>
<span class="comments">;        This is the &lt;name> element in a Feature object. It is user-defined text that is used as</span>
<span class="comments">;        the label for an object in Google Earth.</span>
<span class="comments">;    snippet: in, optional, type=string</span>
<span class="comments">;        A short description of the feature. This description is displayed in the Places panel </span>
<span class="comments">;        under the name of the feature. If not supplied, the first two lines of the `Description` </span>
<span class="comments">;        are used.</span>
<span class="comments">;    styleurl: out, optional, type=string</span>
<span class="comments">;        The URL of a &lt;Style> or &lt;StyleMap> defined in a Document. If the style is in the same </span>
<span class="comments">;        file, use a # reference. If the style is defined in an external file, use a full URL </span>
<span class="comments">;        along with # referencing.</span>
<span class="comments">;    timeprimitive: out, optional, type=object</span>
<span class="comments">;        Associates this feature with a period of time (cgKML_Timespan object) or a point in time</span>
<span class="comments">;        (KML_Timestamp object).</span>
<span class="comments">;    visibility: out, optional, type=boolean, default=1</span>
<span class="comments">;       This keyword specifies whether the feature is drawn in the 3D viewer when it is initially loaded. In </span>
<span class="comments">;       order for a feature to be visible, the &lt;visibility> tag of all its ancestors must also be </span>
<span class="comments">;       set to 1. In the Google Earth List View, each Feature has a checkbox that allows the user </span>
<span class="comments">;       to control visibility of the Feature.</span>
<span class="comments">;     _ref_extra: out, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
PRO cgKML_Feature::GetProperty, $
   ABSTRACTVIEW=abstractView, $
   ADDRESS=address, $
   AUTHOR=author, $
   DESCRIPTION=description, $
   EXTENDEDDATA=extendedData, $
   OPEN=open, $
   PLACENAME=placename, $
   PHONENUMBER=phonenumber, $
   SNIPPET=snippet, $
   STYLEURL=styleURL, $
   TIMEPRIMITIVE=timeprimitive, $
   VISIBILITY=visibility, $
   _REF_EXTRA=extra
   
   IF Arg_Present(abstractView) THEN abstractView = self.abstractView
   IF Arg_Present(address) THEN address = self.address
   IF Arg_Present(author) THEN IF Ptr_Valid(author) $
      THEN author = *self.author ELSE author = self.author
   IF Arg_Present(description) THEN description = self.description
   IF Arg_Present(extendedData) THEN IF Ptr_Valid(extendedData) $
      THEN extendedData = *self.extendedData ELSE extendedData = self.extendedData
   IF Arg_Present(open) THEN open = self.open
   IF Arg_Present(phonenumber) THEN phonenumber = self.phonenumber
   IF Arg_Present(placename) THEN placename = self.placename
   IF Arg_Present(snippet) THEN snippet = self.snippet
   IF Arg_Present(styleURL) THEN styleURL = self.styleURL
   IF Arg_Present(timeprimitive) THEN timeprimitive = self.timeprimitive
   IF Arg_Present(visibility) THEN visibility = self.visibility
   
   <span class="comments">; Superclass keywords.</span>
   IF N_Elements(extra) NE 0 THEN self -> cgKML_Object::GetProperty, _Extra=extra
   
END


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to set object properties.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    abstractview: in, optional, type=object</span>
<span class="comments">;        Defines a viewpoint associated with any element derived from Feature. Either a cgKML_Camera or</span>
<span class="comments">;        cgKML_LookAt object.</span>
<span class="comments">;    address: in, optional, type=string</span>
<span class="comments">;        A string value representing an unstructured address written as a standard street, city, </span>
<span class="comments">;        state address, and/or as a postal code. You can use the &lt;address> tag to specify the </span>
<span class="comments">;        location of a point instead of using latitude and longitude coordinates. (However, if </span>
<span class="comments">;        a &lt;Point> is provided, it takes precedence over the &lt;address>.)</span>
<span class="comments">;    author: in, optional, type=struct</span>
<span class="comments">;        An anonymous structure with two tags. Tag "NAME" is a string that gives the author's name,</span>
<span class="comments">;        and tag "LINK" is a string that provides a URL to the author's web site.</span>
<span class="comments">;    description: in, optional, type=string</span>
<span class="comments">;        User-sullied content that appears in the description balloon. Can be complicated. See the</span>
<span class="comments">;        KML Reference for "Feature", cited above.</span>
<span class="comments">;    extendeddata: in, optional, type=structure</span>
<span class="comments">;         A scalar or vector of anonymous structures containing a tag NAME and a tag VALUE, which</span>
<span class="comments">;         are both strings. An optional third field DISPLAYNAME can also be present. See the</span>
<span class="comments">;         &lt;ExtendedData> reference (https://developers.google.com/kml/documentation/kmlreference#extendeddata)</span>
<span class="comments">;         for additional information.</span>
<span class="comments">;    open: in, optional, type=boolean, default=0</span>
<span class="comments">;       This keyword specifies whether a Document or Folder appears closed or open when first loaded </span>
<span class="comments">;       into the Places panel. The default is to show the Document or Folder collapsed rather than</span>
<span class="comments">;       expanded.</span>
<span class="comments">;    phonenumber: in, optional, type=string</span>
<span class="comments">;        A phone number. Used only by Google Maps Mobile.</span>
<span class="comments">;    placename: in, optional, type=string</span>
<span class="comments">;        This is the &lt;name> element in a Feature object. It is user-defined text that is used as</span>
<span class="comments">;        the label for an object in Google Earth.</span>
<span class="comments">;    snippet: in, optional, type=string</span>
<span class="comments">;        A short description of the feature. This description is displayed in the Places panel </span>
<span class="comments">;        under the name of the feature. If not supplied, the first two lines of the `Description` </span>
<span class="comments">;        are used.</span>
<span class="comments">;    styleurl: in, optional, type=string</span>
<span class="comments">;        The URL of a &lt;Style> or &lt;StyleMap> defined in a Document. If the style is in the same </span>
<span class="comments">;        file, use a # reference. If the style is defined in an external file, use a full URL </span>
<span class="comments">;        along with # referencing.</span>
<span class="comments">;    timeprimitive: in, optional, type=object</span>
<span class="comments">;        Associates this feature with a period of time (cgKML_Timespan object) or a point in time</span>
<span class="comments">;        (KML_Timestamp object).</span>
<span class="comments">;    visibility: in, optional, type=boolean, default=1</span>
<span class="comments">;       This keyword specifies whether the feature is drawn in the 3D viewer when it is initially loaded. In </span>
<span class="comments">;       order for a feature to be visible, the &lt;visibility> tag of all its ancestors must also be </span>
<span class="comments">;       set to 1. In the Google Earth List View, each Feature has a checkbox that allows the user </span>
<span class="comments">;       to control visibility of the Feature.</span>
<span class="comments">;     _ref_extra: in, optional</span>
<span class="comments">;         Any keywords appropriate for superclass objects may be passed into the program.</span>
<span class="comments">;-</span>
PRO cgKML_Feature::SetProperty, $
   ABSTRACTVIEW=abstractView, $
   ADDRESS=address, $
   AUTHOR=author, $
   DESCRIPTION=description, $
   EXTENDEDDATA=extendedData, $
   OPEN=open, $
   PHONENUMBER=phonenumber, $
   PLACENAME=placename, $
   SNIPPET=snippet, $
   STYLEURL=styleURL, $
   TIMEPRIMITIVE=timeprimitive, $
   VISIBILITY=visibility, $
   _REF_EXTRA=extra
   
  IF N_Elements(abstractView) NE 0 THEN BEGIN
    Obj_Destroy, self.abstractView
    self.abstractView = abstractView 
  ENDIF
  IF N_Elements(timeprimitive) NE 0 THEN BEGIN
    Obj_Destroy, self.timeprimitive
    self.timeprimitive = timeprimitive 
  ENDIF
  IF N_Elements(author) NE 0 THEN IF Ptr_Valid(self.author) $
     THEN *self.author = author ELSE self.author = Ptr_New(author)
  IF N_Elements(extendedData) NE 0 THEN IF Ptr_Valid(self.extendedData) $
     THEN *self.extendedData = extendedData ELSE self.extendedData = Ptr_New(extendedData)
  IF N_Elements(description) NE 0 THEN self.description = description 
  IF N_Elements(open) NE 0 THEN self.open = open 
  IF N_Elements(phonenumber) NE 0 THEN self.phonenumber = phonenumber 
  IF N_Elements(placename) NE 0 THEN self.placename = placename 
  IF N_Elements(snippet) NE 0 THEN self.snippet = snippet 
  IF N_Elements(styleURL) NE 0 THEN self.styleURL = styleURL 
  IF N_Elements(visibility) NE 0 THEN self.visibility = visibility 
   
   <span class="comments">; Superclass keywords.</span>
   IF N_Elements(extra) NE 0 THEN self -> cgKML_Object::GetProperty, _Strict_Extra=extra
   
END


<span class="comments">;+</span>
<span class="comments">; The purpose of this method is to destroy anything we created that may leak</span>
<span class="comments">; memory or need to be released from use.</span>
<span class="comments">;-</span>
PRO cgKML_Feature::CLEANUP

    Ptr_Free, self.author
    Ptr_Free, self.extendedData
    Obj_Destroy, self.abstractView
    Obj_Destroy, self.timePrimitive
    
    <span class="comments">; Call the superclass object's CLEANUP method</span>
    self -> cgKML_Object::Cleanup
    
END


<span class="comments">;+</span>
<span class="comments">; The cgKML_Feature class definition module. This is a mostly abstract class</span>
<span class="comments">; that will be inherited by cgKML_Overlay and cgKML_Container objects (among others).</span>
<span class="comments">; Basically, any KML element that should be added to a KML file will inherit this</span>
<span class="comments">; object. It is a container object and represents part of the KML file hierarchy.</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;     class: out, optional, type=structure</span>
<span class="comments">;         The class definition returned as a structure variable. Occassionally useful.</span>
<span class="comments">;-</span>
PRO cgKML_Feature__Define, class

   class = { cgKML_FEATURE, $
             INHERITS cgKML_Object, $  <span class="comments">; An extended cgKML_Object class.</span>
             author: Ptr_New(), $                 
             visibility: 0B, $      
             open: 0B, $
             address: "", $
             phoneNumber: "", $
             placeName: "", $
             snippet:StrArr(2), $
             description: "", $
             abstractView: Obj_New(), $
             timePrimitive: Obj_New(), $
             styleURL: "", $
             extendedData: Ptr_New() $
           }
 
END
</code>
    </div>
  </body>
</html>