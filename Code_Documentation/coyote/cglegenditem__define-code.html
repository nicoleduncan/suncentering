<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:16 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cglegenditem__define.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cglegenditem__define.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgLegendItem__Define</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   The purpose of this program is to a create simple legend object that can be drawn on</span>
<span class="comments">;   a data plot.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;+</span>
<span class="comments">;   The purpose of this program is to create a simple legend object that can be drawn on</span>
<span class="comments">;   a data plot. Perhaps later such objects can be collected into a more sophisticated</span>
<span class="comments">;   "legend" object.</span>
<span class="comments">;        </span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics</span>
<span class="comments">;    </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    A plot with a simple legend::</span>
<span class="comments">;       cgDisplay, 800, 450</span>
<span class="comments">;       legendItem1 = Obj_New('cgLegendItem', SymColor='red7', PSym=6, Symsize=1.5, $</span>
<span class="comments">;           Location=[0.825, 0.875], Title='May 27', /Hardware, Length=0.05)</span>
<span class="comments">;       legendItem2 = Obj_New('cgLegendItem', SymColor='blu7', PSym=15, Symsize=1.5, $</span>
<span class="comments">;           Location=[0.825, 0.835], Title='June 27', /Hardware, Length=0.05)</span>
<span class="comments">;       cgPlot, cgDemoData(17), PSym=-6, SymColor='red7', Position=[0.15, 0.15, 0.8, 0.9], $</span>
<span class="comments">;          Legends=[legendItem1,legendItem2], Label='First Experiment'</span>
<span class="comments">;       cgOPlot, cgDemoData(17), PSym=-15, SymColor='blu7'</span>
<span class="comments">;       Obj_Destroy, [legendItem1,legendItem2]</span>
<span class="comments">;</span>
<span class="comments">;    Same as the previous example, but with a single legend object and with the symbol</span>
<span class="comments">;    centered on the line::</span>
<span class="comments">;       cgDisplay, 800, 450</span>
<span class="comments">;       legendItem = Obj_New('cgLegendItem', SymColor=['red7', 'blu7'], $</span>
<span class="comments">;           PSym=[6,15], Symsize=1.5, Location=[0.825, 0.875], Title=['May 27', 'Jun 27'], $</span>
<span class="comments">;           /CENTER_SYM, /Hardware, Length=0.05)</span>
<span class="comments">;       cgPlot, cgDemoData(17), PSym=-6, SymColor='red7', Position=[0.15, 0.15, 0.8, 0.9], $</span>
<span class="comments">;          Legends=legendItem, Label='First Experiment'</span>
<span class="comments">;       cgOPlot, cgDemoData(17), PSym=-15, SymColor='blu7'</span>
<span class="comments">;       Obj_Destroy, legendItem</span>
<span class="comments">;           </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;     </span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written 18 July 2012. DWF.</span>
<span class="comments">;        Adapted to accept multiple legend elements. Legend elements are stacked vertically. </span>
<span class="comments">;           Each legend element can be given its own title, color, symbol symbol color, and </span>
<span class="comments">;           linestyle. Legend elements are offset  by 1.3*!D.Y_CH_Size/!D.YSize.  A single </span>
<span class="comments">;           symbol can now be drawn in the center of the line instead of one at each end </span>
<span class="comments">;           point with the CENTER_SYM keyword. 04/25/2013, Matthew Argall.</span>
<span class="comments">;-</span>

<span class="comments">;+</span>
<span class="comments">; This method draws the legend item in a graphics window.</span>
<span class="comments">;-</span>
PRO cgLegendItem::Draw

    Compile_Opt idl2
    
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /Cancel
        void = Error_Message()
        IF N_Elements(thisFont) NE 0 THEN !P.Font = thisFont
        RETURN
    ENDIF
    
    <span class="comments">; If this is not visible, return now.</span>
    IF ~self.visible THEN RETURN
    
    x0 = self.location[0]
    x1 = x0 + self.length
    y = self.location[1]
    y_offset = 1.3 * !D.Y_CH_Size/!D.Y_Size

    <span class="comments">;For each legend element</span>
    FOR j = 0, N_Elements(*self.title) - 1 DO BEGIN
        
        <span class="comments">; Need to draw a line?</span>
        IF x0 NE x1 THEN BEGIN
           cgPlotS, [x0,x1], [y,y]-(j*y_offset), COLOR=(*self.color)[j], $
                    LINESTYLE=(*self.lineStyle)[j], THICK=self.thick, /NORMAL
        ENDIF
    
        <span class="comments">; Need to draw symbols?</span>
        IF (*self.psym)[j] NE 0 THEN BEGIN
            <span class="comments">; Center the symbol on the line?</span>
            IF self.center_sym THEN BEGIN
                x2 = x0 + (x1 - x0) / 2.0
               cgPlotS, [x2,x2], [y,y]-(j*y_offset), PSYM=(*self.psym)[j], $
                        SYMSIZE=self.symsize, SYMCOLOR=(*self.symColor)[j], /NORMAL
            ENDIF ELSE BEGIN
               cgPlotS, [x0,x1], [y,y]-(j*y_offset), PSYM=(*self.psym)[j], $
                        SYMSIZE=self.symsize, SYMCOLOR=(*self.symColor)[j], /NORMAL
            ENDELSE
        ENDIF
    
        <span class="comments">; Draw the title.</span>
        IF self.hardware THEN BEGIN
            thisFont = !P.Font
            !P.Font = (!D.Name EQ 'PS') ? 1 : 0
        ENDIF
        cgText, x1+(2.0*!D.X_CH_SIZE/!D.X_Size), y-(0.5*!D.Y_CH_SIZE/!D.Y_Size)-(j*y_offset),$
            /NORMAL, ALIGNMENT=0.0, (*self.title)[j], COLOR=(*self.tcolor)[j], $
            TT_FONT=*self.tt_font, CHARSIZE=self.charsize, FONT=!P.Font
        IF self.hardware THEN !P.Font = thisFont
        
    ENDFOR
    
END


<span class="comments">;+</span>
<span class="comments">; This method obtains properties from the object.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     center_sym: out, optional, type=boolean</span>
<span class="comments">;        This keyword is set if symbols are placed in the center of the line.</span>
<span class="comments">;     charsize: out, optional, type=float</span>
<span class="comments">;        The character size for the legend text. Uses cgDefCharsize by default.</span>
<span class="comments">;        Ignored if using hardware fonts on the display.</span>
<span class="comments">;     color: out, optional, type=string/strarr</span>
<span class="comments">;        The name of the data color. This is the color of each data line.</span>
<span class="comments">;     hardware: out, optional, type=boolean</span>
<span class="comments">;        Set this keyword if you want to output the legend text in a hardware font.</span>
<span class="comments">;     length: out, optional, type=float, default=0.075</span>
<span class="comments">;        The length of the line connecting symbols in the legend, in normalized</span>
<span class="comments">;        coordinates (0 to 1 in the graphics window). Set this equal to 0.0 if</span>
<span class="comments">;        you wish to only plot symbols in the legend.</span>
<span class="comments">;     linestyle: out, optional, type=integer/intarr</span>
<span class="comments">;        The line style for drawing each line.</span>
<span class="comments">;     location: out, optional, type=fltarr</span>
<span class="comments">;        The location of the upper-left corner of the legend item,</span>
<span class="comments">;        in normalized coordinates (0 to 1 in the graphics window).</span>
<span class="comments">;     psym: out, optional, type=integer/intarr</span>
<span class="comments">;        Any normal IDL PSYM values, plus any value supported by the Coyote Library</span>
<span class="comments">;        routine cgSYMCAT. An integer between 0 and 46.</span>
<span class="comments">;     symcolor: out, optional, type=string/strarr</span>
<span class="comments">;        The name of the symbol color. By default, the same as the `COLOR` keyword.</span>
<span class="comments">;     symsize: out, optional, type=float, default=1.0</span>
<span class="comments">;        The symbol size.</span>
<span class="comments">;     symthick: out, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the symbol.</span>
<span class="comments">;     tcolor: out, optional, type=string/strarr</span>
<span class="comments">;        The `Title` color. Set by default to `Color`.</span>
<span class="comments">;     thick: out, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the line.</span>
<span class="comments">;     title: out, optional, type=string/strarr, default='Plot Item'</span>
<span class="comments">;        The "title" or text for each legend item.</span>
<span class="comments">;     tt_font: out, optional, type=string</span>
<span class="comments">;        The name of a true-type font to use for the legend text.</span>
<span class="comments">;     visible: out, optional, type=boolean, default=1</span>
<span class="comments">;        Set this keyword to determine in the line should be drawn (visible=1), or</span>
<span class="comments">;        if the line should not be drawn (visible=0).</span>
<span class="comments">;-</span>
PRO cgLegendItem::GetProperty, $
   CENTER_SYM=center_sym, $
   CHARSIZE=charsize, $
   COLOR=color, $
   HARDWARE=hardware, $
   LENGTH=length, $
   LINESTYLE=linestyle, $
   LOCATION=location, $
   PSYM=psym, $
   SYMCOLOR=symcolor, $
   SYMSIZE=symsize, $
   SYMTHICK=symthick, $
   TCOLOR=tcolor, $
   THICK=thick, $
   TITLE=title, $
   TT_FONT=tt_font, $
   VISIBLE=visible

    Compile_Opt idl2
    
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /Cancel
        void = Error_Message()
        RETURN
    ENDIF

    IF Arg_Present(center_sym) THEN center_sym = self.center_sym
    IF Arg_Present(charsize) THEN charsize = self.charsize
    IF Arg_Present(color) THEN color = *self.color
    IF Arg_Present(hardware) THEN hardware = self.hardware
    IF Arg_Present(length) THEN length = self.length
    IF Arg_Present(linestyle) THEN linestyle = *self.linestyle
    IF Arg_Present(location) THEN location = self.location
    IF Arg_Present(psym) THEN psym = *self.psym
    IF Arg_Present(symcolor) THEN symcolor = *self.symcolor
    IF Arg_Present(symsize) THEN symsize = self.symsize
    IF Arg_Present(symthick) THEN symthick = self.symthick
    IF Arg_Present(thick) THEN thick = self.thick
    IF Arg_Present(tcolor) THEN tcolor = *self.tcolor
    IF Arg_Present(title) THEN title = *self.title
    IF Arg_Present(tt_font) THEN tt_font = *self.tt_font
    IF Arg_Present(visible) THEN visible = self.visible

END


<span class="comments">;+</span>
<span class="comments">; This method sets properties of the object.</span>
<span class="comments">; </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     center_sym: in, optional, type=boolean</span>
<span class="comments">;        Set this keyword to place a single symbol in the center of the line.</span>
<span class="comments">;     charsize: in, optional, type=float</span>
<span class="comments">;        The character size for the legend text. Uses cgDefCharsize by default.</span>
<span class="comments">;        Ignored if using hardware fonts on the display.</span>
<span class="comments">;     color: in, optional, type=string/strarr</span>
<span class="comments">;        The name of the data color. This is the color of each data line.</span>
<span class="comments">;     hardware: in, optional, type=boolean</span>
<span class="comments">;        Set this keyword if you want to output the legend text in a hardware font.</span>
<span class="comments">;     length: in, optional, type=float, default=0.075</span>
<span class="comments">;        The length of the line connecting symbols in the legend, in normalized</span>
<span class="comments">;        coordinates (0 to 1 in the graphics window). Set this equal to 0.0 if</span>
<span class="comments">;        you wish to only plot symbols in the legend.</span>
<span class="comments">;     linestyle: in, optional, type=integer/intarr</span>
<span class="comments">;        The line style for drawing each line.</span>
<span class="comments">;     location: in, optional, type=fltarr</span>
<span class="comments">;        The location of the upper-left corner of the legend item,</span>
<span class="comments">;        in normalized coordinates (0 to 1 in the graphics window).</span>
<span class="comments">;        The default is [0.1, 0.95].</span>
<span class="comments">;     psym: in, optional, type=integer/intarr</span>
<span class="comments">;        Any normal IDL PSYM values, plus any value supported by the Coyote Library</span>
<span class="comments">;        routine cgSYMCAT. An integer between 0 and 46.</span>
<span class="comments">;     symcolor: in, optional, type=string/strarr</span>
<span class="comments">;        The name of the symbol color. By default, the same as the `COLOR` keyword.</span>
<span class="comments">;     symsize: in, optional, type=float, default=1.0</span>
<span class="comments">;        The symbol size.</span>
<span class="comments">;     symthick: in, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the symbol.</span>
<span class="comments">;     tcolor: in, optional, type=string/strarr</span>
<span class="comments">;        The `Title` color. Set by default to `Color`.</span>
<span class="comments">;     thick: in, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the line.</span>
<span class="comments">;     title: in, optional, type=string/strarr, default='Plot Item'</span>
<span class="comments">;        The "title" or text for each legend item.</span>
<span class="comments">;     tt_font: in, optional, type=string</span>
<span class="comments">;        The name of a true-type font to use for the legend text.</span>
<span class="comments">;     visible: in, optional, type=boolean, default=1</span>
<span class="comments">;        Set this keyword to determine in the line should be drawn (visible=1), or</span>
<span class="comments">;        if the line should not be drawn (visible=0).</span>
<span class="comments">;-</span>
PRO cgLegendItem::SetProperty, $
   CENTER_SYM=center_sym, $
   CHARSIZE=charsize, $
   COLOR=color, $
   HARDWARE=hardware, $
   LENGTH=length, $
   LINESTYLE=linestyle, $
   LOCATION=location, $
   PSYM=psym, $
   SYMCOLOR=symcolor, $
   SYMSIZE=symsize, $
   SYMTHICK=symthick, $
   TCOLOR=tcolor, $
   THICK=thick, $
   TITLE=title, $
   TT_FONT=tt_font, $
   VISIBLE=visible

    Compile_Opt idl2
    
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /Cancel
        void = Error_Message()
        RETURN
    ENDIF

    IF N_Elements(center_sym) NE 0 THEN self.center_sym = center_sym
    IF N_Elements(charsize) NE 0 THEN self.charsize = charsize
    IF N_Elements(color) NE 0 THEN *self.color = color
    IF N_Elements(hardware) NE 0 THEN self.hardware = hardware
    IF N_Elements(length) NE 0 THEN self.length = length
    IF N_Elements(linestyle) NE 0 THEN *self.linestyle = linestyle
    IF N_Elements(location) NE 0 THEN self.location = location
    IF N_Elements(psym) NE 0 THEN *self.psym = psym
    IF N_Elements(symcolor) NE 0 THEN *self.symcolor = symcolor
    IF N_Elements(symsize) NE 0 THEN self.symsize = symsize
    IF N_Elements(symthick) NE 0 THEN self.symthick = symthick
    IF N_Elements(thick) NE 0 THEN self.thick = thick
    IF N_Elements(tcolor) NE 0 THEN *self.tcolor = tcolor
    IF N_Elements(title) NE 0 THEN *self.title = title
    IF N_Elements(tt_font) NE 0 THEN *self.tt_font = tt_font
    IF N_Elements(visible) NE 0 THEN self.visible = visible
    
END


<span class="comments">;+</span>
<span class="comments">; This method destroys anything the object uses that retains memory space.</span>
<span class="comments">;-</span>
PRO cgLegendItem::CLEANUP

   Ptr_Free, self.color
   Ptr_Free, self.linestyle
   Ptr_Free, self.psym
   Ptr_Free, self.symcolor
   Ptr_Free, self.tcolor
   Ptr_Free, self.title
   Ptr_Free, self.tt_font
   
END


<span class="comments">;+</span>
<span class="comments">; This method creates an instance of the object.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     center_sym: in, optional, type=boolean</span>
<span class="comments">;        Set this keyword to place a single symbol in the center of the line. The default</span>
<span class="comments">;        is to draw a symbol at each endpoint of the line.</span>
<span class="comments">;     charsize: in, optional, type=float</span>
<span class="comments">;        The character size for the legend text. Uses cgDefCharsize by default.</span>
<span class="comments">;        Ignored if using hardware fonts on the display.</span>
<span class="comments">;     color: in, optional, type=string/strarr</span>
<span class="comments">;        The name of the data color. This is the color of each data line.</span>
<span class="comments">;     hardware: in, optional, type=boolean</span>
<span class="comments">;        Set this keyword if you want to output the legend text in a hardware font.</span>
<span class="comments">;     length: in, optional, type=float, default=0.075</span>
<span class="comments">;        The length of the line connecting symbols in the legend, in normalized</span>
<span class="comments">;        coordinates (0 to 1 in the graphics window). Set this equal to 0.0 if</span>
<span class="comments">;        you wish to only plot symbols in the legend.</span>
<span class="comments">;     linestyle: in, optional, type=integer/intarr</span>
<span class="comments">;        The line style for drawing each line.</span>
<span class="comments">;     location: in, optional, type=fltarr</span>
<span class="comments">;        The location of the upper-left corner of the legend item,</span>
<span class="comments">;        in normalized coordinates (0 to 1 in the graphics window).</span>
<span class="comments">;        The default is [0.1, 0.95].</span>
<span class="comments">;     psym: in, optional, type=integer/intarr</span>
<span class="comments">;        Any normal IDL PSYM values, plus any value supported by the Coyote Library</span>
<span class="comments">;        routine cgSYMCAT. An integer between 0 and 46.</span>
<span class="comments">;     symcolor: in, optional, type=string/strarr</span>
<span class="comments">;        The name of the symbol color. By default, the same as the `COLOR` keyword.</span>
<span class="comments">;     symsize: in, optional, type=float, default=1.0</span>
<span class="comments">;        The symbol size.</span>
<span class="comments">;     symthick: in, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the symbol.</span>
<span class="comments">;     tcolor: in, optional, type=string/strarr</span>
<span class="comments">;        The `Title` color. Set by default to `Color`.</span>
<span class="comments">;     thick: in, optional, type=float, default=1.0</span>
<span class="comments">;        The thickness of the line.</span>
<span class="comments">;     title: in, optional, type=string/strarr, default='Plot Item'</span>
<span class="comments">;        The "title" or text for each legend item.</span>
<span class="comments">;     tt_font: in, optional, type=string</span>
<span class="comments">;        The name of a true-type font to use for the legend text.</span>
<span class="comments">;     visible: in, optional, type=boolean, default=1</span>
<span class="comments">;        Set this keyword to determine in the line should be drawn (visible=1), or</span>
<span class="comments">;        if the line should not be drawn (visible=0).</span>
<span class="comments">;-</span>
FUNCTION cgLegendItem::INIT, $
   CENTER_SYM=center_sym, $
   CHARSIZE=charsize, $
   COLOR=color, $
   HARDWARE=hardware, $
   LENGTH=length, $
   LINESTYLE=linestyle, $
   LOCATION=location, $
   PSYM=psym, $
   SYMCOLOR=symcolor, $
   SYMSIZE=symsize, $
   SYMTHICK=symthick, $
   TCOLOR=tcolor, $
   THICK=thick, $
   TITLE=title, $
   TT_FONT=tt_font, $
   VISIBLE=visible

    Compile_Opt idl2
    
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /Cancel
        void = Error_Message()
        RETURN, 0
    ENDIF
    
    nlegends = N_Elements(title)
    IF nlegends EQ 0 THEN BEGIN
        title = 'Plot Item'
        nlegends = 1
    ENDIF 
    
    <span class="comments">; Define default parameters.</span>
    SetDefaultValue, center_sym, /BOOLEAN
    IF N_Elements(charsize)  EQ 0 THEN charsize = cgDefCharsize()
    IF N_Elements(color)     EQ 0 THEN color = Replicate('black', nlegends)
    IF N_Elements(linestyle) EQ 0 THEN linestyle = Replicate(0, nlegends)
    IF N_Elements(psym)      EQ 0 THEN psym = Replicate(0, nlegends)
    SetDefaultValue, hardware, 0
    SetDefaultValue, length, 0.075
    SetDefaultValue, location, [0.1, 0.95]
    SetDefaultValue, symcolor, color
    SetDefaultValue, symsize, 1.0
    SetDefaultValue, symthick, 1.0
    SetDefaultValue, thick, 1.0
    SetDefaultValue, tcolor, color
    SetDefaultValue, visible, 1
    
    <span class="comments">; Populate the object.</span>
    self.center_sym = center_sym
    self.charsize = charsize
    self.color = Ptr_New(color)
    IF N_Elements(tt_font) NE 0 THEN self.tt_font = Ptr_New(tt_font) ELSE self.tt_font = Ptr_New(/ALLOCATE_HEAP)
    self.hardware = hardware
    self.length = length
    self.linestyle = Ptr_New(linestyle)
    self.location = location
    self.psym = Ptr_New(psym)
    self.symcolor = Ptr_New(symcolor)
    self.symsize = symsize
    self.symthick = symthick
    self.tcolor = Ptr_New(tcolor)
    self.thick = thick
    self.title = Ptr_New(title)
    self.visible = visible

    RETURN, 1
END

<span class="comments">;+</span>
<span class="comments">; The class definition module for the object.</span>
<span class="comments">; </span>
<span class="comments">; :Params:</span>
<span class="comments">;     class: out, optional, type=struct</span>
<span class="comments">;        The class definition as a structure variable. Occasionally useful.</span>
<span class="comments">;-</span>
PRO cgLegendItem__Define, class

    Compile_Opt idl2

    class = { cgLegendItem, $
              INHERITS IDL_Object, $
              charsize: 0.0, $
              center_sym: 0, $
              color: Ptr_New(), $           <span class="comments">;""</span>
              tt_font: Ptr_New(), $
              hardware: 0, $
              length: 0.0, $
              linestyle: Ptr_New(), $       <span class="comments">;""</span>
              location: FltArr(2), $
              psym: Ptr_New(), $            <span class="comments">;0L</span>
              symcolor: Ptr_New(), $        <span class="comments">;""</span>
              symsize: "", $
              symthick: 0.0, $
              thick: 0.0, $
              tcolor: Ptr_New(), $          <span class="comments">;""</span>
              title: Ptr_New(), $           <span class="comments">;""</span>
              visible: 0 $
            }
END
</code>
    </div>
  </body>
</html>