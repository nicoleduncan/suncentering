<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:06 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgfileselect__define.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgfileselect__define.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; This method returns the object properties.</span>
<span class="comments">;-</span>
PRO cgFileSelect::GetProperty, $
   FILENAME=filename, $
   LASTDIR=lastdir, $
   PARENT=parent, $
   TLB=tlb, $
   UNAME=uname, $
   UVALUE=uvalue
   
   IF Arg_Present(filename) THEN filename = self.filename
   IF Arg_Present(lastdir) THEN lastdir = self.lastdir
   IF Arg_Present(parent) THEN parent = self.parent
   IF Arg_Present(tlb) THEN tlb = self.tlb
   IF Arg_Present(uname) THEN uname = self.uname
   IF Arg_Present(uvalue) THEN IF Ptr_Valid(self.uvalue) THEN uvalue = *self.uvalue

END

<span class="comments">;+</span>
<span class="comments">; This method sets the object properties.</span>
<span class="comments">;-</span>
PRO cgFileSelect::SetProperty, $
   FILENAME=filename, $
   LASTDIR=lastdir, $
   UVALUE=uvalue
   
   IF N_Elements(filename) NE 0 THEN BEGIN
        self.filename = filename
        Widget_Control, self.textID, Set_Value=filename
   ENDIF
   IF N_Elements(lastdir) NE 0 THEN self.lastdir = lastdir
   IF N_Elements(uvalue) NE 0 THEN IF Ptr_Valid(self.uvalue) $
       THEN *self.uvalue = uvalue $
       ELSE self.uvalue = Ptr_New(uvalue)
       
END

<span class="comments">;+</span>
<span class="comments">; The class clean-up method.</span>
<span class="comments">;-</span>
PRO cgFileSelect::CLEANUP

    Ptr_Free, self.uvalue

END


<span class="comments">;+</span>
<span class="comments">; The class initialization method.</span>
<span class="comments">; </span>
<span class="comments">; :Params:</span>
<span class="comments">;     parent: in, optional</span>
<span class="comments">;          The identifier of the parent widget. If not used, a top-level base widget</span>
<span class="comments">;          will be created to hold the contents of the program.</span>
<span class="comments">;          </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     </span>
<span class="comments">;-</span>
FUNCTION cgFileSelect::INIT, parent, $
   FILENAME=filename, $
   FRAME=frame, $
   LABELSIZE=labelsize, $
   NAMESIZE=namesize, $
   TITLE=title, $
   UNAME=uname, $
   UVALUE=uvalue
    
   Compile_Opt idl2
    
   <span class="comments">; Error handling for the program module.</span>
   Catch, theError
   IF theError NE 0 THEN BEGIN
       Catch, /Cancel
       void = Error_Message()
       RETURN, 0
   ENDIF
    
   <span class="comments">; Need a parent?</span>
   IF N_Elements(parent) EQ 0 THEN BEGIN
        parent = Widget_Base()
        createdParent = 1
   ENDIF ELSE createdParent = 0
   
   <span class="comments">; Default keyword values.</span>
   SetDefaultValue, title, 'Filename: '
   SetDefaultValue, filename, ""
   SetDefaultValue, labelsize, !D.X_CH_SIZE * StrLen(title)
   SetDefaultValue, namesize, 0
   SetDefaultValue, uname, 'cgFileSelect'
   
   IF filename EQ "" THEN BEGIN
      CD, CURRENT=lastDir 
   ENDIF ELSE BEGIN
      root = cgRootName(filename, DIRECTORY=lastDir)
   ENDELSE
   
   <span class="comments">; Create the widgets for the program.</span>
   tlb = Widget_Base(parent, ROW=1, UVALUE=self, EVENT_PRO='cgFileSelect_Events', FRAME=frame)
   labelID = Widget_Label(tlb, Value=title, SCR_XSIZE=labelsize)
   IF namesize NE 0 THEN BEGIN
      textID = Widget_Label(tlb, Value=filename, /SUNKEN_FRAME, SCR_XSIZE=namesize)
   ENDIF ELSE BEGIN
      textID = Widget_Label(tlb, Value=filename, /SUNKEN_FRAME, DYNAMIC_RESIZE=1)
   ENDELSE
   button = Widget_Button(tlb, Value='Browse', UVALUE=self)
   
   <span class="comments">; Need to realize the widgets?</span>
   IF createdParent THEN BEGIN
       cgCenterTLB, parent
       Widget_Control, parent, /REALIZE
   ENDIF
   
   <span class="comments">; Populate the object.</span>
   self.filename = filename
   self.lastDir = lastDir
   self.parent = parent
   self.tlb = tlb
   self.textID = textID
   self.labelID = labelID
   self.uname = uname
   IF N_Elements(uvalue) NE 0 THEN self.uvalue = Ptr_New(uvalue)   
    
    
   <span class="comments">; Need to run the program?</span>
   IF createdParent THEN XManager, 'cgfileselect', parent, /No_Block
   
   RETURN, 1
END


<span class="comments">;+</span>
<span class="comments">; The class event handler. All program widget events come here to be processed.</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;     event: in, required</span>
<span class="comments">;         The event structure from the widget causing the event.</span>
<span class="comments">;+</span>
PRO cgFileSelect_Events, event

    Widget_Control, event.id, GET_UVALUE=self
    self -> GetProperty, LASTDIR=lastDir, FILENAME=filename, PARENT=parent, TLB=tlb
    filename = Dialog_Pickfile(PATH=lastDir, /WRITE, Title='Select File...', $
       FILE=cgRootName(filename))
    IF filename NE "" THEN BEGIN
       rootname = cgRootName(filename, DIRECTORY=lastDir)
       self -> SetProperty, FILENAME=filename, LASTDIR=lastDir
    ENDIF
        
END


<span class="comments">;+</span>
<span class="comments">; The class definition module for the cgFileSelect object.</span>
<span class="comments">; </span>
<span class="comments">; :Params:</span>
<span class="comments">;     class: out, optional, type=structure</span>
<span class="comments">;         The structure definition for the cgFileSelect object class.</span>
<span class="comments">;-</span>
PRO cgFileSelect__Define, class

    class = { cgFileSelect, $
              filename: "", $
              labelID: 0L, $
              lastDir: "", $
              parent: 0L, $
              tlb: 0L, $
              textID: 0L, $
              uname: "", $
              uvalue: Ptr_New() $
            }

END
</code>
    </div>
  </body>
</html>