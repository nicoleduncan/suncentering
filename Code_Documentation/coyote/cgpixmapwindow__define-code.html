<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:25 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgpixmapwindow__define.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgpixmapwindow__define.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgPixmapWindow</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   This is the "object" behind cgPixmap. It is a subclassed cgCmdWindow object</span>
<span class="comments">;   and behaves almost identically, except that normally the draw widget at the</span>
<span class="comments">;   heart of the window is invisible. That is, it is a pixmap.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;+</span>
<span class="comments">; This is the "object" behind cgPixmap. It is a subclassed cgCmdWindow object</span>
<span class="comments">; and behaves almost identically, except that normally the draw widget at the</span>
<span class="comments">; heart of the window is invisible. That is, it is a pixmap.</span>
<span class="comments">; </span>
<span class="comments">; Default properties of the object can be controled with cgWindow_SetDefs and cgControl,</span>
<span class="comments">; as with cgWindow. Be sure to delete the pixmap object when you are done with it, by</span>
<span class="comments">; using (for example) cgDelete.</span>
<span class="comments">;        </span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics</span>
<span class="comments">;    </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;     </span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Created from cgCmdWindow, 7 February 2012. DWF.</span>
<span class="comments">;        Problem with the ASPECT keyword, which should have been named WASPECT. 7 Oct 2012. DWF.</span>
<span class="comments">;        Added WDestroyObjects keyword to destroy objects parameters, if needed. 11 November 2012. DWF.</span>
<span class="comments">;        Confusion trying to change WBackground keyword to Background. Changed it back. Identical to ASPECT</span>
<span class="comments">;           problem described above. 18 Jan 2013. DWF.</span>
<span class="comments">;-</span>

<span class="comments">;+</span>
<span class="comments">; This method initializes the pixmap object.</span>
<span class="comments">; </span>
<span class="comments">; :Params:</span>
<span class="comments">;    parent: in, optional</span>
<span class="comments">;       The parent base widget for this draw widget object. If not defined,</span>
<span class="comments">;       the program will create its own top-level base widget.</span>
<span class="comments">;       </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;    altps_Keywords: in, optional, type=string</span>
<span class="comments">;       A structure containing alternative keyword names (as tags) and values for</span>
<span class="comments">;       those keywords to be used when the current device is the PostScript device.</span>
<span class="comments">;       See http://www.idlcoyote.com/cg_tips/kwexpressions.php and the examples</span>
<span class="comments">;       below for details on how to use this keyword.</span>
<span class="comments">;    altps_Params: in, optional, type=IntArr(3)</span>
<span class="comments">;       A structure containing alternative parameter values to be used when </span>
<span class="comments">;       the current device is the PostScript device. Structure names are restricted</span>
<span class="comments">;       to the names "P1", "P2", "P3" and "P4"to correspond to the equivalent positional</span>
<span class="comments">;       parameter. See http://www.idlcoyote.com/cg_tips/kwexpressions.php and the </span>
<span class="comments">;       examples below for details on how to use this keyword.</span>
<span class="comments">;    command: in, required, type=string</span>
<span class="comments">;       The graphics procedure command to be executed. This parameter</span>
<span class="comments">;       must be a string and the the command must be a procedure. Examples</span>
<span class="comments">;       are 'Surface', 'Contour', 'Plot', 'cgPlot', cgContour, etc.</span>
<span class="comments">;    eraseit: in, optional, type=boolean, default=0</span>
<span class="comments">;       Set this keyword to cause the window to be erased before graphics commands </span>
<span class="comments">;       are drawn. This may need to be set, for example, to display images.</span>
<span class="comments">;    group_leader: in, optional</span>
<span class="comments">;       The identifier of a widget to serve as a group leader for this program.</span>
<span class="comments">;       If the group leader is destroyed, this program is also destroyed. Used</span>
<span class="comments">;       when calling this program from another widget program.</span>
<span class="comments">;    method: in, optional, type=boolean, default=0</span>
<span class="comments">;       Set this keyword if the command is an object method call rather than a </span>
<span class="comments">;       procedure call. If this keyword is set, the first positional parameter, p1,</span>
<span class="comments">;       must be present and must be a valid object reference.</span>
<span class="comments">;    multi: in, optional, type=intarr(5)</span>
<span class="comments">;        Set this keyword in exactly the same way you would set the !P.Multi keyword.</span>
<span class="comments">;        It will allow you to display multi-plots in the cgWindow graphics window.</span>
<span class="comments">;    oxmargin: in, optional, type=float</span>
<span class="comments">;       A two-element array indicating the left and right X outside margins for the</span>
<span class="comments">;       graphical display. Used only when doing multiple plots with `WMulti`.</span>
<span class="comments">;    oymargin: in, optional, type=float</span>
<span class="comments">;       A two-element array indicating the bottom and top Y outside margins for the</span>
<span class="comments">;       graphical display. Used only when doing multiple plots with `WMulti`.</span>
<span class="comments">;    p1: in, optional, type=any</span>
<span class="comments">;       The first positional parameter appropriate for the graphics command.</span>
<span class="comments">;    p2: in, optional, type=any</span>
<span class="comments">;       The second positional parameter appropriate for the graphics command.</span>
<span class="comments">;    p3: in, optional, type=any</span>
<span class="comments">;       The third positional parameter appropriate for the graphics command.</span>
<span class="comments">;    p4: in, optional, type=any</span>
<span class="comments">;       The fourth positional parameter appropriate for the graphics command.</span>
<span class="comments">;    replacecmd: in, optional, type=boolean, default=0</span>
<span class="comments">;       Set this keyword to replace a graphics command from an cgWindow.</span>
<span class="comments">;       If CmdIndex is undefined, *all* commands in the window are replaced. Use </span>
<span class="comments">;       WinID to identify the cgWindow you are interested in. If WinID is </span>
<span class="comments">;       undefined, the last cgWindow created is used for the replacement.</span>
<span class="comments">;    storage: in, optional, type=any</span>
<span class="comments">;       Any user-defined IDL variable will be stored in the object storage location.</span>
<span class="comments">;       Defined here for convenience. Same as `Storage` keyword for the SetProperty method.</span>
<span class="comments">;    waspect: in, optional, type=float, default=normal</span>
<span class="comments">;       Set this keyword to the aspect ratio you would like the window to have.</span>
<span class="comments">;       The aspect ratio is calculated as (ysize/xsize). Must be a float value.</span>
<span class="comments">;       If this keyword is set, the window will maintain this aspect ratio,</span>
<span class="comments">;       even when it is resized.</span>
<span class="comments">;    wbackground: in, optional, type=varies, default=!P.Background</span>
<span class="comments">;       The background color of the window. Specifying a background color </span>
<span class="comments">;       automatically sets the WErase keyword.</span>
<span class="comments">;    wdestroyobjects: in, optional, type=boolean, default=0</span>
<span class="comments">;       If this keyword is set, and any of the input parameters p1-p4 is an object,</span>
<span class="comments">;       the object parameter will be destroyed when the window is destroyed.</span>
<span class="comments">;    wxsize: in, optional, type=integer, default=640</span>
<span class="comments">;       The x size in device coordinates of the graphics window.</span>
<span class="comments">;    wysize: in, optional, type=integer, default=512</span>
<span class="comments">;       The y size in device coordinates of the the graphics window.</span>
<span class="comments">;    _extra: in, optional</span>
<span class="comments">;       The "extra" keywords for the command that is being added to the window.</span>
<span class="comments">;-</span>
FUNCTION cgPixmapWindow::INIT, parent, $
   AltPS_Keywords=altps_Keywords, $ <span class="comments">; A structure of PostScript alternative keywords and values.</span>
   AltPS_Params=altps_Params, $     <span class="comments">; A structure of PostScript alternative parameters and values. </span>
   Command=command, $               <span class="comments">; The graphics "command" to execute.</span>
   EraseIt = eraseit, $             <span class="comments">; Set this keyword to erase the display before executing the command.</span>
   Group_Leader = group_leader, $   <span class="comments">; The group leader of the cgWindow program.</span>
   Method=method, $                 <span class="comments">; If set, will use CALL_METHOD instead of CALL_PROCEDURE to execute command.</span>
   Multi = multi, $                 <span class="comments">; Set this in the same way !P.Multi is used.</span>
   OXMargin = oxmargin, $           <span class="comments">; Set the !X.OMargin. A two element array.</span>
   OYMargin = oymargin, $           <span class="comments">; Set the !Y.OMargin. A two element array</span>
   P1=p1, $                         <span class="comments">; The first postitional parameter in a graphics command loaded for display.</span>
   P2=p2, $                         <span class="comments">; The sedond postitional parameter in a graphics command loaded for display.</span>
   P3=p3, $                         <span class="comments">; The third postitional parameter in a graphics command loaded for display.</span>
   P4=p4, $                         <span class="comments">; The fourth postitional parameter in a graphics command loaded for display. </span>
   ReplaceCmd=replacecmd, $         <span class="comments">; Replace the current command and execute in the current window.</span>
   Storage=storage, $               <span class="comments">; A storage pointer location. Used like a user value in a widget.</span>
   Visible=visible, $               <span class="comments">; Set this keyword to make the pixmap visible.</span>
   WAspect = waspect, $             <span class="comments">; Set the window aspect ratio to this value.</span>
   WBackground = wbackground, $     <span class="comments">; The background color. Set to !P.Background by default.</span>
   WDestroyObjects=wdestroyobjects, $ <span class="comments">; Set this keyword to destroy object parameters upon exit.</span>
   WXSize = xsize, $                <span class="comments">; The X size of the cgWindow graphics window in pixels. By default: 400.</span>
   WYSize = ysize, $                <span class="comments">; The Y size of the cgWindow graphics window in pixels. By default: 400.</span>
   _Extra = extra                   <span class="comments">; Any extra keywords. Usually the "command" keywords.</span>

    Compile_Opt idl2
    
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /CANCEL
        void = Error_Message()
        RETURN, 0
    ENDIF
    
    <span class="comments">; Check keywords.</span>
    method = Keyword_Set(method)
    visible = Keyword_Set(visible)
    currentWindow = !D.Window
    
    <span class="comments">; Create the widgets for the program.</span>
    IF N_Elements(parent) NE 0 THEN BEGIN
       self.tlb = parent
       Widget_Control, self.tlb, Map=0
    ENDIF ELSE BEGIN    
       self.tlb = Widget_Base(Map=0, /TLB_SIZE_EVENTS, UNAME='TLB_RESIZE')
    ENDELSE
   
    <span class="comments">; Get the global defaults.</span>
    cgWindow_GetDefs, $
       AdjustSize = d_adjustsize, $                      <span class="comments">; Adjust charsize to window size.</span>
       Aspect = d_aspect, $                              <span class="comments">; The aspect ratio of the window.</span>
       Background = d_background, $                      <span class="comments">; The background color. </span>
       Delay = d_delay, $                                <span class="comments">; The amount of delay between command execution.</span>
       EraseIt = d_eraseit, $                            <span class="comments">; Set this keyword to erase the display before executing the commands.</span>
       Multi = d_multi, $                                <span class="comments">; Set this in the same way !P.Multi is used.   </span>
       XOMargin = d_xomargin, $                          <span class="comments">; Set the !X.OMargin. A two element array.</span>
       YOMargin = d_yomargin, $                          <span class="comments">; Set the !Y.OMargin. A two element array</span>
       XSize = d_xsize, $                                <span class="comments">; The X size of the cgWindow graphics window.</span>
       YSize = d_ysize, $                                <span class="comments">; The Y size of the cgWindow graphics window.</span>
       Title = d_title, $                                <span class="comments">; The window title.</span>
       XPos = d_xpos, $                                  <span class="comments">; The X offset of the window on the display.</span>
       YPos = d_ypos, $                                  <span class="comments">; The Y offset of the window on the display. </span>
       Palette = d_palette, $                            <span class="comments">; The color table palette to use for the window.</span>
       
       <span class="comments">; PDF properties.</span>
       PDF_Unix_Convert_Cmd = d_pdf_unix_convert_cmd, $  <span class="comments">; Command to convert PS to PDF.</span>
       PDF_Path = d_pdf_path, $                          <span class="comments">; The path to the Ghostscript conversion command.</span>
   
       <span class="comments">; ImageMagick Properties.</span>
       IM_Transparent = d_im_transparent, $              <span class="comments">; Sets the "alpha" keyword on ImageMagick convert command.</span>
       IM_Density = d_im_density, $                      <span class="comments">; Sets the density parameter on ImageMagick convert command.</span>
       IM_Raster = d_im_raster, $                        <span class="comments">; Create raster files via ImageMagick.</span>
       IM_Resize = d_im_resize, $                        <span class="comments">; Sets the resize parameter on ImageMagick convert command.</span>
       IM_Options = d_im_options, $                      <span class="comments">; Sets extra ImageMagick options on the ImageMagick convert command.</span>
       IM_Width = d_im_width, $                          <span class="comments">; Set the width of ImageMagick output.</span>
       
       <span class="comments">; PostScript properties.</span>
       PS_Decomposed = d_ps_decomposed, $                <span class="comments">; Sets the PostScript color mode.</span>
       PS_Delete = d_ps_delete, $                        <span class="comments">; Delete PS file when making IM raster.</span>
       PS_Metric = d_ps_metric, $                        <span class="comments">; Select metric measurements in PostScript output.</span>
       PS_Encapsulated = d_ps_encapsulated, $            <span class="comments">; Create Encapsulated PostScript output.    </span>
       PS_FONT = d_ps_font, $                            <span class="comments">; Select the font for PostScript output.</span>
       PS_CHARSIZE = d_ps_charsize, $                    <span class="comments">; Select the character size for PostScript output.</span>
       PS_QUIET = d_ps_quiet, $                          <span class="comments">; Select the QUIET keyword for PS_Start.</span>
       PS_SCALE_FACTOR = d_ps_scale_factor, $            <span class="comments">; Select the scale factor for PostScript output.</span>
       PS_TT_FONT = d_ps_tt_font                         <span class="comments">; Select the true-type font to use for PostScript output.</span>
        
    <span class="comments">; If method is set, the first positional parameter must be present,</span>
    <span class="comments">; and it must be a valid object reference.</span>
    IF method THEN BEGIN
        IF N_Elements(p1) EQ 0 THEN $
            Message, 'The parameter P1 must be present to make a method call.'
        IF ~Obj_Valid(p1) THEN $
            Message, 'The parameter P1 must be a valid object reference when making method calls.'
    ENDIF
    SetDefaultValue, xsize, d_xsize 
    SetDefaultValue, ysize, d_ysize 
    SetDefaultValue, xpos, d_xpos 
    SetDefaultValue, ypos, d_ypos 
    SetDefaultValue, button_events, 0, /Boolean
    SetDefaultValue, drop_events, 0, /Boolean
    SetDefaultValue, keyboard_events, 0, /Boolean
    SetDefaultValue, motion_events, 0, /Boolean
    SetDefaultValue, tracking_events, 0, /Boolean
    SetDefaultValue, waspect, d_aspect 
    SetDefaultValue, wheel_events, 0, /Boolean
    IF N_Elements(storage) NE 0 THEN self.storage = Ptr_New(storage)
    IF N_Elements(wbackground) EQ 0 THEN BEGIN
        wbackground = d_background
        IF N_Elements(command) EQ 0 THEN eraseit = 1
        IF (N_Elements(command) NE 0) && cgCoyoteGraphic(command) THEN eraseit = 1
    ENDIF ELSE BEGIN
        eraseit = 1
    ENDELSE
    IF N_Elements(eraseIt) EQ 0 THEN eraseIt = d_eraseit ELSE eraseIt = Keyword_Set(eraseIt)

    <span class="comments">; The commands will be placed in a linked list for execution.</span>
    self.cmds = Obj_New('LinkedList')
    IF Obj_Valid(self.cmds) EQ 0 THEN Message, 'Failed to make the LinkedList for the commands.'
    
    <span class="comments">; Add a command, if you have one. Otherwise, just make the window.</span>
    IF (N_Elements(command) NE 0) THEN BEGIN
        thisCommand = Obj_New('cgWindow_Command', COMMAND=command, $
                P1=p1, P2=p2, P3=p3, P4=p4, KEYWORDS=extra, TYPE=method, $
                ALTPS_KEYWORDS=altps_Keywords, ALTPS_PARAMS=altps_Params, $
                DESTROYOBJECTS=Keyword_Set(wdestroyobjects))
        IF Obj_Valid(thisCommand) THEN self.cmds -> Add, thisCommand ELSE Message, 'Failed to make command object.'
    ENDIF 
    
    <span class="comments">; If there is a palette, use it. Otherwise, use the current color table vectors.</span>
    IF Total(d_palette) NE 0 THEN BEGIN
        IF Size(d_palette, /N_DIMENSIONS) NE 2 THEN Message, 'Color palette is not a 3xN array.'
        dims = Size(d_palette, /DIMENSIONS)
        threeIndex = Where(dims EQ 3)
        IF ((threeIndex)[0] LT 0) THEN Message, 'Color palette is not a 3xN array.'
        IF threeIndex[0] EQ 0 THEN d_palette = Transpose(d_palette)
        self.r = Ptr_New(d_palette[*,0])
        self.g = Ptr_New(d_palette[*,1])
        self.b = Ptr_New(d_palette[*,2])
    ENDIF ELSE BEGIN
        TVLCT, rr, gg, bb, /Get
        self.r = Ptr_New(rr)
        self.g = Ptr_New(gg)
        self.b = Ptr_New(bb)
    ENDELSE
    
    <span class="comments">; Check to see if you have to create a window with a particular aspect ratio.</span>
    <span class="comments">; If so, your xsize and ysize values will need to be adjusted.</span>
    IF waspect NE 0 THEN BEGIN
         IF waspect GE 1 THEN BEGIN
            xsize = Round(ysize / waspect)
         ENDIF ELSE BEGIN
            ysize = Round(xsize * waspect)
         ENDELSE
     ENDIF
    
    <span class="comments">; Create draw widget. UNIX versions of IDL have a bug in which creating</span>
    <span class="comments">; a draw widget as the very first window in an IDL session causes both</span>
    <span class="comments">; !P.Background and !P.Color to be set to white. I know, it's odd. But</span>
    <span class="comments">; doing this little trick fixes the problem.</span>
    tempBackground = !P.Background
    tempColor = !P.Color
    retain = (StrUpCase(!Version.OS_Family) EQ 'UNIX') ? 2 : 1
    notify_realize = 'cgCmdWindowDrawRealize'
    kill_notify = 'cgCmdWindowKillNotify'
    self.drawID = Widget_Draw(self.tlb, XSIZE=xsize, YSize=ysize, RETAIN=retain, $
       UVALUE=self, UNAME='DRAW_WIDGET', Kill_Notify=kill_notify, NOTIFY_REALIZE=notify_realize) 
    !P.Background = Temporary(tempBackground)
    !P.Color = Temporary(tempColor)
    
    <span class="comments">; Load object properties.</span>
    self.background = Ptr_New(wbackground)
    IF N_Elements(cmdDelay) NE 0 THEN self.delay = cmdDelay ELSE self.delay = d_delay
    self.eraseIt = eraseIt
    IF N_Elements(multi) NE 0 THEN BEGIN
       FOR j=0,N_Elements(multi)-1 DO self.pmulti[j] = multi[j]
    ENDIF ELSE self.pmulti = d_multi
    IF N_Elements(wxomargin) NE 0 THEN self.xomargin = xomargin ELSE self.xomargin = d_xomargin
    IF N_Elements(wyomargin) NE 0 THEN self.yomargin = yomargin ELSE self.yomargin = d_yomargin
    self.adjustsize = d_adjustsize
    self.destroyObjects = Keyword_Set(wdestroyobjects)
    self.im_transparent = d_im_transparent
    self.im_density = d_im_density
    self.im_options = d_im_options
    self.im_raster = d_im_raster
    self.im_resize = d_im_resize
    self.im_width = d_im_width
    self.msysvar = Ptr_New(/Allocate_Heap)
    self.pdf_unix_convert_cmd = d_pdf_unix_convert_cmd
    self.pdf_path = d_pdf_path
    self.ps_decomposed = d_ps_decomposed
    self.ps_delete = d_ps_delete
    self.ps_encapsulated = d_ps_encapsulated
    self.ps_metric = d_ps_metric
    self.ps_charsize = d_ps_charsize
    self.ps_font = d_ps_font
    self.ps_quiet = d_ps_quiet
    self.ps_scale_factor = d_ps_scale_factor
    self.ps_tt_font = d_ps_tt_font
    self.visible = visible
    self.waspect = waspect

    <span class="comments">; Restore the current graphics window, if you can.</span>
    IF (currentWindow GE 0) && WindowAvailable(currentWindow) THEN BEGIN
       WSet, currentWindow
    ENDIF ELSE WSet, -1
    
    <span class="comments">; Make the pixmap visible, if needed.</span>
    IF visible THEN Widget_Control, self.tlb, MAP=1
    Widget_Control, self.tlb, /Realize, Set_UValue=self
    XManager, 'cgwindow', self.tlb, /No_Block, $
            Event_Handler='cgCmdWindow_Dispatch_Events', $
            Cleanup = 'cgCmdWindow_Cleanup', $
            Group_Leader=group_leader
 
    RETURN, 1
END
  

<span class="comments">;+</span>
<span class="comments">; This method allows you to set the properties of the object. Most properties are</span>
<span class="comments">; passed along to the superclass method.</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     visible: in, optional, type=boolean</span>
<span class="comments">;        Set this keyword to make the pixmap visible.</span>
<span class="comments">;     _extra: in, optional</span>
<span class="comments">;        Any keywords appropriate for the SetProperty method of the superclass object.</span>
<span class="comments">;-</span>
PRO cgPixmapWindow::SetProperty, VISIBLE=visible, _EXTRA=extra

    Compile_Opt idl2
    
    <span class="comments">; Error handling.</span>
    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /CANCEL
        void = Error_Message()
        RETURN
    ENDIF
    
    IF N_Elements(visible) NE 0 THEN Widget_Control, self.tlb, MAP=Keyword_Set(visible)
    
    IF N_Elements(extra) NE 0 THEN self -> cgCmdWindow::SetProperty, _STRICT_EXTRA=extra
    
END


<span class="comments">;+</span>
<span class="comments">; The definition module for the cgPixmapWindow object</span>
<span class="comments">; </span>
<span class="comments">; :Params:</span>
<span class="comments">;    class: out, optional, type=struct</span>
<span class="comments">;        The object class structure definition. Occasionally useful.</span>
<span class="comments">;-</span>
PRO cgPixmapWindow__Define, class

   class = {cgPixmapWindow, $
            INHERITS cgCmdWindow, $
            visible: 0L }             <span class="comments">; Set this to make the pixmap visible.</span>
            
END
</code>
    </div>
  </body>
</html>