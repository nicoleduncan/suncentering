<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:50 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>fsc_inputfield.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="fsc_inputfield.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;   FSC_INPUTFIELD</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;</span>
<span class="comments">;   The purpose of this compound widget is to provide an alternative</span>
<span class="comments">;   to the CW_FIELD widget offered in the IDL distribution. What has</span>
<span class="comments">;   always bothered me about CW_FIELD is that the text widgets do not</span>
<span class="comments">;   look editable to the users on Windows platforms. This program</span>
<span class="comments">;   corrects that deficiency and adds some features that I think</span>
<span class="comments">;   would be helpful. For example, you can now assign an event handler</span>
<span class="comments">;   to the compound widget. The program is written entirely as an object.</span>
<span class="comments">;   A companion program, COYOTE_FIELD, has much the same functionality,</span>
<span class="comments">;   but is written as a traditional compound widget. The point of writing</span>
<span class="comments">;   the same program in two different ways is to give you the opportunity</span>
<span class="comments">;   to compare and contrast the two methods. I personally think there</span>
<span class="comments">;   is no substitute for the power of object programs. :-)</span>
<span class="comments">;</span>
<span class="comments">; AUTHOR:</span>
<span class="comments">;   FANNING SOFTWARE CONSULTING</span>
<span class="comments">;   David Fanning, Ph.D.</span>
<span class="comments">;   1645 Sheely Drive</span>
<span class="comments">;   Fort Collins, CO 80526 USA</span>
<span class="comments">;   Phone: 970-221-0438</span>
<span class="comments">;   E-mail: david@idlcoyote.com</span>
<span class="comments">;   Coyote's Guide to IDL Programming: http://www.idlcoyote.com/</span>
<span class="comments">;</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;</span>
<span class="comments">;   General programming.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;</span>
<span class="comments">;   objectRef = FSC_INPUTFIELD(parent, Title='X Size: ", Value=256, /IntegerValue)</span>
<span class="comments">;</span>
<span class="comments">; INPUT PARAMETERS:</span>
<span class="comments">;</span>
<span class="comments">;   parent -- The parent widget ID of the compound widget. Required.</span>
<span class="comments">;</span>
<span class="comments">; INPUT KEYWORDS:</span>
<span class="comments">;</span>
<span class="comments">;   Column -- Set this keyword to have the Label Widget above the Text Widget.</span>
<span class="comments">;   CR_Only -- Set this keyword if you only want Carriage Return events. Note that no</span>
<span class="comments">;              events are returned unless the EVENT_PRO or EVENT_FUNC keywords are also used.</span>
<span class="comments">;   Decimal -- Set this keyword to the number of digits to the right of the decimal</span>
<span class="comments">;              point in FLOATVALUE and DOUBLEVALUE numbers.</span>
<span class="comments">;   Digits -- Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
<span class="comments">;   DoubleValue -- Set this keyword if you want DOUBLE values returned.</span>
<span class="comments">;   Event_Func -- Set this keyword to the name of an Event Function. If this</span>
<span class="comments">;                keyword is undefined and the Event_Pro keyword is undefined,</span>
<span class="comments">;                all compound widget events are handled internally and not</span>
<span class="comments">;                passed on to the parent widget.</span>
<span class="comments">;   Event_Pro -- Set this keyword to the name of an Event Procedure. If this</span>
<span class="comments">;                keyword is undefined and the Event_Func keyword is undefined,</span>
<span class="comments">;                all compound widget events are handled internally and not</span>
<span class="comments">;                passed on to the parent widget.</span>
<span class="comments">;   FieldFont -- The font name for the text in the Text Widget.</span>
<span class="comments">;   FloatValue -- Set this keyword for FLOAT values.</span>
<span class="comments">;   Focus_Events -- Set this keyword if you only want text events when the keyboard focus is</span>
<span class="comments">;                moved out of the text widget. Note that no events are returned unless the</span>
<span class="comments">;                EVENT_PRO or EVENT_FUNC keywords are also used.</span>
<span class="comments">;   Frame -- Set this keyword to put a frame around the compound widget.</span>
<span class="comments">;   IntegerValue -- Set this keyword for INTEGER values.</span>
<span class="comments">;   LabelAlign -- Set this keyword to align label text. [0-center (default), 1-left, 2-right].</span>
<span class="comments">;   LabelFont -- The font name for the text in the Label Widget.</span>
<span class="comments">;   LabelSize -- The X screen size of the Label Widget.</span>
<span class="comments">;   LongValue -- Set this keyword for LONG values.</span>
<span class="comments">;   Name -- A scalar string name of the object. (default = '')</span>
<span class="comments">;   Positive -- Set this keyword if you want only positive numbers allowed.</span>
<span class="comments">;   Row=row -- Set this keyword to have the Label beside the Text Widget. (The default.)</span>
<span class="comments">;   Scr_XSize -- The X screen size of the compound widget.</span>
<span class="comments">;   Scr_YSize -- The Y screen size of the compound widget.</span>
<span class="comments">;   StringValue -- Set this keyword for STRING values. (The default.)</span>
<span class="comments">;   Title -- The text to go on the Label Widget.</span>
<span class="comments">;   UValue -- A user value for any purpose.</span>
<span class="comments">;   Value -- The "value" of the compound widget.</span>
<span class="comments">;   XSize -- The X size of the Text Widget.</span>
<span class="comments">;</span>
<span class="comments">;   In addition, any keyword defined for WIDGET_TEXT, but not defined here (e.g., SENSITIVE), is</span>
<span class="comments">;   passed along without inspection to the text widget. Use of "extra" keywords is discouraged.</span>
<span class="comments">;</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;</span>
<span class="comments">;   None.</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;</span>
<span class="comments">;   None.</span>
<span class="comments">;</span>
<span class="comments">; EVENT STRUCTURE:</span>
<span class="comments">;</span>
<span class="comments">;   All events are handled internally unless either the Event_Pro or Event_Func</span>
<span class="comments">;   keywords are used to assign an event handler to the compound widget. By</span>
<span class="comments">;   default all events generated by the text widget are passed to the assigned</span>
<span class="comments">;   event handler. If you wish to receive only Carriage Return events, set the</span>
<span class="comments">;   CR_Only keyword.</span>
<span class="comments">;</span>
<span class="comments">;   event = { FSC_INPUTFIELD_EVENTS, $  ; The name of the event structure.</span>
<span class="comments">;             ID: 0L, $                 ; The ID of the compound widget's top-level base.</span>
<span class="comments">;             TOP: 0L, $                ; The widget ID of the top-level base of the hierarchy.</span>
<span class="comments">;             HANDLER: 0L, $            ; The event handler ID. Filled out by IDL.</span>
<span class="comments">;             ObjRef: Obj_New(), $      ; The "self" object reference. Provided so you can call methods.</span>
<span class="comments">;             Value: Ptr_New(), $       ; A pointer to the widget value.</span>
<span class="comments">;             Type:""                   ; A string indicating the type of data in the VALUE field.</span>
<span class="comments">;           }                           ; Values are "INT", "LONG", "FLOAT", "DOUBLE", or "STRING".</span>
<span class="comments">;</span>
<span class="comments">; GETTING and SETTING VALUES:</span>
<span class="comments">;</span>
<span class="comments">;   Almost all the properties of the widget can be obtained or set via</span>
<span class="comments">;   the object's GetProperty and SetProperty methods (described below).</span>
<span class="comments">;   But since traditional compound widgets have the ability to get and</span>
<span class="comments">;   set the value of the compound widget, this capability is implemented</span>
<span class="comments">;   as special methods.</span>
<span class="comments">;</span>
<span class="comments">;   To get the value of the field, do this: value = objectRef->Get_Value()</span>
<span class="comments">;   To set the value of the field, so this: objectRef->Set_Value, value, /IntegerValue</span>
<span class="comments">;</span>
<span class="comments">;   The proper keyword should be used to set the data type of the value. If a keyword</span>
<span class="comments">;   is not used, the data type is determined from the value itself.</span>
<span class="comments">;</span>
<span class="comments">; OBJECT PROCEDURE METHODS:</span>
<span class="comments">;</span>
<span class="comments">;   GetProperty -- This method allows various properties of the widget to be</span>
<span class="comments">;       returned via output keywords. The keywords that are available are:</span>
<span class="comments">;</span>
<span class="comments">;       CR_Only -- A flag, if set, means only report carriage return events.</span>
<span class="comments">;       DataType -- The data type of the field variable.</span>
<span class="comments">;       Decimal -- Set this keyword to the number of digits to the right of the decimal</span>
<span class="comments">;              point in FLOATVALUE and DOUBLEVALUE numbers.</span>
<span class="comments">;       Digits -- Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
<span class="comments">;       Event_Func -- The name of the event handler function.</span>
<span class="comments">;       Event_Pro -- The name of the event handler function.</span>
<span class="comments">;       Positive -- Indicates if the Positive number flag is set (1) or not (0).</span>
<span class="comments">;       UValue -- The user value assigned to the compound widget.</span>
<span class="comments">;       Value -- The "value" of the compound widget.</span>
<span class="comments">;     Name -- A scalar string name of the object.</span>
<span class="comments">;</span>
<span class="comments">;   Resize -- This method allows you to resize the compound widget's text field.</span>
<span class="comments">;        The value parameter is an X screen size for the entire widget. The text</span>
<span class="comments">;        widget is sized by using the value obtained from this value minus the</span>
<span class="comments">;        X screen size of the label widget.</span>
<span class="comments">;</span>
<span class="comments">;          objectRef->Resize, screen_xsize_value</span>
<span class="comments">;</span>
<span class="comments">;   Set_Value -- This method allows you to set the "value" of the field. It takes</span>
<span class="comments">;       one positional parameter, which is the value.</span>
<span class="comments">;</span>
<span class="comments">;          objectRef->Set_Value, 5</span>
<span class="comments">;</span>
<span class="comments">;       Keywords available are these to set the type of the data. If keywords</span>
<span class="comments">;       are not used, the data type is determined from the value.</span>
<span class="comments">;</span>
<span class="comments">;       DoubleValue -- Set this keyword if you want DOUBLE values returned.</span>
<span class="comments">;       FloatValue -- Set this keyword for FLOAT values.</span>
<span class="comments">;       IntegerValue --  Set this keyword for INTEGER values.</span>
<span class="comments">;       LongValue -- Set this keyword for LONG values.</span>
<span class="comments">;       StringValue -- Set this keyword for STRING values. (The default.)</span>
<span class="comments">;</span>
<span class="comments">;   SetProperty -- This method allows various properties of the widget to be</span>
<span class="comments">;       set via input keywords. The keywords that are available are:</span>
<span class="comments">;</span>
<span class="comments">;       CR_Only -- Set this keyword if you only want Carriage Return events.</span>
<span class="comments">;       Decimal -- Set this keyword to the number of digits to the right of the decimal</span>
<span class="comments">;              point in FLOATVALUE and DOUBLEVALUE numbers.</span>
<span class="comments">;       Digits -- Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
<span class="comments">;       DoubleValue -- Set this keyword if you want DOUBLE values returned.</span>
<span class="comments">;       Event_Func -- Set this keyword to the name of an Event Function.</span>
<span class="comments">;       Event_Pro -- Set this keyword to the name of an Event Procedure.</span>
<span class="comments">;       FloatValue -- Set this keyword for FLOAT values.</span>
<span class="comments">;       IntegerValue --  Set this keyword for INTEGER values.</span>
<span class="comments">;       LabelSize --  The X screen size of the Label Widget.</span>
<span class="comments">;       LongValue -- Set this keyword for LONG values.</span>
<span class="comments">;       Name -- A scalar string name of the object. (default = '')</span>
<span class="comments">;       Positive -- Set this keyword to indicate only positive numbers are allowed.</span>
<span class="comments">;       Scr_XSize -- The X screen size of the text widget.</span>
<span class="comments">;       Scr_YSize -- The Y screen size of the text widget.</span>
<span class="comments">;       Sensitive -- Set to 1 to make the widget sensitive, and to 0 to make it insensitive.</span>
<span class="comments">;       StringValue -- Set this keyword for STRING values. (The default.)</span>
<span class="comments">;       Title -- The text to go on the Label Widget.</span>
<span class="comments">;       UValue -- A user value for any purpose.</span>
<span class="comments">;       Value -- The "value" of the compound widget.</span>
<span class="comments">;       XSize -- The X size of the Text Widget.</span>
<span class="comments">;</span>
<span class="comments">;   SetTabNext -- This method allows you to specify which field to go to when a TAB character</span>
<span class="comments">;      is typed in the text widget. See the Example program below for an example of how to</span>
<span class="comments">;      use this method.</span>
<span class="comments">;</span>
<span class="comments">; OBJECT FUNCTIONS METHODS:</span>
<span class="comments">;</span>
<span class="comments">;      Get_Value -- Returns the "value" of the field. No parameters. Will be undefined</span>
<span class="comments">;          if a "number" field is blank. Should be checked before using:</span>
<span class="comments">;</span>
<span class="comments">;          IF N_Elements(objectRef->Get_Value()) NE 0 THEN Print, Value is: ', objectRef->Get_Value()</span>
<span class="comments">;</span>
<span class="comments">;      GetID -- Returns the widget identifier of the compound widget's top-level base.</span>
<span class="comments">;         (The first child of the parent widget.) No parameters.</span>
<span class="comments">;</span>
<span class="comments">;      GetLabelSize -- Returns the X screen size of the label widget. No parameters.</span>
<span class="comments">;</span>
<span class="comments">;      GetTextID -- Returns the widget identifier of the compound widget's text widget.</span>
<span class="comments">;         No parameters.</span>
<span class="comments">;</span>
<span class="comments">;      GetTextSize -- Returns the X screen size of the text widget. No parameters.</span>
<span class="comments">;</span>
<span class="comments">; PRIVATE OBJECT METHODS:</span>
<span class="comments">;</span>
<span class="comments">;   Although there is really no such thing as a "private" method in IDL's</span>
<span class="comments">;   object implementation, some methods are used internally and not meant to</span>
<span class="comments">;   be acessed publicly. Here are a few of those methods. I list them because</span>
<span class="comments">;   it may be these private methods are ones you wish to override in subclassed</span>
<span class="comments">;   objects.</span>
<span class="comments">;</span>
<span class="comments">;      MoveTab -- This method moves the focus to the widget identified in the "next" field,</span>
<span class="comments">;        which must be set with the SetTabNext method. No parameters. Called automatically</span>
<span class="comments">;        when a TAB character is typed in the text widget.</span>
<span class="comments">;</span>
<span class="comments">;      Text_Events -- The main event handler method for the compound widget. All</span>
<span class="comments">;        text widget events are processed here.</span>
<span class="comments">;</span>
<span class="comments">;      ReturnValue -- This function method accepts a string input value and converts</span>
<span class="comments">;        it to the type of data requested by the user.</span>
<span class="comments">;</span>
<span class="comments">;      Validate -- This function method examines all text input and removes unwanted</span>
<span class="comments">;        characters, depending upon the requested data type for the field. It makes it</span>
<span class="comments">;        impossible, for example, to type alphanumeric characters in an INTEGER field.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;</span>
<span class="comments">;   An example program is provided at the end of the FSC_INPUTFIELD code. To run it,</span>
<span class="comments">;   type these commands:</span>
<span class="comments">;</span>
<span class="comments">;      IDL> .Compile FSC_InputField</span>
<span class="comments">;      IDL> Example</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;</span>
<span class="comments">;   IDL 6.2 introduced new TAB behavior, which broke the previous TAB behavior. New TAB behavior</span>
<span class="comments">;   is now supported, but FOCUS_EVENTS *must* be set on the widget for the new TAB events to</span>
<span class="comments">;   behave properly. See the EXAMPLE program for examples.</span>
<span class="comments">;</span>
<span class="comments">; DEPENDENCIES:</span>
<span class="comments">;</span>
<span class="comments">;   Requires cgDblToStr from the Coyote Library:</span>
<span class="comments">;     http://www.idlcoyote.com/programs/cgdbltostr.pro</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;</span>
<span class="comments">;   Written by: David W. Fanning, 23 NOV 1999.</span>
<span class="comments">;   Added DECIMAL and DIGITS keywords, 2 Jan 2000, DWF.</span>
<span class="comments">;   Changed the calling sequence to that of a function rather than an object</span>
<span class="comments">;      creation call. This is more familiar to users of compound widgets. 4 Jan 00. DWF.</span>
<span class="comments">;   Added GetID and Resize methods. 7 Jan 00. DWF.</span>
<span class="comments">;   Added the Positive keyword and functionality. 12 Jan 00. DWF</span>
<span class="comments">;   Modified (slightly) the behavior on deleting characters. 12 Jan 00. DWF.</span>
<span class="comments">;   If a number field is blank, the Get_Value method will now return an undefined variable.</span>
<span class="comments">;      Be sure you check this value before you use it for something! 17 Jan 00. DWF.</span>
<span class="comments">;   Fixed a small typo: "aveDecimal" to "haveDecimal". 10 March 2000. DWF.</span>
<span class="comments">;   Added the ability to tab between FSC_INPUTFIELD widgets with the SetTabNext,</span>
<span class="comments">;      MoveTab, and GetTextID methods. 31 July 2000. DWF.</span>
<span class="comments">;   Added NAME field property, a scalar string name for the object 2 AUG 2000 BT</span>
<span class="comments">;   Added ObjRef field to the FSC_FIELD event structure and added field selection</span>
<span class="comments">;      for the TAB events added 31 July. 7 AUG 2000. DWF</span>
<span class="comments">;   Added GetTextSize and GetLabelSize methods for obtaining the X screen</span>
<span class="comments">;      size of the text and label widgets, respectively. 30 Jan 2001. DWF.</span>
<span class="comments">;   Added FOCUS_EVENTS keyword and fixed a problem with the event structure.</span>
<span class="comments">;      Also added better error handling. 5 January 2003. DWF.</span>
<span class="comments">;   Fixed a small problem in which input values were cast to strings inadvertently. 9 January 2004. DWF.</span>
<span class="comments">;   Fixed a small problem with error messages and using EVENT_FUNC. 14 January 2004. DWF.</span>
<span class="comments">;   Fixed a problem when setting ROW keyword. 23 February 2004. DWF.</span>
<span class="comments">;   IDL 6.2 introduced new TAB behavior, which broke the previous TAB behavior. New TAB behavior</span>
<span class="comments">;      is now supported, but FOCUS_EVENTS *must* be set for the new TAB events to behave properly.</span>
<span class="comments">;      10 August 2005. DWF.</span>
<span class="comments">;   Modified to covert double precision values to strings properly. 30 November 2005. DWF.</span>
<span class="comments">;   Added POSITIVE keyword to SETPROPERTY and GETPROPERTY methods. 25 February 2006. DWF.</span>
<span class="comments">;   Set the DYNAMIC_RESIZE keyword on the label widget. 25 February 2006. DWF.</span>
<span class="comments">;   Added SENSITIVE keyword to SetProperty documentation. 10 November 2006. DWF.</span>
<span class="comments">;   Fixed a small problem in which doubles were not being initialized correctly due</span>
<span class="comments">;      to an inadvertant extra line of code. 3 July 2007. DWF.</span>
<span class="comments">;   Fixed a small problem with input validation when the input is of BYTE type. 1 Oct 2008. DWF.</span>
<span class="comments">;   Set the default fonts to be the current widget font, rather than the default widget font. 4 Oct 2008. DWF.</span>
<span class="comments">;   Fixed a problem with validating a float or double value when it was written with</span>
<span class="comments">;      exponential notation. 2 April 2010. DWF.</span>
<span class="comments">;-</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;  Copyright (c) 2008, by Fanning Software Consulting, Inc.                                ;</span>
<span class="comments">;  All rights reserved.                                                                    ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
FUNCTION FSC_InputField_WidgetFont, DEFAULT=default

   <span class="comments">; Build a small widget to determine the current </span>
   <span class="comments">; and default widget fonts.</span>
   
   base = Widget_Base(MAP=0)
   button = Widget_Button(base, Value='TEST')
   
   <span class="comments">; Checking before realization gives default font.</span>
   defaultFont = Widget_Info(button, /FONTNAME)
   
   <span class="comments">; Checking after realization gives current font.</span>
   Widget_Control, base, /REALIZE
   currentFont = Widget_Info(button, /FONTNAME)
   
   <span class="comments">; Clean up.</span>
   Widget_Control, base, /DESTROY

   IF Keyword_Set(default) THEN $
        RETURN, defaultFont ELSE $
        RETURN, currentFont
    
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>




FUNCTION FSC_InputField_ERROR_MESSAGE, theMessage, Error=error, Informational=information, $
   Traceback=traceback, NoName=noname, Title=title, _Extra=extra

On_Error, 2

   <span class="comments">; Check for presence and type of message.</span>

IF N_Elements(theMessage) EQ 0 THEN theMessage = !Error_State.Msg
s = Size(theMessage)
messageType = s[s[0]+1]
IF messageType NE 7 THEN BEGIN
   Message, "The message parameter must be a string.", _Extra=extra
ENDIF

   <span class="comments">; Get the call stack and the calling routine's name.</span>

Help, Calls=callStack
IF Float(!Version.Release) GE 5.2 THEN $
   callingRoutine = (StrSplit(StrCompress(callStack[1])," ", /Extract))[0] ELSE $
   callingRoutine = (Str_Sep(StrCompress(callStack[1])," "))[0]

   <span class="comments">; Are widgets supported?</span>

widgetsSupported = ((!D.Flags AND 65536L) NE 0)
IF widgetsSupported THEN BEGIN

      <span class="comments">; If this is an error produced with the MESSAGE command, it is a trapped</span>
      <span class="comments">; error and will have the name "IDL_M_USER_ERR".</span>

   IF !ERROR_STATE.NAME EQ "IDL_M_USER_ERR" THEN BEGIN

      IF N_Elements(title) EQ 0 THEN title = 'Trapped Error'

         <span class="comments">; If the message has the name of the calling routine in it,</span>
         <span class="comments">; it should be stripped out. Can you find a colon in the string?</span>

      colon = StrPos(theMessage, ":")
      IF colon NE -1 THEN BEGIN

            <span class="comments">; Extract the text up to the colon. Is this the same as</span>
            <span class="comments">; the callingRoutine? If so, strip it.</span>

         IF StrMid(theMessage, 0, colon) EQ callingRoutine THEN $
            theMessage = StrMid(theMessage, colon+1)

      ENDIF

         <span class="comments">; Add the calling routine's name, unless NONAME is set.</span>

      IF Keyword_Set(noname) THEN BEGIN
         answer = Dialog_Message(theMessage, Title=title, _Extra=extra, $
            Error=error, Information=information)
      ENDIF ELSE BEGIN
         answer = Dialog_Message(StrUpCase(callingRoutine) + ": " + $
            theMessage, Title=title, _Extra=extra, $
            Error=error, Information=information)
      ENDELSE

   ENDIF ELSE BEGIN

         <span class="comments">; Otherwise, this is an IDL system error.</span>

      IF N_Elements(title) EQ 0 THEN title = 'System Error'

      IF StrUpCase(callingRoutine) EQ "$MAIN$" THEN $
         answer = Dialog_Message(theMessage, _Extra=extra, Title=title, $
            Error=error, Information=information) ELSE $
      IF Keyword_Set(noname) THEN BEGIN
         answer = Dialog_Message(theMessage, _Extra=extra, Title=title, $
            Error=error, Information=information)
      ENDIF ELSE BEGIN
         answer = Dialog_Message(StrUpCase(callingRoutine) + "--> " + $
            theMessage, _Extra=extra, Title=title, $
            Error=error, Information=information)
      ENDELSE
   ENDELSE
ENDIF ELSE BEGIN
      Message, theMessage, /Continue, /NoPrint, /NoName, /NoPrefix, _Extra=extra
      Print, '%' + callingRoutine + ': ' + theMessage
      answer = 'OK'
ENDELSE

   <span class="comments">; Provide traceback information if requested.</span>

IF Keyword_Set(traceback) THEN BEGIN
   Help, /Last_Message, Output=traceback
   Print,''
   Print, 'Traceback Report from ' + StrUpCase(callingRoutine) + ':'
   Print, ''
   FOR j=0,N_Elements(traceback)-1 DO Print, "     " + traceback[j]
ENDIF

RETURN, answer
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


PRO FSC_InputField::MoveTab
IF  NOT Widget_Info(self.tabnext, /Valid_ID) THEN RETURN
Widget_Control, self.tabnext, /Input_Focus
Widget_Control, self.tabnext, Get_Value=theText
theText = theText[0]
Widget_Control, self.tabnext, Set_Text_Select=[0,StrLen(theText)]
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


PRO FSC_InputField::SetTabNext, nextID
self.tabnext = nextID
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


FUNCTION FSC_InputField::GetTextID

<span class="comments">; This method returns the ID of the text widget of the compound widget.</span>

RETURN, self.textID
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


PRO FSC_InputField::Resize, newsize

<span class="comments">; This method resizes the widget by making the text widget fit the new size.</span>

l = Widget_Info(self.labelID, /Geometry)
Widget_Control, self.textID, Scr_XSize = (newsize - l.scr_xsize)
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


FUNCTION FSC_InputField::GetID

<span class="comments">; This method returns the ID of the top-level base of the compound widget.</span>

RETURN, self.tlb
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


FUNCTION FSC_InputField::GetLabelSize

<span class="comments">; This method returns the X screen size of the label widget.</span>

geom = Widget_Info(self.labelID, /Geometry)
RETURN, geom.scr_xsize
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::GetTextSize

<span class="comments">; This method returns the X screen size of the text widget.</span>

geom = Widget_Info(self.textID, /Geometry)
RETURN, geom.scr_xsize
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::Geometry

<span class="comments">; This method returns the geometry of the compound widget.</span>

RETURN, Widget_Info(self.tlb,/Geometry)
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


FUNCTION FSC_InputField::Get_Value

<span class="comments">; This method returns the actual value of the compound widget.</span>

RETURN, *self.theValue
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>


PRO FSC_InputField::Set_Value, value, IntegerValue=integervalue, $
  FloatValue=floatvalue, LongValue=longvalue, DoubleValue=doublevalue, $
  StringValue=stringvalue

<span class="comments">; This method sets the value of the compound widget.</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN
ENDIF

IF Keyword_Set(stringvalue) THEN dataType = 'STRING'
IF Keyword_Set(integervalue) THEN dataType = 'INT'
IF Keyword_Set(longvalue) THEN dataType = 'LONG'
IF Keyword_Set(floatvalue) THEN dataType = 'FLOAT'
IF Keyword_Set(doublevalue) THEN dataType = 'DOUBLE'

IF N_Elements(dataType) EQ 0 THEN dataType = Size(value, /TName)
IF dataType EQ 'BYTE' THEN BEGIN
    value = 0 > FIX(value) &lt<span class="comments">; 255</span>
    dataType = 'INT'
ENDIF

self.dataType = datatype

IF self.dataType EQ 'DOUBLE' THEN theText = cgDblToStr(value) ELSE theText = StrTrim(value, 2)
theText = self->Validate(theText)

   <span class="comments">; Load the value in the widget.</span>

Widget_Control, self.textID, Set_Value=theText, Set_Text_Select=[StrLen(theText),0]
self.theText = theText

   <span class="comments">; Set the actual value of the compound widget.</span>

*self.theValue = self->ReturnValue(theText)
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::Validate, value

<span class="comments">; This function eliminates illegal characters from a string that represents</span>
<span class="comments">; a number. The return value is a properly formatted string that can be turned into</span>
<span class="comments">; an INT, LONG, FLOAT, or DOUBLE value. This is a "private" method.</span>
<span class="comments">;</span>
<span class="comments">; + 43B</span>
<span class="comments">; - 45B</span>
<span class="comments">; . 46B</span>
<span class="comments">; 0 - 9 48B -57B</span>
<span class="comments">; 'eEdD' [101B, 69B, 100B, 68B]</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN, ""
ENDIF
   <span class="comments">; A null string should be returned at once.</span>

IF N_Elements(value) EQ 0 THEN value = ""
value = value[0]
IF value EQ "" THEN RETURN, String(value)

   <span class="comments">; No leading or trailing blank characters to evaluate.</span>

value = StrTrim(value, 2)

   <span class="comments">; A string value should be returned at once. Nothing to check.</span>

IF StrUpCase(self.datatype) EQ 'STRING' THEN RETURN, String(value)

   <span class="comments">; Check integers and longs. A "-" or "+" in the first character is allowed. Otherwise,</span>
   <span class="comments">; only number between 0 and 9, or 43B to 57B.</span>

IF StrUpCase(self.datatype) EQ 'INT' OR StrUpCase(self.datatype) EQ 'LONG' THEN BEGIN

   returnValue = Ptr_New(/Allocate_Heap)
   asBytes = Byte(value)

   IF self.positive THEN BEGIN
      IF (asBytes[0] EQ 43B) OR $
         (asBytes[0] GE 48B AND asBytes[0] LE 57B) THEN *returnValue = [asBytes[0]]
   ENDIF ELSE BEGIN
      IF (asBytes[0] EQ 45B) OR (asBytes[0] EQ 43B) OR $
         (asBytes[0] GE 48B AND asBytes[0] LE 57B) THEN *returnValue = [asBytes[0]]
   ENDELSE
   length = StrLen(asBytes)
   IF length EQ 1 THEN BEGIN
      IF N_Elements(*returnValue) EQ 0 THEN  *returnValue = [32B] ELSE $
            *returnValue = [asBytes[0]]
   ENDIF ELSE BEGIN
      FOR j=1,length-1 DO BEGIN
         IF (asBytes[j] GE 48B AND asBytes[j] LE 57B) THEN BEGIN
            IF N_Elements(*returnValue) EQ 0 THEN  *returnValue = [asBytes[j]] ELSE $
               *returnValue = [*returnValue, asBytes[j]]
         ENDIF
      ENDFOR
  ENDELSE
  IF N_Elements(*returnValue) NE 0 THEN retValue = String(*returnValue) ELSE retValue = ""
  Ptr_Free, returnValue

      <span class="comments">; Check for digit restrictions.</span>

  IF self.digits GT 0 THEN BEGIN
      retValue = StrTrim(retValue, 2)
      IF StrMid(retValue, 0, 1) EQ "-" THEN digits = self.digits + 1 ELSE digits = self.digits
      retValue = StrMid(retValue, 0, digits)
  ENDIF

  RETURN, retValue

ENDIF

   <span class="comments">; Check floating and double values. (+,-) in first character or after 'eEdD'.</span>
   <span class="comments">; Only numbers, signs, decimal points, and 'eEdD' allowed.</span>

IF StrUpCase(self.datatype) EQ 'FLOAT' OR StrUpCase(self.datatype) EQ 'DOUBLE' THEN BEGIN
   returnValue = Ptr_New(/Allocate_Heap)
   asBytes = Byte(value)
   IF self.positive THEN BEGIN
      IF (asBytes[0] EQ 43B) OR $
         (asBytes[0] GE 48B AND asBytes[0] LE 57B) OR $
         (asBytes[0] EQ 46B) THEN *returnValue = [asBytes[0]]
      IF (asBytes[0] EQ 46B) THEN haveDecimal = 1 ELSE haveDecimal = 0
   ENDIF ELSE BEGIN
      IF (asBytes[0] EQ 45B) OR (asBytes[0] EQ 43B) OR $
         (asBytes[0] GE 48B AND asBytes[0] LE 57B) OR $
         (asBytes[0] EQ 46B) THEN *returnValue = [asBytes[0]]
      IF (asBytes[0] EQ 46B) THEN haveDecimal = 1 ELSE haveDecimal = 0
   ENDELSE
   haveExponent = 0
   length = StrLen(asBytes)
   prevByte = asBytes[0]
   exponents = Byte('eEdD')
   IF length EQ 1 THEN BEGIN
      IF N_Elements(*returnValue) EQ 0 THEN  *returnValue = [32B] ELSE $
            *returnValue = [asBytes[0]]
   ENDIF ELSE BEGIN
      FOR j=1,length-1 DO BEGIN
         IF (asBytes[j] GE 48B AND asBytes[j] LE 57B) THEN BEGIN
            IF N_Elements(*returnValue) EQ 0 THEN  *returnValue = [asBytes[j]] ELSE $
               *returnValue = [*returnValue, asBytes[j]]
            prevByte = asBytes[j]
         ENDIF ELSE BEGIN

            <span class="comments">; What kind of thing is it?</span>

            IF (asBytes[j] EQ 46B) THEN BEGIN <span class="comments">; A decimal point.</span>
               IF haveDecimal EQ 0 THEN BEGIN
                  *returnValue = [*returnValue, asBytes[j]]
                  haveDecimal = 1
                  prevByte = asBytes[j]
               ENDIF
            ENDIF

            IF (asBytes[j] EQ 45B) OR (asBytes[j] EQ 43B) THEN BEGIN <span class="comments">; A + or - sign.</span>
               index = Where(exponents EQ prevByte, count)
               IF count EQ 1 AND haveExponent THEN BEGIN
                  *returnValue = [*returnValue, asBytes[j]]
                  haveDecimal = 1
                  prevByte = asBytes[j]
               ENDIF
            ENDIF

            index = Where(exponents EQ asBytes[j], count)
            IF count EQ 1 AND haveExponent EQ 0 THEN BEGIN <span class="comments">; An exponent</span>
               *returnValue = [*returnValue, asBytes[j]]
               haveExponent = 1
               prevByte = asBytes[j]
            ENDIF
         ENDELSE
      ENDFOR
   ENDELSE
      IF N_Elements(*returnValue) NE 0 THEN BEGIN

      retValue = String(*returnValue)
      retValue = StrTrim(retValue, 2)

               <span class="comments">; Check for decimal restrictions</span>

      IF self.decimal GE 0 THEN BEGIN
         theDecimalPt = StrPos(retValue, '.')
         IF theDecimalPt NE -1 THEN retValue = StrMid(retValue, 0, theDecimalPt + self.decimal + 1)
      ENDIF

   ENDIF ELSE retValue = ""
   Ptr_Free, returnValue

      <span class="comments">; Is this a representable number?</span>

   testValue = self->ReturnValue(retValue)
   IF String(testValue) NE 'NULLVALUE' THEN numCheck = Finite(testValue) ELSE numCheck = 1
   IF numCheck THEN BEGIN
      RETURN, retValue
   ENDIF ELSE BEGIN
      Message, 'The requested number is not representable.'
   ENDELSE
ENDIF

END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField_Event__Define

<span class="comments">; The FSC_InputField_Event Structure. Sent only if EVENT_PRO or EVENT_FUNC keywords</span>
<span class="comments">; have defined an event handler for the top-level base of the compound widget.</span>

   event = { FSC_InputField_Event, $<span class="comments">; The name of the event structure.</span>
             ID: 0L, $              <span class="comments">; The ID of the compound widget's top-level base.</span>
             TOP: 0L, $             <span class="comments">; The widget ID of the top-level base of the hierarchy.</span>
             HANDLER: 0L, $         <span class="comments">; The event handler ID. Filled out by IDL.</span>
             Value: Ptr_New(), $    <span class="comments">; A pointer to the widget value.</span>
             Type:"", $             <span class="comments">; A string indicating the type of data in the VALUE field.</span>
                                    <span class="comments">; Values are "INT", "LONG", "FLOAT", "DOUBLE", or "STRING".</span>
             ObjRef:Obj_New()}      <span class="comments">; The "self" object.</span>


END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::ReturnValue, inputValue

<span class="comments">; This method takes a string and turns it into a number,</span>
<span class="comments">; depending upon the current data type of the compound widget.</span>
<span class="comments">; This is a "private" method. For numbers, if the input value</span>
<span class="comments">; is a null string, then an undefined variable is returned.</span>

   <span class="comments">; Error Handling.</span>

ON_IOERROR, CatchIt

CASE self.datatype OF
   'INT': IF inputValue EQ "" OR inputValue EQ "-" OR inputValue EQ "+" THEN $
      retValue = 'NULLVALUE' ELSE retValue = Fix(inputValue)
   'LONG': IF inputValue EQ "" OR inputValue EQ "-" OR inputValue EQ "+" THEN $
      retValue = 'NULLVALUE' ELSE retValue = Long(inputValue)
   'FLOAT' : IF inputValue EQ "" OR inputValue EQ "-" OR inputValue EQ "+" THEN $
      retValue = 'NULLVALUE' ELSE retValue = Float(inputValue)
   'DOUBLE': IF inputValue EQ "" OR inputValue EQ "-" OR inputValue EQ "+" THEN $
      retValue = 'NULLVALUE' ELSE retValue = Double(inputValue)
   'STRING' : retValue = inputValue
ENDCASE

RETURN, retValue

CatchIt:
   retValue = 'NULLVALUE'
   RETURN, retValue
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::TextEvents, event

<span class="comments">; The event handler method for the text widget of the compound widget.</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   Catch, /Cancel
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN, 0
ENDIF

   <span class="comments">; Get the previous text, the current cursor location in the text widget,</span>
   <span class="comments">; and indicate this is not a Carriage Return event.</span>

previousText = self.theText
textLocation = Widget_Info(event.id, /Text_Select)
cr_event = 0

   <span class="comments">; Is this a keyboard focus event? Then process it differently.</span>

IF Tag_Names(event, /Structure_Name) EQ 'WIDGET_KBRD_FOCUS' THEN BEGIN

   <span class="comments">; New behavior for TAB MODE functionality in IDL 6.2.</span>
   IF Float(!Version.Release) GT 6.1 THEN BEGIN

      IF event.enter EQ 1 THEN BEGIN

         Widget_Control, self.textID, Get_Value=theText
         theText = theText[0]
         Widget_Control, self.textID, Set_Text_Select=[0,StrLen(theText)]

         <span class="comments">; Send the keyboard focus events if there is an event handler to accept them.</span>
         IF self.event_func NE "" THEN BEGIN
            thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
            RETURN, thisEvent
         ENDIF

         IF self.event_pro NE "" THEN BEGIN
            thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
            RETURN, thisEvent
         ENDIF

         <span class="comments">; Out of here.</span>
         RETURN, 0

      ENDIF ELSE BEGIN

         Widget_Control, self.textID, Set_Text_Select=[0,0]

         <span class="comments">; Send the keyboard focus events if there is an event handler to accept them.</span>
         IF self.event_func NE "" THEN BEGIN
            thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
            RETURN, thisEvent
         ENDIF

         IF self.event_pro NE "" THEN BEGIN
            thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
            RETURN, thisEvent
         ENDIF

         <span class="comments">; Out of here.</span>
         RETURN, 0

      ENDELSE

   ENDIF ELSE BEGIN

      IF event.enter EQ 1 THEN RETURN,0 <span class="comments">; Don't bother. Only interested in losing keyboard focus.</span>

          <span class="comments">; Get the current contents of text widget. Validate it.</span>

       Widget_Control, self.textID, Get_Value=newText
       newText = newText[0]
       validText = self->Validate(newText)

          <span class="comments">; Load the valid text.</span>

      self.theText = validText
      testValue  = self->ReturnValue(validText)
      IF String(testValue) EQ "NULLVALUE" THEN BEGIN
          Ptr_Free, self.theValue
          self.theValue = Ptr_New(/Allocate_Heap)
      ENDIF ELSE *self.theValue = testValue

         <span class="comments">; Send the keyboard focus events if there is an event handler to accept them.</span>

      IF self.event_func NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         RETURN, thisEvent
      ENDIF

      IF self.event_pro NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         RETURN, thisEvent
      ENDIF

      RETURN, 0
   ENDELSE
ENDIF

   <span class="comments">; What kind of event is this?</span>

possibleTypes = ['INSERT SINGLE CHARACTER', 'INSERT MULTIPLE CHARACTERS', 'DELETE TEXT', 'SELECT TEXT']
thisType = possibleTypes[event.type]

   <span class="comments">; Branch on event type.</span>

CASE thisType OF

   'INSERT SINGLE CHARACTER': BEGIN

            <span class="comments">; If the character is a TAB see if there is something to do.</span>

         IF event.ch EQ 9B THEN BEGIN
            self->MoveTab
            RETURN, 0
         ENDIF

            <span class="comments">; Get the current contents of text widget. Validate it.</span>

         Widget_Control, self.textID, Get_Value=newText
         newText = newText[0]
         validText = self->Validate(newText)

            <span class="comments">; If it is valid, leave it alone. If not, go back to previous text.</span>

         IF validText NE newText THEN BEGIN

            Widget_Control, self.textID, Set_Value=previousText, Set_Text_Select=[textLocation[0]-1,0]

         ENDIF ELSE BEGIN

            self.theText = validText
            testValue  = self->ReturnValue(validText)
            IF String(testValue) EQ "NULLVALUE" THEN BEGIN
               Ptr_Free, self.theValue
               self.theValue = Ptr_New(/Allocate_Heap)
            ENDIF ELSE *self.theValue = testValue

         ENDELSE

            <span class="comments">; Is this a Carriage Return event?</span>

         IF event.ch EQ 10B then cr_event = 1
      ENDCASE

   'INSERT MULTIPLE CHARACTERS': BEGIN

            <span class="comments">; Same as above, but for all the characters you are inserting.</span>

         Widget_Control, self.textID, Get_Value=newText
         newText = newText[0]
         validText = self->Validate(newText)
         IF validText NE newText THEN BEGIN
            Widget_Control, self.textID, Set_Value=previousText, Set_Text_Select=[textLocation[0]-1,0]
         ENDIF ELSE BEGIN
            self.theText = validText
            testValue  = self->ReturnValue(validText)
            IF String(testValue) EQ "NULLVALUE" THEN BEGIN
               Ptr_Free, self.theValue
               self.theValue = Ptr_New(/Allocate_Heap)
            ENDIF ELSE *self.theValue = testValue
         ENDELSE
      ENDCASE

   'DELETE TEXT': BEGIN

            <span class="comments">; Get the current contents of text widget. Validate it.</span>

         Widget_Control, self.textID, Get_Value=newText
         newText = newText[0]
         validText = self->Validate(newText)

            <span class="comments">; Load the valid text.</span>

        Widget_Control, self.textID, Set_Value=validText, Set_Text_Select=[textLocation[0],0]
        self.theText = validText
        testValue  = self->ReturnValue(validText)
        IF String(testValue) EQ "NULLVALUE" THEN BEGIN
            Ptr_Free, self.theValue
            self.theValue = Ptr_New(/Allocate_Heap)
        ENDIF ELSE *self.theValue = testValue

      ENDCASE

   'SELECT TEXT': <span class="comments">; Nothing to do.</span>

ENDCASE

   <span class="comments">; Do you report all events, or only Carriage Return events?</span>


CASE 1 OF
   self.cr_only: BEGIN
      IF self.event_func NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         IF cr_event THEN RETURN, thisEvent
      ENDIF

      IF self.event_pro NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         IF cr_event THEN RETURN, thisEvent
      ENDIF
      END
   self.focus:
   ELSE: BEGIN
      IF self.event_func NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         RETURN, thisEvent
      ENDIF

      IF self.event_pro NE "" THEN BEGIN
         thisEvent = {FSC_InputField_Event, self.tlb, event.top, 0L, self.theValue, self.dataType, self}
         RETURN, thisEvent
      ENDIF
      END
ENDCASE



RETURN, 0
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField_Event_Handler, event

<span class="comments">; The main event handler for the compound widget. It reacts</span>
<span class="comments">; to "messages" in the UValue of the text widget.</span>
<span class="comments">; The message indicates which object method to call. A message</span>
<span class="comments">; consists of an object method and the self object reference.</span>

Widget_Control, event.ID, Get_UValue=theMessage

event = Call_Method(theMessage.method, theMessage.object, event)

RETURN, event
END <span class="comments">;-----------------------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField::GetProperty, $
<span class="comments">;</span>
<span class="comments">; This method allows you to obtain various properties of the compound widget via output keywords.</span>
<span class="comments">;</span>
   CR_Only=cr_only, $               <span class="comments">; Get the value of the self.cr_only flag..</span>
   DataType=datatype, $             <span class="comments">; The datatype of the compound widget.</span>
   Decimal=decimal, $               <span class="comments">; Get the number of digits to the right of the decimal</span>
                                    <span class="comments">;   point in FLOATVALUE and DOUBLEVALUE numbers.</span>
   Digits=digits, $                 <span class="comments">; The number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
   Event_Func=event_func, $         <span class="comments">; Get the name of an Event Function.</span>
   Event_Pro=event_pro, $           <span class="comments">; Get the name of an Event Procedure.</span>
   Focus_Events=focus_event, $      <span class="comments">; Get the current state of the self.focus flag.</span>
   Name=Name, $                     <span class="comments">; Get the name of the object.</span>
   Positive=positive, $             <span class="comments">; Get the positive state of the object.</span>
   UValue=uvalue, $                 <span class="comments">; Get the user value of this object.</span>
   Value=value                      <span class="comments">; Get the "value" of the compound widget.</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN
ENDIF

   <span class="comments">; Get the properties.</span>

cr_only = self.cr_only
datatype = self.datatype
decimal = self.decimal
digits = self.digits
event_func = self.event_func
event_pro = self.event_pro
positive = self.positive
uvalue = *self.uvalue
value = *self.thevalue
name = self.name
focus_event = self.focus

END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField::SetProperty, $
<span class="comments">;</span>
<span class="comments">; This method allows you to set various properties of the compound widget.</span>
<span class="comments">;</span>
   CR_Only=cr_only, $               <span class="comments">; Set this keyword if you only want Carriage Return events.</span>
   Decimal=decimal, $               <span class="comments">; Set this keyword to the number of digits to the right of the decimal</span>
                                    <span class="comments">;   point in FLOATVALUE and DOUBLEVALUE numbers.</span>
   Digits=digits, $                 <span class="comments">; Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
   DoubleValue=doublevalue, $       <span class="comments">; Set this keyword if you want DOUBLE values returned.</span>
   Event_Func=event_func, $         <span class="comments">; Set this keyword to the name of an Event Function.</span>
   Event_Pro=event_pro, $           <span class="comments">; Set this keyword to the name of an Event Procedure.</span>
   FloatValue=floatvalue, $         <span class="comments">; Set this keyword for FLOAT values.</span>
   Focus_Events=focus_events, $     <span class="comments">; Set this keyword to the current state of the self.focus flag.</span>
   IntegerValue=integervalue, $     <span class="comments">; Set this keyword for INTEGER values.</span>
   LabelSize=labelsize, $           <span class="comments">; The X screen size of the Label Widget.</span>
   LongValue=longvalue, $           <span class="comments">; Set this keyword for LONG values.</span>
   Name=name, $                     <span class="comments">; A scalar string name for the object.</span>
   Positive=positive, $             <span class="comments">; The positive property.</span>
   Scr_XSize=scr_xsize, $           <span class="comments">; The X screen size of the text widget.</span>
   Scr_YSize=scr_ysize, $           <span class="comments">; The Y screen size of the text widget.</span>
   Sensitive=sensitive, $           <span class="comments">; Set to 1 to make the widget sensitive, and to 0 to make it insensitive.</span>
   StringValue=stringvalue, $       <span class="comments">; Set this keyword for STRING values. (The default.)</span>
   Title=title, $                   <span class="comments">; The text to go on the Label Widget.</span>
   UValue=uvalue, $                 <span class="comments">; A user value for any purpose.</span>
   Value=value, $                   <span class="comments">; The "value" of the compound widget.</span>
   XSize=xsize                      <span class="comments">; The X size of the Text Widget.</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN
ENDIF

   <span class="comments">; Set the properties, if needed.</span>

IF N_Elements(cr_only) NE 0 THEN self.cr_only = Keyword_Set(cr_only)
IF Keyword_Set(decimal)THEN self.decimal = decimal
IF Keyword_Set(digits)THEN self.digits = digits
IF Keyword_Set(doublevalue)THEN self.datatype = 'DOUBLE'
IF N_Elements(event_func) NE 0 THEN self.event_func = event_func
IF N_Elements(event_pro) NE 0 THEN self.event_pro = event_pro
IF Keyword_Set(floatvalue)THEN self.datatype = 'FLOAT'
IF N_Elements(focus_events) NE 0 THEN self.focus = Keyword_Set(focus_events)
IF Keyword_Set(integervalue)THEN self.datatype = 'INT'
IF N_Elements(labelsize) NE 0 THEN BEGIN
   Widget_Control, self.labelID, XSize=labelsize
ENDIF
IF Keyword_Set(longvalue)THEN self.datatype = 'LONG'
IF N_Elements(scr_xsize) NE 0 THEN BEGIN
   self.scr_xsize = scr_xsize
   Widget_Control, self.textID, Scr_XSize=scr_xsize
ENDIF
IF N_Elements(positive) NE 0 THEN self.positive = positive
IF N_Elements(scr_ysize) NE 0 THEN BEGIN
   self.scr_ysize = scr_ysize
   Widget_Control, self.textID, Scr_YSize=scr_ysize
ENDIF
IF N_Elements(sensitive) NE 0 THEN Widget_Control, self.textID, Sensitive=sensitive
IF Keyword_Set(stringvalue)THEN self.datatype = 'STRING'
IF N_Elements(title) NE 0 THEN Widget_Control, self.labelID, Set_Value=title
IF N_Elements(uvalue) NE 0 THEN *self.uvalue = uvalue
If N_elements(Name) NE 0 Then Self.Name = String(Name[0])
IF N_Elements(xsize) NE 0 THEN BEGIN
   self.xsize = xsize
   Widget_Control, self.textID, XSize=xsize
ENDIF

IF N_Elements(value) NE 0 THEN BEGIN
   CASE Size(value, /TNAME) OF
       'FLOAT': self.theText = StrTrim(String(value, FORMAT='(F0)'),2)
       'DOUBLE': self.theText = StrTrim(String(value, FORMAT='(D0)'),2)
       ELSE: self.theText = StrTrim(value, 2)
   ENDCASE
   *self.theValue = self->ReturnValue(self.theText)
   Widget_Control, self.textID, Set_Value=self.theText
ENDIF ELSE BEGIN
  Widget_Control, self.textID, Get_Value=theText
  theText = theText[0]
  *self.theValue = self->ReturnValue(theText)
ENDELSE

END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>



FUNCTION FSC_InputField::INIT, $    <span class="comments">; The compound widget FSC_InputField INIT method..</span>
   parent, $                        <span class="comments">; The parent widget. Required for all compound widgets.</span>
   Column=column, $                 <span class="comments">; Set this keyword to have Label above Text Widget.</span>
   CR_Only=cr_only, $               <span class="comments">; Set this keyword if you only want Carriage Return events.</span>
   Decimal=decimal, $               <span class="comments">; Set this keyword to the number of digits to the right of the decimal</span>
                                    <span class="comments">;   point in FLOATVALUE and DOUBLEVALUE numbers.</span>
   Digits=digits, $                 <span class="comments">; Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
   DoubleValue=doublevalue, $       <span class="comments">; Set this keyword if you want DOUBLE values returned.</span>
   Event_Func=event_func, $         <span class="comments">; Set this keyword to the name of an Event Function.</span>
   Event_Pro=event_pro, $           <span class="comments">; Set this keyword to the name of an Event Procedure.</span>
   _Extra=extra, $                   <span class="comments">; Passes along extra keywords to the text widget.</span>
   FieldFont=fieldfont, $           <span class="comments">; The font name for the text in the Text Widget.</span>
   FloatValue=floatvalue, $         <span class="comments">; Set this keyword for FLOAT values.</span>
   Focus_Events=focus_events, $     <span class="comments">; Set this keyword to enable event reporting when the widget loses keyboard focus.</span>
   Frame=frame, $                   <span class="comments">; Set this keyword to put a frame around the compound widget.</span>
   IntegerValue=integervalue, $     <span class="comments">; Set this keyword for INTEGER values.</span>
   LabelAlign=labelalign, $         <span class="comments">; Set this keyword to align label text.</span>
   LabelFont=labelfont, $           <span class="comments">; The font name for the text in the Label Widget.</span>
   LabelSize=labelsize, $           <span class="comments">; The X screen size of the Label Widget.</span>
   LongValue=longvalue, $           <span class="comments">; Set this keyword for LONG values.</span>
   Name=name, $                     <span class="comments">; A scalar string name for the object.</span>
   Positive=positive, $             <span class="comments">; Set this keyword to indicate only positive numbers allowed in the field.</span>
   Row=row, $                       <span class="comments">; Set this keyword to have the Label beside the Text Widget. (The default.)</span>
   Scr_XSize=scr_xsize, $           <span class="comments">; The X screen size of the text widget.</span>
   Scr_YSize=scr_ysize, $           <span class="comments">; The Y screen size of the text widget.</span>
   StringValue=stringvalue, $       <span class="comments">; Set this keyword for STRING values. (The default.)</span>
   Title=title, $                   <span class="comments">; The text to go on the Label Widget.</span>
   UValue=uvalue, $                 <span class="comments">; A user value for any purpose.</span>
   Value=value, $                   <span class="comments">; The "value" of the compound widget.</span>
   XSize=xsize                      <span class="comments">; The X size of the Text Widget.</span>

   <span class="comments">; Error Handling.</span>

Catch, theError
IF theError NE 0 THEN BEGIN
   ok = FSC_InputField_ERROR_MESSAGE(/Traceback)
   RETURN, 0
ENDIF

   <span class="comments">; A parent is required.</span>

IF N_Elements(parent) EQ 0 THEN BEGIN
   Message, 'A PARENT argument is required. Returning...', /Informational
   RETURN, -1L
ENDIF

   <span class="comments">; Check keyword values.</span>

IF N_Elements(column) EQ 0 THEN column = 0
IF N_Elements(digits) EQ 0 THEN digits = 0 ELSE digits = Fix(digits)
IF N_Elements(decimal) EQ 0 THEN decimal = -1 ELSE decimal = Fix(decimal)
IF N_Elements(event_func) EQ 0 THEN event_func = ""
IF N_Elements(event_pro) EQ 0 THEN event_pro = ""
IF N_Elements(fieldfont) EQ 0 THEN fieldfont = FSC_InputField_WidgetFont()
IF N_Elements(frame) EQ 0 THEN frame = 0
IF N_Elements(labelalign) EQ 0 THEN labelalign = 0
IF N_Elements(labelfont) EQ 0 THEN labelfont = FSC_InputField_WidgetFont()
IF N_Elements(labelsize) EQ 0 THEN labelsize = 0
<span class="comments">;IF N_Elements(scr_xsize) EQ 0 THEN scr_xsize = 0</span>
<span class="comments">;IF N_Elements(scr_ysize) EQ 0 THEN scr_ysize = 0</span>
IF N_Elements(title) EQ 0 THEN title = "Input Value: "
IF N_Elements(uvalue) EQ 0 THEN uvalue = ""
IF N_Elements(value) EQ 0 THEN value = ""
IF N_Elements(xsize) EQ 0 THEN xsize = 0
IF N_Elements(row) EQ 0 AND column EQ 0 THEN row = 1

   <span class="comments">; What data type are we looking for?</span>

dataType = 'STRING'
IF Keyword_Set(stringvalue) THEN dataType = 'STRING'
IF Keyword_Set(integervalue) THEN dataType = 'INT'
IF Keyword_Set(longvalue) THEN dataType = 'LONG'
IF Keyword_Set(floatvalue) THEN dataType = 'FLOAT'
IF Keyword_Set(doublevalue) THEN dataType = 'DOUBLE'

   <span class="comments">; Populate the object.</span>

self.cr_only = Keyword_Set(cr_only)
self.datatype = datatype
self.decimal = decimal
self.digits = digits
self.focus = Keyword_Set(focus_events)
self.parent = parent
self.event_pro = event_pro
self.event_func = event_func
self.positive = Keyword_Set(positive)
self.uvalue = Ptr_New(uvalue)
If N_Elements(name) NE 0 Then self.name = String(name[0])

   <span class="comments">; Validate the input value.</span>

IF dataType EQ 'DOUBLE' THEN theText = cgDblToStr(value) ELSE theText = StrTrim(value, 2)
theText = self->Validate(theText)
self.theText = theText

   <span class="comments">; Create the widgets.</span>

self.tlb = Widget_Base( parent, $  <span class="comments">; The top-level base of the compound widget.</span>
   Frame=frame, $
   Row=row, $
   Column=Keyword_Set(column), $
   Base_Align_Center=1, $
   UValue=uvalue, $
   Event_Pro=event_pro, $
   Event_Func=event_func )

<span class="comments">; New TAB MODE functionality in IDL 6.2.</span>
IF Float(!Version.Release) GT 6.1 THEN Widget_Control, self.tlb, TAB_MODE=1

self.labelID = Widget_Label( self.tlb, Value=title, Font=labelfont, $ <span class="comments">; The Label Widget.</span>
  Scr_XSize=labelsize, Scr_YSize=scr_ysize, /Dynamic_Resize, $
  Align_Center=(labelalign eq 0)?1:0, $
  Align_Left=(labelalign EQ 1)?1:0, $
  Align_Right=(labelalign EQ 2)?1:0)

self.textID = Widget_Text( self.tlb, $  <span class="comments">; The Text Widget.</span>
   Value=theText, $
   XSize=xsize, $
   YSize=1, $
   Font=fieldfont, $
   All_Events=1, $
   _Extra=extra, $
   Scr_YSize=scr_ysize, $
   Kbrd_Focus_Events=self.focus, $
   Event_Func='FSC_InputField_Event_Handler', $
   UValue={Method:"TextEvents", Object:self}, $
   Kill_Notify='FSC_InputField_Kill_Notify', $
   Editable=1 )

   <span class="comments">; If screen sizes are set, adjust the text widget size.</span>
   IF N_Elements(scr_xsize) NE 0 THEN BEGIN
      tlbg = Widget_Info(self.tlb, /Geometry)
      textg = Widget_Info(self.textID, /Geometry)
      labelg = Widget_info(self.labelID, /Geometry)
      plussize = textg.scr_xsize + labelg.scr_xsize
      stuff = (tlbg.xpad*2) + tlbg.space
      IF plussize GT scr_xsize THEN $
         Widget_Control, self.textID, Scr_XSize=textg.scr_xsize-(plussize-scr_xsize)-stuff ELSE $
         Widget_Control, self.textID, Scr_XSize=textg.scr_xsize+(scr_xsize - plussize)-stuff
   ENDIF

   <span class="comments">; Set the actual return value of the compound widget.</span>

self.theValue = Ptr_New(self->ReturnValue(theText))

   <span class="comments">; If CR_ONLY or FOCUS_EVENTS are turned on and EVENT_PRO and EVENT_FUNC keywords are</span>
   <span class="comments">; unspecified, issue a warning message to the command log.</span>

IF self.cr_only AND (self.event_pro EQ "" AND self.event_func EQ "") THEN $
   Message, /Information, 'WARNING: There is no specified event handler for carriage return events for this widget. Events will be swallowed.'
IF self.focus AND (self.event_pro EQ "" AND self.event_func EQ "") THEN $
   Message, /Information, 'WARNING: There is no specified event handler for keyboard focus events for this widget. Events will be swallowed.'

RETURN, 1
END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField_Kill_Notify, textID

<span class="comments">; This widget call-back procedure makes sure the self object is</span>
<span class="comments">; destroyed when the widget is destroyed.</span>

Widget_Control, textID, Get_UValue=message
Obj_Destroy, message.object
END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField::CLEANUP

<span class="comments">; This method makes sure there are not pointers left on the heap.</span>

Ptr_Free, self.theValue
Ptr_Free, self.uvalue
END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>



PRO FSC_InputField__Define

   objectClass = { FSC_INPUTFIELD, $        <span class="comments">; The object class name.</span>
                   parent: 0L, $            <span class="comments">; The parent widget ID.</span>
                   tlb: 0L, $               <span class="comments">; The top-level base of the compound widget.</span>
                   labelID: 0L, $           <span class="comments">; The label widget ID.</span>
                   textID: 0L, $            <span class="comments">; The text widget ID.</span>
                   theText: "", $           <span class="comments">; The actual text in the text widget.</span>
                   theValue: Ptr_New(), $   <span class="comments">; The actual "value" of the text in the text widget. :-)</span>
                   event_func: "", $        <span class="comments">; The name of the specified event handler function.</span>
                   event_pro: "", $         <span class="comments">; The name of the specified event handler procedrue</span>
                   cr_only: 0L, $           <span class="comments">; A flag meaning send only carriage return events.</span>
                   focus: 0L, $             <span class="comments">; A flag to indicate focus events should be returned.</span>
                   tabnext: 0L, $           <span class="comments">; The identifier of a widget to receive the cursor focus if a TAB character is detected.</span>
                   uvalue: Ptr_New(), $     <span class="comments">; The user value of the compound widget.</span>
                   decimal: 0, $            <span class="comments">; The number of decimals points in FLOAT and DOUBLE numbers.</span>
                   digits: 0, $             <span class="comments">; The number of digits in INT and LONG numbers.</span>
                   positive: 0, $           <span class="comments">; A flag meaning only positive numbers allowed.</span>
                   datatype: "" , $         <span class="comments">; The type of data to be returned from the text widget.</span>
                   Name: "" $               <span class="comments">; A scalar string name for the object</span>
                  }

  END <span class="comments">;--------------------------------------------------------------------------------------------------------------</span>


FUNCTION FSC_INPUTFIELD, $          <span class="comments">; The compound widget FSC_InputField.</span>
   parent, $                        <span class="comments">; The parent widget. Required for all compound widgets.</span>
   Column=column, $                 <span class="comments">; Set this keyword to have Label above Text Widget.</span>
   CR_Only=cr_only, $               <span class="comments">; Set this keyword if you only want Carriage Return events.</span>
   Decimal=decimal, $               <span class="comments">; Set this keyword to the number of digits to the right of the decimal</span>
                                    <span class="comments">;   point in FLOATVALUE and DOUBLEVALUE numbers.</span>
   Digits=digits, $                 <span class="comments">; Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
   DoubleValue=doublevalue, $       <span class="comments">; Set this keyword if you want DOUBLE values returned.</span>
   Event_Func=event_func, $         <span class="comments">; Set this keyword to the name of an Event Function.</span>
   Event_Pro=event_pro, $           <span class="comments">; Set this keyword to the name of an Event Procedure.</span>
   _Extra=extra, $                  <span class="comments">; Passes along extra keywords to the text widget.</span>
   FieldFont=fieldfont, $           <span class="comments">; The font name for the text in the Text Widget.</span>
   FloatValue=floatvalue, $         <span class="comments">; Set this keyword for FLOAT values.</span>
   Focus_Events=focus_events, $     <span class="comments">; Set this keyword to enable event reporting when the widget loses keyboard focus.</span>
   Frame=frame, $                   <span class="comments">; Set this keyword to put a frame around the compound widget.</span>
   IntegerValue=integervalue, $     <span class="comments">; Set this keyword for INTEGER values.</span>
   LabelAlign=labelalign, $         <span class="comments">; Set this keyword to align label text.</span>
   LabelFont=labelfont, $           <span class="comments">; The font name for the text in the Label Widget.</span>
   LabelSize=labelsize, $           <span class="comments">; The X screen size of the Label Widget.</span>
   LongValue=longvalue, $           <span class="comments">; Set this keyword for LONG values.</span>
   Positive=positive, $             <span class="comments">; Set this keyword to indicate only positive numbers allowed in the field.</span>
   Name=name, $                     <span class="comments">; The name of the object.</span>
   Row=row, $                       <span class="comments">; Set this keyword to have the Label beside the Text Widget. (The default.)</span>
   Scr_XSize=scr_xsize, $           <span class="comments">; The X screen size of the text widget.</span>
   Scr_YSize=scr_ysize, $           <span class="comments">; The Y screen size of the text widget.</span>
   StringValue=stringvalue, $       <span class="comments">; Set this keyword for STRING values. (The default.)</span>
   Title=title, $                   <span class="comments">; The text to go on the Label Widget.</span>
   UValue=uvalue, $                 <span class="comments">; A user value for any purpose.</span>
   Value=value, $                   <span class="comments">; The "value" of the compound widget.</span>
   XSize=xsize                      <span class="comments">; The X size of the Text Widget.</span>

RETURN, Obj_New("FSC_INPUTFIELD", $
   parent, $                        <span class="comments">; The parent widget. Required for all compound widgets.</span>
   Column=column, $                 <span class="comments">; Set this keyword to have Label above Text Widget.</span>
   CR_Only=cr_only, $               <span class="comments">; Set this keyword if you only want Carriage Return events.</span>
   Decimal=decimal, $               <span class="comments">; Set this keyword to the number of digits to the right of the decimal</span>
                                    <span class="comments">;   point in FLOATVALUE and DOUBLEVALUE numbers.</span>
   Digits=digits, $                 <span class="comments">; Set this keyword to the number of digits permitted in INTERGERVALUE and LONGVALUE numbers.</span>
   DoubleValue=doublevalue, $       <span class="comments">; Set this keyword if you want DOUBLE values returned.</span>
   Event_Func=event_func, $         <span class="comments">; Set this keyword to the name of an Event Function.</span>
   Event_Pro=event_pro, $           <span class="comments">; Set this keyword to the name of an Event Procedure.</span>
   _Extra=extra, $                   <span class="comments">; Passes along extra keywords to the text widget.</span>
   FieldFont=fieldfont, $           <span class="comments">; The font name for the text in the Text Widget.</span>
   FloatValue=floatvalue, $         <span class="comments">; Set this keyword for FLOAT values.</span>
   Focus_Events=focus_events, $     <span class="comments">; Set this keyword to enable event reporting when the widget loses keyboard focus.</span>
   Frame=frame, $                   <span class="comments">; Set this keyword to put a frame around the compound widget.</span>
   IntegerValue=integervalue, $     <span class="comments">; Set this keyword for INTEGER values.</span>
   LabelAlign=labelalign, $         <span class="comments">; Set this keyword to align label text.</span>
   LabelFont=labelfont, $           <span class="comments">; The font name for the text in the Label Widget.</span>
   LabelSize=labelsize, $           <span class="comments">; The X screen size of the Label Widget.</span>
   LongValue=longvalue, $           <span class="comments">; Set this keyword for LONG values.</span>
   Name=name, $                     <span class="comments">; The name of the object.</span>
   Positive=positive, $             <span class="comments">; Set this keyword to indicate only positive numbers allowed in the field.</span>
   Row=row, $                       <span class="comments">; Set this keyword to have the Label beside the Text Widget. (The default.)</span>
   Scr_XSize=scr_xsize, $           <span class="comments">; The X screen size of the text widget.</span>
   Scr_YSize=scr_ysize, $           <span class="comments">; The Y screen size of the text widget.</span>
   StringValue=stringvalue, $       <span class="comments">; Set this keyword for STRING values. (The default.)</span>
   Title=title, $                   <span class="comments">; The text to go on the Label Widget.</span>
   UValue=uvalue, $                 <span class="comments">; A user value for any purpose.</span>
   Value=value, $                   <span class="comments">; The "value" of the compound widget.</span>
   XSize=xsize)                     <span class="comments">; The X size of the Text Widget.</span>
END


PRO Example_Event, event

<span class="comments">; An example event handler for FSC_Input_Field.</span>

Widget_Control, event.top, Get_UValue=info
Widget_Control, event.id, Get_UValue=thisEvent

<span class="comments">; Not interested in losing keyboard focus events.</span>
theName = Tag_Names(event, /Structure_Name)
IF theName EQ 'WIDGET_KBRD_EVENT' THEN BEGIN
   IF event.type EQ 0 THEN RETURN
ENDIF

<span class="comments">; What kind of event is this?</span>
CASE thisEvent OF
   'Field 1 Event': BEGIN
      Print, ''
      IF N_Elements(*event.value) EQ 0 THEN Print, 'Field 1 Value is Undefined' ELSE $
         Print, 'Field 1 Value: ', *event.value
      END
   'Field 2 Event': BEGIN
      Print, ''
      IF N_Elements(*event.value) EQ 0 THEN Print, 'Field 2 Value is Undefined' ELSE $
         Print, 'Field 2 Value: ', *event.value
      END
   'Field 3 Event': BEGIN
      Print, ''
      IF N_Elements(*event.value) EQ 0 THEN Print, 'Field 3 Value is Undefined' ELSE $
         Print, 'Field 3 Value: ', *event.value
      END
   'Print It': BEGIN
      theValue =info.field3->Get_Value()
      Print, ''
      Print, 'Field 3 Value: ', theValue
      END
   'Set It': BEGIN
      info.field3->Set_Value, 'Coyote Rules!'
      END
   'Quit': Widget_Control, event.top, /Destroy
   'ChangeToFloat': BEGIN
      info.field1->SetProperty, Title='Float:', Value=RandomU(seed, 1)*100, /FloatValue
      END
   'ChangeToString': BEGIN
      info.field1->SetProperty, Title='String:', Value='Coyote Jules', /StringValue
      END
   'PrintFloat': BEGIN
      IF N_Elements(info.field2->Get_Value()) EQ 0 THEN Print, 'Field 2 Value is Undefined' ELSE $
         Print, 'Field 2 Value: ', info.field2->Get_Value()
      END
   'LabelSize': BEGIN
      Widget_Control, event.top, Update=0
      info.field1->SetProperty, LabelSize=75
      info.field2->SetProperty, LabelSize=75
      info.field3->SetProperty, LabelSize=75
      Widget_Control, event.top, Update=1
      END
ENDCASE
END <span class="comments">;----------------------------------------------------------------------------</span>



PRO Example

<span class="comments">; An example program to exercise some of the features of FSC_Input_FIELD.</span>

tlb = Widget_Base(Column=1)
button = Widget_Button(tlb, Value='Change First Field to Float', $
   UValue='ChangeToFloat')
button = Widget_Button(tlb, Value='Change First Field to String', $
   UValue='ChangeToString')
field1 = FSC_INPUTFIELD(tlb, Title='Integer:', LabelSize=50, Digits=2, $
   Value=5, /IntegerValue, UValue='Field 1 Event', Event_Pro='Example_Event', /Focus_Events)
field2 = FSC_INPUTFIELD(tlb, Title='Float:', LabelSize=50, Value=45.6, /CR_Only, $
   /FloatValue, UValue='Field 2 Event', Event_Pro='Example_Event', Decimal=2, /Positive, /Focus_Events)
field3 = FSC_INPUTFIELD(tlb, Title='String:', LabelSize=50, Value='Coyote Rules!', $
   UValue='Field 3 Event', /Focus_Events, Event_Pro='Example_Event')

   <span class="comments">; Set up TABing between fields.</span>

field1->SetTabNext, field2->GetTextID()
field2->SetTabNext, field3->GetTextID()
field3->SetTabNext, field1->GetTextID()

button = Widget_Button(tlb, Value='Print Value of String', UValue="Print It")
button = Widget_Button(tlb, Value='Set Value of String', UValue='Set It')
button = Widget_Button(tlb, Value='Change Size of Labels', UValue='LabelSize')
button = Widget_Button(tlb, Value='Print Floating Value', UValue='PrintFloat')
button = Widget_Button(tlb, Value='Quit', UValue='Quit')
Widget_Control, tlb, /Realize, Set_UValue={field1:field1, field2:field2, field3:field3}
XManager, 'example', tlb, /No_Block
END
</code>
    </div>
  </body>
</html>