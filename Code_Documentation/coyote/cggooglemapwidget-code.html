<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:07 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cggooglemapwidget.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cggooglemapwidget.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgGoogleMapWidget</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   This is the driver for the cgGoogleMapWidget object, which is a compound widget</span>
<span class="comments">;   object that obtains a Google static map from Google Maps and displays it in the</span>
<span class="comments">;   program's draw widget window. It can be used either as a stand-alone program or</span>
<span class="comments">;   to create a map image in draw widget in a larger widget program.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;</span>
<span class="comments">;+</span>
<span class="comments">; This is the driver for the cgGoogleMapWidget object, which is a compound widget</span>
<span class="comments">; object that obtains a Google static map from Google Maps and displays it in the</span>
<span class="comments">; program's draw widget window. It can be used either as a stand-alone program or</span>
<span class="comments">; to create a map image in draw widget in a larger widget program.</span>
<span class="comments">;</span>
<span class="comments">; This program implements a subset of the Google Static Map API, which can be found in</span>
<span class="comments">; more detail here: https://developers.google.com/maps/documentation/staticmaps/. The </span>
<span class="comments">; program works by building a URL for a map image. A connection to the Internet is </span>
<span class="comments">; required to then request a map image (in GIF, JPEG or PNG format) to be returned from</span>
<span class="comments">; Google Maps. The returned image is then read and loaded into a draw widget window</span>
<span class="comments">; of the right size for the returned map image. The default is to delete the image file</span>
<span class="comments">; that is created, but the user can also set keywords to retain the image that is downloaded</span>
<span class="comments">; from Google Maps. Users are able to control button and motion events in the resulting</span>
<span class="comments">; draw widget with their own event handler module. A cgMap coordinate object is created</span>
<span class="comments">; to establish a map reference coordinate system on top of the returned map image, allowing</span>
<span class="comments">; other map information to be drawn on top of the returned map image.</span>
<span class="comments">;</span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics, Widgets</span>
<span class="comments">;    </span>
<span class="comments">; :Params:</span>
<span class="comments">;    parent: in, optional, type=long</span>
<span class="comments">;         The identifier of the parent widget of the draw widget that is going to be </span>
<span class="comments">;         created by the program. If not provided, the program will create its own </span>
<span class="comments">;         top-level base widget as the parent.</span>
<span class="comments">;       </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     box_axes: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set this keyword to draw box axes around the Google Map.</span>
<span class="comments">;     button_events: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set this keyword to turn button events on for the draw widget in the program.</span>
<span class="comments">;     center_latitude: in, optional, type=float, default=40.60</span>
<span class="comments">;         The center latitude of the requested Google map. If not provided, the latitude of</span>
<span class="comments">;         Fort Collins, Colorado, home of Coyote. Latitudes are only recognized to four</span>
<span class="comments">;         decimals values of precision.</span>
<span class="comments">;     center_longitude: in, optional, type=float, default=-105.10</span>
<span class="comments">;         The center longitude of the requested Google map. If not provided, the longitude of</span>
<span class="comments">;         Fort Collins, Colorado, home of Coyote. Longitude are only recognized to four</span>
<span class="comments">;         decimals values of precision.</span>
<span class="comments">;     event_method: in, optional, type='string'</span>
<span class="comments">;         The name of the event handler method for the draw widget. If you use this keyword,</span>
<span class="comments">;         you will also need to write this event handler module. It gets sent one positional</span>
<span class="comments">;         parameter, the event structure created by the draw widget.</span>
<span class="comments">;     event_pro: in, optional, type='string'</span>
<span class="comments">;         The name of an external event handler procedure for the draw widget. The event handler</span>
<span class="comments">;         procedure gets sent one positional parameter, the event structure created by the draw widget.</span>
<span class="comments">;     imagetype: in, optional, type=string, default='png32'</span>
<span class="comments">;         The type of image format the Google map should be returned in. The default is</span>
<span class="comments">;         a 32-bit full color PNG file. The image types are given in the Google Static Map</span>
<span class="comments">;         API documentation and are as follows: png or png8, png32, gif, jpg, and jpg-baseline.</span>
<span class="comments">;     keep_image: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set this keyword if you wish to save the Google map as an image when the object</span>
<span class="comments">;         is destroyed.</span>
<span class="comments">;     maptype: in, optional, type=string, default='terrain'</span>
<span class="comments">;         Set this keyword to the type of map you wish to retrieve from Google Maps. The</span>
<span class="comments">;         choices are listed in the Google Static Map API documentation and are: "roadmap",</span>
<span class="comments">;         "terrain", "satellite", and "hybrid".</span>
<span class="comments">;     markers: in, optional, type=structure</span>
<span class="comments">;         A scalar or array of cgGoogleMapMarker structures. If present, the markers will</span>
<span class="comments">;         be requested with the map from Google. The cgGoogleMapMarker structure is defined</span>
<span class="comments">;         like this::</span>
<span class="comments">;            struct = { cgGOOGLEMAPMARKER, $</span>
<span class="comments">;               size: "", $         ; The marker size ("tiny", "small", "mid" or "normal")</span>
<span class="comments">;               color: "", $        ; A color name as provided by cgColor.</span>
<span class="comments">;               label: "", $        ; A single uppercase character label from the set {A-Z,0-9}.</span>
<span class="comments">;               lats: Ptr_New(), $  ; A pointer to one or more latitude values.</span>
<span class="comments">;               lons: Ptr_New() }   ; A pointer to one or more longitude values.</span>
<span class="comments">;         Note that the user will be responsible for freeing the pointers in the MARKERS</span>
<span class="comments">;         structure. This program will not do that.</span>
<span class="comments">;     motion_events: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set this keyword to turn motion events on for the draw widget in the program.</span>
<span class="comments">;     tempDir: in, optional, type=string</span>
<span class="comments">;         The directory where the image containing the Google map is written. By default,</span>
<span class="comments">;         it is obtained from the environment like this: tempdir = GetEnv('IDL_TMPDIR').</span>
<span class="comments">;     visiblemarkers: in, optional, type=boolean, default=1</span>
<span class="comments">;         Set this keyword to 0 to temporarily turn off the display of the markers. Normally,</span>
<span class="comments">;         markers are drawn (if present), unless this flag is set to 0.</span>
<span class="comments">;     xsize: in, optional, type=int, default=600</span>
<span class="comments">;         The X size of the program's draw widget. A maximum of 690 if box axes are requested</span>
<span class="comments">;         and a maximum of 640 if no box axes are requested. Box axes require a 25 pixel border</span>
<span class="comments">;         and the maximum size of a Google Map is 640 pixels.</span>
<span class="comments">;     ysize: in, optional, type=int, default=600</span>
<span class="comments">;         The Y size of the program's draw widget. A maximum of 690 if box axes are requested</span>
<span class="comments">;         and a maximum of 640 if no box axes are requested. Box axes require a 25 pixel border</span>
<span class="comments">;         and the maximum size of a Google Map is 640 pixels.</span>
<span class="comments">;     zoomlevel: in, optional, type=integer, default=12</span>
<span class="comments">;         The zoom level of the requested Google map. Should be an integer between 0 and 21.</span>
<span class="comments">;</span>
<span class="comments">; :Returns:</span>
<span class="comments">;    The return value is an instance of a cgGoogleMapWidget object.</span>
<span class="comments">;    </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    Used to put two markers on a map of Fort Collins, Colorado, in a stand-alone window::</span>
<span class="comments">;        PRO cgGoogleMapWidget_Test</span>
<span class="comments">;            marker1 = {cgGOOGLEMAPMARKER, 'normal', 'dodger blue', 'A', Ptr_New(40.600), Ptr_New(-105.100)}</span>
<span class="comments">;            marker2 = {cgGOOGLEMAPMARKER, 'normal', 'purple',      'B', Ptr_New(40.605), Ptr_New(-105.105)}</span>
<span class="comments">;            googleObject = cgGoogleMapWidget(MARKERS=[marker1, marker2], MAPTYPE='Terrain')</span>
<span class="comments">;        END</span>
<span class="comments">;       </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written, 25 June 2012. DWF.</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;-</span>
FUNCTION cgGoogleMapWidget, parent, $
    BOX_AXES=box_axes, $
    BUTTON_EVENTS=button_events, $
    CENTER_LATITUDE=centerLat, $
    CENTER_LONGITUDE=centerLon, $
    IMAGETYPE=imageType, $
    KEEP_IMAGE=keep_image, $
    EVENT_METHOD=event_method, $
    EVENT_PRO=event_pro, $
    MAPTYPE=maptype, $
    MARKERS=markers, $
    MOTION_EVENTS=motion_events, $
    TEMPDIR=tempdir, $
    VISIBLEMARKERS=visibleMarkers, $
    XSIZE=xsize, $
    YSIZE=ysize, $
    ZOOMLEVEL=zoomlevel
    
    mapObject = Obj_New('cgGoogleMapWidget', parent, $
        BOX_AXES=box_axes, $
        BUTTON_EVENTS=button_events, $
        CENTER_LATITUDE=centerLat, $
        CENTER_LONGITUDE=centerLon, $
        IMAGETYPE=imageType, $
        KEEP_IMAGE=keep_image, $
        EVENT_METHOD=event_method, $
        EVENT_PRO=event_pro, $
        MAPTYPE=maptype, $
        MARKERS=markers, $
        MOTION_EVENTS=motion_events, $
        TEMPDIR=tempdir, $
        VISIBLEMARKERS=visibleMarkers, $
        XSIZE=xsize, $
        YSIZE=ysize, $
        ZOOMLEVEL=zoomlevel)
            
    IF Obj_Valid(mapObject) THEN RETURN, mapObject ELSE RETURN, Obj_New()
    
END
</code>
    </div>
  </body>
</html>