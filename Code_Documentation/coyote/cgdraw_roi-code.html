<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:05 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgdraw_roi.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgdraw_roi.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgDraw_ROI</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   This procedure draws a region or group of regions, defined by the IDLanROI or</span>
<span class="comments">;   IDLanROIGroup objects, on a direct graphics device. The type of ROI drawn is</span>
<span class="comments">;   based on the TYPE property of a given IDLanROI object. These can be points,</span>
<span class="comments">;   polylines, or filled polygons.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2012, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;</span>
<span class="comments">;+</span>
<span class="comments">; This procedure draws a region or group of regions, defined by the IDLanROI or</span>
<span class="comments">; IDLanROIGroup objects, on a direct graphics device. The type of ROI drawn is</span>
<span class="comments">; based on the TYPE property of a given IDLanROI object. These can be points,</span>
<span class="comments">; polylines, or filled polygons. This procedure is a Coyote Graphics wrapper for</span>
<span class="comments">; the built-in IDL procedure DRAW_ROI.</span>
<span class="comments">;</span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Graphics</span>
<span class="comments">;    </span>
<span class="comments">; :Params:</span>
<span class="comments">;     roi: in, required, type=object</span>
<span class="comments">;         The input ROI object. Must be either an IDLanROI object or an IDLanROIGroup</span>
<span class="comments">;         object (if you wish to draw multiple ROIs at the same time).       </span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     addcmd: in, optional, type=boolean, default=0</span>
<span class="comments">;        Set this keyword to add the command to an cgWindow. Setting this keyword</span>
<span class="comments">;        automatically sets the WINDOW keyword, but the command does not erase the</span>
<span class="comments">;        graphics window as it would normally.</span>
<span class="comments">;     color: in, optional, type=string, default='opposite'</span>
<span class="comments">;         The name of the polygon color. Color names are those used with cgColor. </span>
<span class="comments">;         This value can also be a long integer or a byte or short integer index </span>
<span class="comments">;         into the current color table.</span>
<span class="comments">;     device: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set to indicate the polygon vertices are in device coordinates, rather than data coordinates.</span>
<span class="comments">;     linestyle: in, optional, type=integer, default=0</span>
<span class="comments">;         Set this keyword to the normal linestyle graphics keyword values. The default is a solid line.</span>
<span class="comments">;     normal: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set to indicate the polygon vertices are in normalized coordinates, rather than data coordinates.</span>
<span class="comments">;     psym: in, optional, type=integer</span>
<span class="comments">;        Any normal IDL PSYM values, plus any value supported by the Coyote Library</span>
<span class="comments">;        routine cgSYMCAT. An integer between 0 and 46. May also be specified as a</span>
<span class="comments">;        symbol names. See `cgSymCat` for details.</span>
<span class="comments">;     symsize: in, optional, type=float/vector, default=1.0</span>
<span class="comments">;        A scalar or vector of symbol sizes. Default is 1.0. May be a vector of the same </span>
<span class="comments">;        length as X.</span>
<span class="comments">;     t3d: in, optional, type=boolean, default=0</span>
<span class="comments">;        Set this keyword to use the 3D coordinate system established by !P.T.</span>
<span class="comments">;     thick: in, optional, type=float, default=1.0</span>
<span class="comments">;     window: in, optional, type=boolean, default=0</span>
<span class="comments">;         Set this keyword to add the command to the current cgWindow application.</span>
<span class="comments">;     _ref_extra: in, optional</span>
<span class="comments">;         Any `DRAW_ROI &lt;http://www.exelisvis.com/docs/DRAW_ROI_Procedure.html>` keyword </span>
<span class="comments">;         not defined here may be used</span>
<span class="comments">;     </span>
<span class="comments">;          </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    Download `cgDraw_ROI_Example &lt;http://www.idlcoyote.com/tip_examples/cgdraw_roi_example.pro>'</span>
<span class="comments">;    for an example program illustrating how cgDraw_ROI can be used.</span>
<span class="comments">;       </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written, 11 November 2012. David W. Fanning.</span>
<span class="comments">;</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2012, Fanning Software Consulting, Inc.</span>
<span class="comments">;-</span>
PRO cgDraw_ROI, roi, $
    ADDCMD=addcmd, $
    COLOR=color, $
    DEVICE=device, $
    LINESTYLE=linestyle, $
    NORMAL=normal, $
    PSYM=psym, $
    SYMSIZE=symsize, $
    T3D=t3d, $
    THICK=thick, $
    WINDOW=window, $
     _REF_EXTRA=extra

    Compile_Opt idl2

    Catch, theError
    IF theError NE 0 THEN BEGIN
        Catch, /CANCEL
        void = Error_Message()
        IF N_Elements(currentState) NE 0 THEN SetDecomposedState, currentState
        RETURN
    ENDIF

    <span class="comments">; Did user pass a parameter?</span>
    IF (N_Params() EQ 0) THEN BEGIN
        Print, 'USE SYNTAX: cgDraw_ROI, thisROI
        RETURN
    ENDIF
    
    <span class="comments">; Do they want this plot in a resizeable graphics window?</span>
    IF Keyword_Set(addcmd) THEN window = 1
    IF Keyword_Set(window) AND ((!D.Flags AND 256) NE 0) THEN BEGIN
    
        currentWindow = cgQuery(/CURRENT, COUNT=wincnt)
        IF wincnt EQ 0 THEN replaceCmd = 0 ELSE replaceCmd=1
        
        <span class="comments">; If adding a command, have to do this differently.</span>
        IF Keyword_Set(addcmd) THEN BEGIN
           cgWindow, 'cgDraw_ROI', roi, $
              COLOR=color, $
              DEVICE=device, $
              LINESTYLE=linestyle, $
              NORMAL=normal, $
              PSYM=psym, $
              SYMSIZE=symsize, $
              T3D=t3d, $
              THICK=thick, $
              ADDCMD=1, $
              _EXTRA=extra
                
            RETURN
            
        ENDIF ELSE BEGIN
        
           <span class="comments">; Otherwise, we are just replacing the commands in a new or existing window.</span>
           cgWindow, 'cgDraw_ROI', roi, $
              COLOR=color, $
              DEVICE=device, $
              LINESTYLE=linestyle, $
              NORMAL=normal, $
              PSYM=psym, $
              SYMSIZE=symsize, $
              T3D=t3d, $
              THICK=thick, $
              REPLACECMD=replaceCmd, $
              _Extra=extra
            
           RETURN
         
         ENDELSE
    ENDIF
    
  <span class="comments">; Set up PostScript device for working with colors.</span>
    IF !D.Name EQ 'PS' THEN Device, COLOR=1, BITS_PER_PIXEL=8
    
    <span class="comments">; Do this in decomposed color, if possible.</span>
    SetDecomposedState, 1, CURRENTSTATE=currentState
    
    <span class="comments">; Need a color?</span>
    thisColor = cgDefaultColor(color, DEFAULT='opposite')
    
    <span class="comments">; Get the current color vectors.</span>
    TVLCT, rr, gg, bb, /Get
    
    <span class="comments">; Do you need a window?</span>
    IF ((!D.Flags AND 256) NE 0) && (!D.Window LT 0) THEN cgDisplay
    
    <span class="comments">; Is the color a string? </span>
    IF Size(thisColor, /TNAME) EQ 'STRING' THEN thisColor = cgColor(thisColor)
    IF N_Elements(psym) EQ 0 THEN psym = 0
        
    <span class="comments">; Draw the ROI</span>
    Draw_ROI, roi, $
      COLOR=thisColor, $
      DEVICE=device, $
      LINESTYLE=linestyle, $
      NORMAL=normal, $
      PSYM=cgSymCat(psym), $
      SYMSIZE=symsize, $
      T3D=t3d, $
      THICK=thick, $
      _Extra=extra
    
    <span class="comments">; Clean up.</span>
    SetDecomposedState, currentState
    IF !D.Name NE 'Z' THEN TVLCT, rr, gg, bb
   
END
</code>
    </div>
  </body>
</html>