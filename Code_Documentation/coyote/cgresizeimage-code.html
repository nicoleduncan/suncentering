<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:27 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgresizeimage.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgresizeimage.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>
<span class="comments">;</span>
<span class="comments">; NAME:</span>
<span class="comments">;   cgResizeImage</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;   Provides a CONGRID like resizing of images, although it performs this service</span>
<span class="comments">;   correctly for both 2D and 3D images. Pixel locations do not change in the output</span>
<span class="comments">;   image, since the center of the pixel is used for interpolation purposes, rather than</span>
<span class="comments">;   the lower-left corner of the pixel. Unlike CONGRID, 3D images can use nearest neighbor</span>
<span class="comments">;   interpolation as well as bilinear interpolation.</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Copyright (c) 2010, by Fanning Software Consulting, Inc. All rights reserved.           ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;</span>
<span class="comments">;+</span>
<span class="comments">; :Description:</span>
<span class="comments">;   Provides a CONGRID like resizing of images, although it performs this service</span>
<span class="comments">;   correctly for both 2D and 3D images. Pixel locations do not change in the output</span>
<span class="comments">;   image, since the center of the pixel is used for interpolation purposes, rather than</span>
<span class="comments">;   the lower-left corner of the pixel. Unlike CONGRID, 3D images can use nearest neighbor</span>
<span class="comments">;   interpolation as well as bilinear interpolation.</span>
<span class="comments">;</span>
<span class="comments">; :Categories:</span>
<span class="comments">;    Utilities</span>
<span class="comments">;    </span>
<span class="comments">; :Params:</span>
<span class="comments">;    image: in, required, type=any</span>
<span class="comments">;         The image variable to resize. Must be a 2D or 3D image. If a 3D image,</span>
<span class="comments">;         one of the image dimensions must be a 3.</span>
<span class="comments">;         </span>
<span class="comments">;    cols: in, required, type=integer</span>
<span class="comments">;          The number of columns (i.e., XSIZE) in the output image.</span>
<span class="comments">;          </span>
<span class="comments">;    rows: in, required, type=integer</span>
<span class="comments">;          The number of rows (i.e., YSIZE) in the output image.</span>
<span class="comments">;                 </span>
<span class="comments">; :Keywords:</span>
<span class="comments">;     interpolate: in, optional, type=boolean, default=0</span>
<span class="comments">;         Is set, bilinear interpolation is used to resize the image. Otherwise,</span>
<span class="comments">;         nearest neighbor sampling is used instead.</span>
<span class="comments">;      minus_one: in, optional, type=boolean, default=0</span>
<span class="comments">;          Identical to CONGRID MINUS_ONE keyword. </span>
<span class="comments">;          </span>
<span class="comments">; :Examples:</span>
<span class="comments">;    Used in a similar fashion to the Congrid command, but for images::</span>
<span class="comments">;       IDL> bigEarth = FSC_Resize_Image(cgDemoData(7), 720, 720)</span>
<span class="comments">;       IDL> bigRose  = FSC_Resize_Image(cgDemoData(16), 681, 447)</span>
<span class="comments">;       </span>
<span class="comments">; :Author:</span>
<span class="comments">;    FANNING SOFTWARE CONSULTING::</span>
<span class="comments">;       David W. Fanning </span>
<span class="comments">;       1645 Sheely Drive</span>
<span class="comments">;       Fort Collins, CO 80526 USA</span>
<span class="comments">;       Phone: 970-221-0438</span>
<span class="comments">;       E-mail: david@idlcoyote.com</span>
<span class="comments">;       Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
<span class="comments">;</span>
<span class="comments">; :History:</span>
<span class="comments">;     Change History::</span>
<span class="comments">;        Written, 20 November 2010. DWF.</span>
<span class="comments">;     I have been convinced (conversations with Wayne Landsman) that if the </span>
<span class="comments">;         CENTER keyword is set, the MINUS_ONE keyword is not needed, since </span>
<span class="comments">;         it was created to solve the same problem. So, I have changed the </span>
<span class="comments">;         default setting of MINUS_ONE to 0. 11 Jan 2011. DWF.</span>
<span class="comments">;     Eenamed cgResizeImage from FSC_Resize_Image. 20 Oct 2012. DWF.</span>
<span class="comments">;         </span>
<span class="comments">; :Copyright:</span>
<span class="comments">;     Copyright (c) 2010, Fanning Software Consulting, Inc.</span>
<span class="comments">;-</span>
FUNCTION cgResizeImage, image, cols, rows, $
    INTERPOLATE=interp, $
    MINUS_ONE=minus_one

    Compile_Opt idl2
    
     <span class="comments">; Check parameters.</span>
    IF N_Params() EQ 0 THEN BEGIN
        Print, 'USE SYNTAX: FSC_Resize_Image, image, cols, rows'
        RETURN, "FSC_Resize_Image Syntax Error"
    ENDIF
 
    <span class="comments">; Return to the caller on an error.</span>
    On_Error, 2   
    
    <span class="comments">; Check image parameter for size. Only 2D and 3D images allowed.</span>
    ndim = SIZE(image, /N_DIMENSIONS)
    dims = SIZE(image, /DIMENSIONS)
    IF ((ndim LT 2) OR (ndim GT 3)) THEN $
      Message, 'Input image must have two or three dimensions.'
    
    <span class="comments">; Check for keywords. Default for minus_one is 0.</span>
    interp = Keyword_Set(interp)
    IF N_Elements(minus_one) EQ 0 THEN minus_one = 0
    m1 = Keyword_Set(minus_one)

    <span class="comments">; 2D images are immediately passed to IDL's Congrid command, with </span>
    <span class="comments">; the CENTER keyword set.</span>
    IF ndim EQ 2 THEN BEGIN
        RETURN, Congrid(image, cols, rows, CENTER=1, MINUS_ONE=minus_one, $
                     INTERP=interp)
    ENDIF
    
    <span class="comments">; 24-bit images are handled differently. The "3" dimension of a 24-bit</span>
    <span class="comments">; image should not be interpolated.</span>
    offset = 0.5 <span class="comments">; To center the pixel location (i.e., CENTER=1 for Congrid)</span>
    index3 = Where(dims EQ 3)
    CASE index3 OF
    
        0: BEGIN
           srx = [0,1,2]
           sry = Float(dims[1] - m1) / (cols - m1) *(Findgen(cols) + offset) - offset
           srz = Float(dims[2] - m1) / (rows - m1) *(Findgen(rows) + offset) - offset
           END
           
        1: BEGIN
           srx = Float(dims[0] - m1) / (cols - m1) *(Findgen(cols) + offset) - offset
           sry = [0,1,2]
           srz = Float(dims[2] - m1) / (rows - m1) *(Findgen(rows) + offset) - offset
           END
           
        2: BEGIN
           srx = Float(dims[0] - m1) / (cols - m1) *(Findgen(cols) + offset) - offset
           sry = Float(dims[1] - m1) / (rows - m1) *(Findgen(rows) + offset) - offset
           srz = [0,1,2]
           END
           
    ENDCASE
    
    <span class="comments">; Do the interpolation. Preserve nearest neighbor sampling, if required.</span>
    IF interp THEN BEGIN
          RETURN, Interpolate(image, srx, sry, srz, /GRID)
    ENDIF ELSE BEGIN
          RETURN, Interpolate(image, Round(srx), Round(sry), Round(srz), /GRID)
    ENDELSE
    
END <span class="comments">;--------------------------------------------------------------------------</span>
</code>
    </div>
  </body>
</html>