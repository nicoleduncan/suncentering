<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:56:24 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>cgotsu_threshold.pro (Documentation for ./)</title>

    

    <script type="text/javascript" src="../idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="../idldoc-resources/js/copybutton.js"></script>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="cgotsu_threshold.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">

    <div class="header">
      <h1>Documentation for ./</h1>
      <h2>Generated by IDLdoc</h2>
    </div>
    
    
    <table class="navbar smaller" summary="Navigation header" cellspacing="0">
      <tr>
        <td >
          <a href="../overview.html">Overview</a>
        </td>
    
        <td >
          Directory
        </td>
    
        <td class="selected">File</td>
    
        
        <td >
          <a href="cgotsu_threshold-code.html" title="Chromocoded source">Source</a> <a href="cgotsu_threshold.pro" title=".pro file"><img src="../idldoc-resources/attach.png" alt="[attach.png]" align="top"/></a>
        </td>
        
    
        <td >Etc</td>
    
        <td >
        	<a href="../categories.html">Categories</a>
        </td>
    
        <td >
        	<a href="../search.html">Search</a>
        </td>
    
        
        <td >
          <a href="../idldoc-index.html">Index</a>
        </td>
        
    
        
    
        <td >
          <a href="../idldoc-help.html">Help</a>
        </td>
    
        <td class="flexible">
          User documentation
        </td>
      </tr>
    </table>
    
    
    
    <p class="localnavbar smallest"><a href="" target="_top">single page</a> | <a href="../index.html" target="_top">use frames</a> &nbsp;&nbsp;&nbsp; summary &nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp; fields &nbsp;&nbsp;&nbsp; <a href="#routine-details">routine details</a> &nbsp;&nbsp;&nbsp; <a href="#attributes">file attributes</a></p>
    
    
    
    
    
    
    
    
    

    <div class="content">
      <h2 class="directory">coyote/</h2>
      <h1 class="basename">cgotsu_threshold.pro<span class="file-attributes"></span></h1>
      

      
      
      
      <br/>

      

      

      

      

      

      


      
      <div id="routine-details">
        

        
        <div class="routine-details details" id="cgOTSU_THRESHOLD">
          <h2 class="routine-name"><a href="#root" class="top">top</a> <a href="cgotsu_threshold-code.html#cgOTSU_THRESHOLD:source" class="top">source</a> cgOTSU_THRESHOLD<span class="routine-attributes"></span></h2>

          
          <p class="small categories">Utility</p>
          

          <p class="syntax"><code><span class="var">result</span> = cgOTSU_THRESHOLD(<span class="argument"><a href="#cgOTSU_THRESHOLD:p:data">data</a></span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:BINSIZE">BINSIZE</a>=<span class="var">BINSIZE</span>]</span><span class="argument"> [, /<a href="#cgOTSU_THRESHOLD:k:EXAMPLE">EXAMPLE</a>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:HISTDATA">HISTDATA</a>=<span class="var">HISTDATA</span>]</span><span class="argument"> [, /<a href="#cgOTSU_THRESHOLD:k:L64">L64</a>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:LOCATIONS">LOCATIONS</a>=<span class="var">LOCATIONS</span>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:MAX">MAX</a>=<span class="var">MAX</span>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:MIN">MIN</a>=<span class="var">MIN</span>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:MISSING">MISSING</a>=<span class="var">MISSING</span>]</span><span class="argument"> [, /<a href="#cgOTSU_THRESHOLD:k:NAN">NAN</a>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:NBINS">NBINS</a>=<span class="var">integer</span>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:OMAX">OMAX</a>=<span class="var">OMAX</span>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:OMIN">OMIN</a>=<span class="var">OMIN</span>]</span><span class="argument"> [, /<a href="#cgOTSU_THRESHOLD:k:PLOTIT">PLOTIT</a>]</span><span class="argument"> [, <a href="#cgOTSU_THRESHOLD:k:REVERSE_INDICES">REVERSE_INDICES</a>=<span class="var">REVERSE_INDICES</span>]</span>)</code></p>

          
          <div class="small "><p> The purpose of this function is to find an optimal threshold for separating
 a bimodal distribution of pixels in an image histogram. The algorithm used is the
 "faster approach" algorithm explained
 <a href="http://www.labbookpages.co.uk/software/imgProc/otsuThreshold.html">on this web page</a>.
</p>

<p> <img src="cgotsu_threshold.png"/>
</p>

<p></p>

</div>
          

          
          <h3>Return value</h3>
            <div class="small"><p>     The optimal threshold that separates two populations of pixels is returned.
</p>

<p></p>

</div>
          

          
          <h3>Parameters</h3>
            <dl>
              
              <dt id="cgOTSU_THRESHOLD:p:data">data <span class="smaller">in required </span></dt>
              <dd class="small"><p>       The data from which the histogram is created.
</p>

<p></p>

</dd>
              
            </dl>
          

          
          <h3>Keywords</h3>
            <dl>
              
              <dt id="cgOTSU_THRESHOLD:k:BINSIZE">BINSIZE <span class="smaller">in optional </span></dt>
              <dd class="small"><p>       The binsize of the histogram. By default, Scott's Choice of bin size for histograms is used:
<div><div><code class="listing"><span class="code-output">   binsize = (3.5 * StdDev(data)) / N_Elements(data)^(0.3333)</span>
</code></div></div>       unless the data is byte type. Then a BINSIZE of 1 is used by default
</p>

<p>       If BINSIZE in not defined, and NBINS is defined, the BINSIZE is calcuated as:
<div><div><code class="listing"><span class="code-output">    binsize = (Max(dataToHistogram) - Min(dataToHistogram)) / (NBINS -1)</span>
</code></div></div>       While it is pointed out in the HISTOGRAM documentation, it is extremely
       important that the BINSIZE be of the same data type as the data you are going to
       calculate the histogram of. If it is not VERY strange things can happen. I've
       tried to protect you from most of the bad things, but I don't have a high confidence
       level that I have done it for every situation. If you see something that "just don't
       look right", I would check first to see if your data types match. That might solve
       all your problems.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:EXAMPLE">EXAMPLE <span class="smaller">in optional type=boolean default=0</span></dt>
              <dd class="small"><p>       Set this keyword if you wish to use the example data from the
       <a href="http://www.labbookpages.co.uk/software/imgProc/otsuThreshold.html">reference documentation</a>.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:HISTDATA">HISTDATA <span class="smaller">out optional </span></dt>
              <dd class="small"><p>       The output value of the internal HISTOGRAM command.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:L64">L64 <span class="smaller">in optional type=boolean default=0</span></dt>
              <dd class="small"><p>       If set, the return value of HISTOGRAM are 64-bit integers, rather than
       the default 32-bit integers. Set by default for data types greater than or
       equal to 12.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:LOCATIONS">LOCATIONS <span class="smaller">out optional </span></dt>
              <dd class="small"><p>       Starting locations of each bin. (See the HISTOGRAM documentation for details.)
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:MAX">MAX <span class="smaller">in optional </span></dt>
              <dd class="small"><p>       The maximum value to use in calculating input histogram. Equivalent to the MAX keyword
       in the HISTOGRAM documentation.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:MIN">MIN <span class="smaller">in optional </span></dt>
              <dd class="small"><p>       The minimum value to use in calculating input histogram. Equivalent to the MIN keyword
       in the HISTOGRAM documentation.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:MISSING">MISSING <span class="smaller">in optional </span></dt>
              <dd class="small"><p>       The value that should be represented as "missing" and not used in the histogram.
       Be aware that if the input data is not of type "float" or "double" that the input
       data will be converted to floating point prior to calculating the histogram.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:NAN">NAN <span class="smaller">in optional type=boolean default=0</span></dt>
              <dd class="small"><p>       If set, ignore NAN values in calculating and plotting histogram.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:NBINS">NBINS <span class="smaller">in optional type=integer </span></dt>
              <dd class="small"><p>       The number of output bins in the histogram. Meaning is slightly different from
       meaning in the HISTOGRAM command. Used only to calculate BINSIZE when BINSIZE is
       not specified. In this case, binsize = rangeofData/(nbins-1).
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:OMAX">OMAX <span class="smaller">out optional </span></dt>
              <dd class="small"><p>       The maximum output value used to construct the histogram. (See HISTOGRAM documentation.)
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:OMIN">OMIN <span class="smaller">out optional </span></dt>
              <dd class="small"><p>       The minimum output value used to construct the histogram. (See HISTOGRAM documentation.)
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:PLOTIT">PLOTIT <span class="smaller">in optional type=boolean default=0</span></dt>
              <dd class="small"><p>       If this keyword is set, a histogram of the data is plotted along with a plot of the
       between class variance to show the selected threshold.
</p>

</dd>
              
              <dt id="cgOTSU_THRESHOLD:k:REVERSE_INDICES">REVERSE_INDICES <span class="smaller">out optional </span></dt>
              <dd class="small"><p>       The list of reverse indices returned from the HISTOGRAM command. (See HISTOGRAM documentation.)
</p>

<p></p>

</dd>
              
            </dl>
          

          
          <h3>Examples</h3>
          <div><p>    Set the <a href="../coyote/cgotsu_threshold.html#cgOTSU_THRESHOLD:k:EXAMPLE"><code>Example</code></a> keyword to use the data from the reference page.
</p>

<p></p>

</div>
          

          
          <h3>Author information</h3>

            <dl class="attribute small" summary="Routine author information">
              
                <dt>Author:</dt>
                <dd><p>    FANNING SOFTWARE CONSULTING:
<div><div><code class="listing"><span class="code-output">  David W. Fanning</span>
<span class="code-output">  1645 Sheely Drive</span>
<span class="code-output">  Fort Collins, CO 80526 USA</span>
<span class="code-output">  Phone: 970-221-0438</span>
<span class="code-output">  E-mail: david@idlcoyote.com</span>
<span class="code-output">  Coyote's Guide to IDL Programming: http://www.idlcoyote.com</span>
</code></div></div></p>

</dd>
              

              
                <dt>Copyright:</dt>
                <dd><p>     Copyright (c) 2012, Fanning Software Consulting, Inc.
</p>

</dd>
              

              
                <dt>History:</dt>
                <dd><p>    Change History:
<div><div><code class="listing"><span class="code-output">  Written by:  David W. Fanning, 13 November 2012, from a program named OTSU_THRESHOLD by Carl Salvaggio and</span>
<span class="code-output">      modified by Gianguido Cianci.</span>
<span class="code-output">  The OTSU_THRESHOLD algorithm used previously made many assumptions about the data. The algorithm used here</span>
<span class="code-output">      has been completely rewritten to comply with the values in the reference page and to avoid making</span>
<span class="code-output">      assumptions about the data used to create the histogram. 21 November 2012. DWF.</span>
<span class="code-output">  Modified to set L64 keyword if data type GE 14 (suggested by user). 22 November 2012. DWF.</span>
<span class="code-output">  Modified the threshold value to use DIndGen instead of IndGen, which was causing incorrect</span>
<span class="code-output">      results with integer data. 24 November 2012. DWF.</span>
</code></div></div></p>

</dd>
              

              
            </dl>
          

          

          

        </div>
        

      </div>
      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Sat Nov 24 17:58:02 2012</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>348</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.5.1 on Mon Sep 30 16:56:24 2013</td>
          <td class="right"><a target="_top" href="http://idldoc.idldev.com">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>