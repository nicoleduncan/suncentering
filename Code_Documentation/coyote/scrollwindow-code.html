<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:11 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>scrollwindow.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="scrollwindow.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;  SCROLLWINDOW</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;</span>
<span class="comments">;  This procedure is more or less a drop-in replacement for the WINDOW</span>
<span class="comments">;  command. The main difference is that if the requested window size </span>
<span class="comments">;  is larger then the current display size, the window is created in a </span>
<span class="comments">;  base widget with scroll bars so the user can scroll around</span>
<span class="comments">;  the larger window. Use the WID keyword to pass in the window</span>
<span class="comments">;  index number of the window you want to create (a small change</span>
<span class="comments">;  from the WINDOW syntax). If the program can create a window with</span>
<span class="comments">;  this window index number, it will. Otherwise, this keyword will</span>
<span class="comments">;  return the window index number of the window that was actually</span>
<span class="comments">;  created.</span>

<span class="comments">;  I use ScrollWindow to create windows that I can view both on </span>
<span class="comments">;  my large monitor at work and on my smaller laptop monitor when </span>
<span class="comments">;  I travel.</span>
<span class="comments">;</span>
<span class="comments">; AUTHOR:</span>
<span class="comments">;</span>
<span class="comments">;   FANNING SOFTWARE CONSULTING</span>
<span class="comments">;   David Fanning, Ph.D.</span>
<span class="comments">;   1645 Sheely Drive</span>
<span class="comments">;   Fort Collins, CO 80526 USA</span>
<span class="comments">;   Phone: 970-221-0438</span>
<span class="comments">;   E-mail: david@idlcoyote.com</span>
<span class="comments">;   Coyote's Guide to IDL Programming: http://www.idlcoyote.com/</span>
<span class="comments">;</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;</span>
<span class="comments">;  Graphics</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;</span>
<span class="comments">;  ScrollWindow, xsize, ysize</span>
<span class="comments">;</span>
<span class="comments">; ARGUMENTS:</span>
<span class="comments">;</span>
<span class="comments">;  xsize:       The x size of the graphics window. By default, 640.</span>
<span class="comments">;</span>
<span class="comments">;  ysize:       The y size of the graphics window. By default, 512.</span>
<span class="comments">;</span>
<span class="comments">; KEYWORD PARAMETERS:</span>
<span class="comments">;</span>
<span class="comments">;  FREE:        Get a window with a free or unused window index number.</span>
<span class="comments">;               This is *always* done with a scrollable window. The window</span>
<span class="comments">;               index number of the window is returned in the WID keyword.</span>
<span class="comments">;</span>
<span class="comments">;  PIXMAP:      Set to create a pixmap window. In this case, no scrollable</span>
<span class="comments">;               window is possible. A normal IDL graphics window is</span>
<span class="comments">;               always created.</span>
<span class="comments">;</span>
<span class="comments">;  SIZEFRAC:    Make the window this fraction of the screen dimensions.</span>
<span class="comments">;               A number between 0.0 and 1.0</span>
<span class="comments">;  </span>
<span class="comments">;  TITLE:       The title string that is displayed on the window.</span>
<span class="comments">;</span>
<span class="comments">;  WID:         The window index number. If supplied as an IDL variable,</span>
<span class="comments">;               this can be both an input and an output keyword. If a</span>
<span class="comments">;               window with this window index number can be created, it</span>
<span class="comments">;               is. Otherwise, this varible upon exit from the program</span>
<span class="comments">;               contains the window index number of the graphics window</span>
<span class="comments">;               that was created.</span>
<span class="comments">;</span>
<span class="comments">;  XPOS:        The x offset of the upper-left corner of the window.</span>
<span class="comments">;</span>
<span class="comments">;  XSIZE:       The same as the xsize argument. Provided so ScrollWindow</span>
<span class="comments">;               can be a drop-in replacement for the Window command.</span>
<span class="comments">;</span>
<span class="comments">;  YPOS:        The y offset of the upper-left corner of the window.</span>
<span class="comments">;</span>
<span class="comments">;  YSIZE:       The same as the ysize argument. Provided so ScrollWindow</span>
<span class="comments">;               can be a drop-in replacement for the Window command.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;</span>
<span class="comments">;  ScrollWindow, XSIZE=800, YSIZE=400   ; Produces normal IDL graphics window.</span>
<span class="comments">;  ScrollWindow, XSIZE=1800, YSIZE=1200 ; Produces a scrollable graphics window.</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;</span>
<span class="comments">;  Written by: David W. Fanning, 25 March 2009</span>
<span class="comments">;  Added SIZEFRACTION keyword, Mats LÃ¶fdahl, 25 November 2012.</span>
<span class="comments">;-</span>
<span class="comments">;</span>
<span class="comments">;******************************************************************************************;</span>
<span class="comments">;  Copyright (c) 2009-2012, by Fanning Software Consulting, Inc.                           ;</span>
<span class="comments">;  All rights reserved.                                                                    ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  Redistribution and use in source and binary forms, with or without                      ;</span>
<span class="comments">;  modification, are permitted provided that the following conditions are met:             ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;      * Redistributions of source code must retain the above copyright                    ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer.                     ;</span>
<span class="comments">;      * Redistributions in binary form must reproduce the above copyright                 ;</span>
<span class="comments">;        notice, this list of conditions and the following disclaimer in the               ;</span>
<span class="comments">;        documentation and/or other materials provided with the distribution.              ;</span>
<span class="comments">;      * Neither the name of Fanning Software Consulting, Inc. nor the names of its        ;</span>
<span class="comments">;        contributors may be used to endorse or promote products derived from this         ;</span>
<span class="comments">;        software without specific prior written permission.                               ;</span>
<span class="comments">;                                                                                          ;</span>
<span class="comments">;  THIS SOFTWARE IS PROVIDED BY FANNING SOFTWARE CONSULTING, INC. ''AS IS'' AND ANY        ;</span>
<span class="comments">;  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES    ;</span>
<span class="comments">;  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT     ;</span>
<span class="comments">;  SHALL FANNING SOFTWARE CONSULTING, INC. BE LIABLE FOR ANY DIRECT, INDIRECT,             ;</span>
<span class="comments">;  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED    ;</span>
<span class="comments">;  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;         ;</span>
<span class="comments">;  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND             ;</span>
<span class="comments">;  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT              ;</span>
<span class="comments">;  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS           ;</span>
<span class="comments">;  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                            ;</span>
<span class="comments">;******************************************************************************************;</span>
PRO ScrollWindow, xsize, ysize, $
                  FREE=free, $
                  PIXMAP=pixmap, $
                  SIZEFRACTION = sizefraction, $
                  TITLE=title, $
                  WID=wid, $
                  XPOS=xpos, $
                  XSIZE=xs, $
                  YSIZE=ys, $
                  YPOS=ypos

    <span class="comments">; Get default values. Easier to pass sizes as parameters, but</span>
    <span class="comments">; I want this to be a drop-in replacement for WINDOW, too.</span>
    <span class="comments">; So, XSIZE and YSIZE keywords only checked if xsize and ysize</span>
    <span class="comments">; are undefined.</span>
    IF N_Elements(xsize) EQ 0 THEN BEGIN
        IF N_Elements(xs) EQ 0 THEN xsize = 640 ELSE xsize = xs
    ENDIF
    IF N_Elements(ysize) EQ 0 THEN BEGIN
        IF N_Elements(ys) EQ 0 THEN ysize = 512 ELSE ysize = ys
    ENDIF
    IF N_Elements(wid) EQ 0 THEN wid = 0
    
    <span class="comments">; If the user wants a pixmap, just make it and return.</span>
    IF Keyword_Set(pixmap) THEN BEGIN
        IF Keyword_Set(free) THEN BEGIN
             Window, XSIZE=xsize, YSIZE=ysize, RETAIN=retain, FREE=1       
        ENDIF ELSE BEGIN
             Window, wid, XSIZE=xsize, YSIZE=ysize, RETAIN=retain
        ENDELSE  
        wid = !D.Window
        RETURN
    ENDIF
    
    <span class="comments">; Get the screen size of the display. Account for multiple monitors.</span>
    s = Get_Screen_Size()
    IF s[0] GT 2000 THEN s[0] = s[0] / 2
    
    <span class="comments">;; Need different fudge factors for different operating systems.</span>
    IF StrUpCase(!Version.OS_FAMILY) EQ 'WINDOWS' THEN BEGIN
          retain = 1
          xfudge = 25
          yfudge = 80
    ENDIF ELSE BEGIN
          retain = 2
          xfudge = 40
          yfudge = 100
    ENDELSE
    maxxsize = s[0] - xfudge
    maxysize = s[1] - yfudge
    
    <span class="comments">; Do you have a size fraction to consider?</span>
    IF N_Elements(sizefraction) NE 0 THEN BEGIN
       maxxsize = Round(maxxsize * sizefraction)
       maxysize = Round(maxysize * sizefraction)
    ENDIF 
    
        <span class="comments">; Either make a window, or made a scrollable window.</span>
    IF (xsize LT maxxsize) AND (ysize LT maxysize) THEN BEGIN
        IF Keyword_Set(free) THEN BEGIN
            Window, XSIZE=xsize, YSIZE=ysize, TITLE=title, $
                XPOS=xpos, YPOS=ypos, RETAIN=retain, FREE=1
        ENDIF ELSE BEGIN
            Window, wid, XSIZE=xsize, YSIZE=ysize, TITLE=title, $
                XPOS=xpos, YPOS=ypos, RETAIN=retain
        ENDELSE
        wid = !D.Window
    ENDIF ELSE BEGIN
        tlb = Widget_Base(TITLE=title, XOFFSET=xpos, YOFFSET=ypos, $
            X_SCROLL_SIZE=xsize &lt<span class="comments">; maxxsize, Y_SCROLL_SIZE=ysize &lt; maxysize)</span>
        draw = Widget_Draw(tlb, XSIZE=xsize, YSIZE=ysize, RETAIN=retain)
        Widget_Control, tlb, /Realize
        Widget_Control, draw, Get_Value=wid
        WSet, wid
     ENDELSE

END
</code>
    </div>
  </body>
</html>