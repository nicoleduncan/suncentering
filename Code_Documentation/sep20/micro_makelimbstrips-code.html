<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:34 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>micro_makelimbstrips.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="micro_makelimbstrips.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION micro_makelimbstrips, chord, thresh
<span class="comments">;+</span>
<span class="comments">;   :Description:</span>
<span class="comments">;       Does a quick look at a limb of a chord and returns some positions to compare against fiducial positions</span>
<span class="comments">;</span>
<span class="comments">;   :Params:</span>
<span class="comments">;       chord: in, required, type=byte</span>
<span class="comments">;           Chord data we check limb for</span>
<span class="comments">;       thresh: in, required, type=float</span>
<span class="comments">;           Threshold to judge limb-crossing position</span>
<span class="comments">;</span>
<span class="comments">;   :Keywords:</span>
<span class="comments">;</span>
<span class="comments">;-</span>

<span class="comments">; How many pixels above/below the threhsold we count</span>
limbwidth = BYTE( !param.ministrip_length)/2
block = {startpoints:BYTARR( !param.ministrip_length),endpoints:BYTARR( !param.ministrip_length),startindex:0,endindex:0,startloc:BYTARR( !param.ministrip_length),endloc:BYTARR( !param.ministrip_length),isitbad:0}

<span class="comments">; Where our full-length chord is greater than the threshold</span>
above_thresh = WHERE(chord gt thresh)

<span class="comments">; startpoints is the cut down strip with length = ministrip_length and contains</span>
<span class="comments">; the indices from row_where[0] +/- limbwidth</span>
block.startpoints   = chord[above_thresh[0] - limbwidth:above_thresh[0] + limbwidth - 1]
block.startindex    = FIX(above_thresh[0] - limbwidth)
block.startloc      = above_thresh[0] - limbwidth
block.endpoints     = chord[above_thresh[N_ELEMENTS(above_thresh)-1] - limbwidth+ 1:above_thresh[N_ELEMENTS(above_thresh)-1] + limbwidth]   
block.endindex      = FIX(above_thresh[N_ELEMENTS(above_thresh)-1] - limbwidth)
block.endloc        = above_thresh[N_ELEMENTS(above_thresh)-1] - limbwidth + 1

RETURN,block
end
</code>
    </div>
  </body>
</html>