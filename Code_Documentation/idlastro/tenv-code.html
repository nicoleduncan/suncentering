<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:08 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tenv.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tenv.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">      FUNCTION tenv,dd,mm,ss
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TENV()</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Converts sexagesimal number or string vector to decimal.  </span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	Like TEN() but allows vector input.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCES:</span>
<span class="comments">;	Result = TENV( dd, mm )           ; result = dd + mm/60.</span>
<span class="comments">;	Result = TENV( dd, mm, ss)        ; result = dd + mm/60. + ss/3600.</span>
<span class="comments">;                       or</span>
<span class="comments">;       Result = TENV(ddmmss_string)</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	dd - sexagesimal element(s) corresponding to hours or degrees</span>
<span class="comments">;	mm - sexagesimal element(s) corresponding to minutes</span>
<span class="comments">;	ss - sexagesimal element(s) corresponding to seconds (optional)</span>
<span class="comments">;		The input parameters can be scalars or vectors.   However, the</span>
<span class="comments">;		number of elements in each parameter must be the same.</span>
<span class="comments">;</span>
<span class="comments">;       HRMNSC_STRING - String scalar or vector giving sexagesmal quantity </span>
<span class="comments">;               separated by spaces or colons e.g. "10 23 34" or "-3:23:45.2"</span>
<span class="comments">;               Any negative values should begin with a minus sign.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	Result -  double, decimal equivalent of input sexagesimal </span>
<span class="comments">;		quantities.  Same number of elements as the input parameters.</span>
<span class="comments">;		If the nth element in any of the input parameters is negative </span>
<span class="comments">;		then the nth element in Result will also be negative.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;	If dd = [60,60,0], and mm = [30,-30,-30], then</span>
<span class="comments">;</span>
<span class="comments">;	IDL> Result = TENV(dd,mm)  ====>   Result =  [60.5,-60.5,-0.5]</span>
<span class="comments">;       </span>
<span class="comments">;       Alternatively, the input could be written as the string vector</span>
<span class="comments">;       IDL> str = ['60:30','-60:30','-0:30'] </span>
<span class="comments">;       IDL> print,tenv(str)   ====>   Result =  [60.5,-60.5,-0.5]</span>
<span class="comments">;</span>
<span class="comments">; WARNING: </span>
<span class="comments">;       TENV() will recognize floating point values of -0.0 as negative numbers.</span>
<span class="comments">;       However,  there is no distinction in the binary representation of -0 </span>
<span class="comments">;       and 0  (integer values), and so TENV will treat both values as positive.</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       GETTOK(), REPCHR()  for string processing.</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;	Mostly involves checking arguments and setting the sign.</span>
<span class="comments">;</span>
<span class="comments">;   MODIFICATION HISTORY:</span>
<span class="comments">;	Written by W.B. Landsman           April, 1991</span>
<span class="comments">;       Recognize -0.0   W. Landsman/B. Stecklum   Dec 2005</span>
<span class="comments">;       Work with string input   W. Landsman Feb 2009</span>
<span class="comments">;</span>
<span class="comments">;-</span>
 compile_opt idl2
 On_error,2                                 <span class="comments">;Return to caller</span>

 npar = N_params()
 npts = N_elements(dd)
 if npts EQ 0 then begin
     print,'Syntax -  RESULT = TENV( dd, mm, ss)'
     return, 0.0d
 endif

 if ( npar EQ 1 ) then begin 
 if size(dd,/TNAME) EQ 'STRING' then begin 
       temp = strtrim(dd,2)
       temp = repchr(temp,':',' ')
       neg = where( strmid(temp,0,1) EQ '-', Nneg)
       value = abs(double(gettok(temp,' ')))
       mm = double(gettok(temp,' '))
       decimal =  value + mm/60. + double(temp)/3600.0d
       if Nneg GT 0 then decimal[neg] = -decimal[neg]
       return,decimal
         
 endif else return,double( dd )   <span class="comments">;No need to check for neg values.</span>
 endif

 value = double( abs(dd) ) 

 if ( npar GT 1 ) then begin               <span class="comments">;Add minutes/60., check for &lt;0</span>

      if N_elements(mm) NE npts then $
           message,'ERROR - Number of elements in each parameter must be equal'
      nd=(strpos(string(dd),'-') ge 0)
      nm=(strpos(string(mm),'-') ge 0)
      neg =  nd OR nm
      value = value + abs(mm)/60.0d

 endif

 if ( npar GT 2 ) then begin               <span class="comments">;Add sec/3600., check for &lt;0</span>

      if N_elements(ss) NE npts then $
           message,'ERROR - Number of elements in each parameter must be equal'
      ns=(strpos(string(ss),'-') ge 0)
      neg = neg OR ns
      value = value + abs(ss)/3600.0d

 endif

 neg = where( neg, Nfound )                  <span class="comments">;Account for negative values</span>
 if ( Nfound GT 0 ) then value[neg] = -value[neg]

 return,value      
 end
</code>
    </div>
  </body>
</html>