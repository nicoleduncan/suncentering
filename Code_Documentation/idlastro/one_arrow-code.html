<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:54 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>one_arrow.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="one_arrow.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="one_arrow:source"></a>pro one_arrow,xcen,ycen,angle,label, linestyle = linestyle, $
              charsize=charsize,thick=thick,color=color, $
              arrowsize=arrowsize,font = font, data=data, normal=normal
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       ONE_ARROW</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Draws an arrow labeled with a single character on the current device</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       ONE_ARROW is called, for example, by ARROWS to create a</span>
<span class="comments">;       "weathervane" showing the N-E orientation of an image.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       one_arrow, xcen, ycen, angle, label, CHARSIZE = , THICK = , COLOR = </span>
<span class="comments">;                       ARROWSIZE=, FONT =  ]</span>
<span class="comments">; INPUT PARAMETERS:</span>
<span class="comments">;    xcen, ycen = starting point of arrow, floating point scalars,</span>
<span class="comments">;                 In device coordinates unless /DATA or /NORMAL set</span>
<span class="comments">;    angle      = angle of arrow in degrees counterclockwise from +X direction</span>
<span class="comments">;    label      = single-character label (may be blank)</span>
<span class="comments">;</span>
<span class="comments">; OUTPUT PARAMETERS:  none</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT PARAMETERS:</span>
<span class="comments">;       ARROWSIZE  = 3-element vector defining appearance of arrow.</span>
<span class="comments">;               For device coordinates the default is  [30.0, 9.0, 35.0], </span>
<span class="comments">;               meaning arrow is 30 pixels long; arrowhead lines 9 pixels </span>
<span class="comments">;               long and inclined 35 degrees from arrow shaft.     For </span>
<span class="comments">;               normalized coordinates the default is divided by 512., for </span>
<span class="comments">;               data coordinates the default is multiplied by </span>
<span class="comments">;               (!X.crange[1] - !X.crange[0])/512..</span>
<span class="comments">;       CHARSIZE   = usual IDL meaning, default = 2.0</span>
<span class="comments">;       COLOR      = name or number give the color to draw the arrow.  See</span>
<span class="comments">;             cgCOLOR for a list of color names.</span>
<span class="comments">;       /DATA - If set, then the input position (xcen, ycen) and the ARROWSIZE</span>
<span class="comments">;                lengths are interpreted as being in data coordinates</span>
<span class="comments">;       FONT - IDL vector font number to use (1-20).   For example, to write</span>
<span class="comments">;               the 'N' and 'E' characters in complex script, set font=13</span>
<span class="comments">;       /NORMAL - If set, then the input position (xcen, ycen) and the ARROWSIZE</span>
<span class="comments">;                lengths are interpreted as being in normal coordinates</span>
<span class="comments">;       THICK      = usual IDL meaning, default = 2.0</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Draw an triple size arrow emanating from the point (212,224)</span>
<span class="comments">;       and labeled with the character 'S'</span>
<span class="comments">;</span>
<span class="comments">;       IDL> one_arrow,212,224,270,'S',charsize=3</span>
<span class="comments">; PROCEDURE:  </span>
<span class="comments">;       Calls one_ray to vector-draw arrow.</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Written by R. S. Hill, Hughes STX Corp., 20-May-1992.</span>
<span class="comments">;       Added font keyword, W.B. Landsman Hughes STX Corp. April 1995</span>
<span class="comments">;       Modified to work correctly for COLOR=0  J.Wm.Parker, HITC   1995 May 25</span>
<span class="comments">;       Add /NORMAL and /DATA keywords  W.Landsman    November 2006</span>
<span class="comments">;       Work with Coyote graphics W. Landsman  February 2011</span>
<span class="comments">;-</span>
 On_error,2
 compile_opt idl2

 if N_params() LT 4 then begin
      print,'Syntax - one_arrow, xcen, ycen, angle, label, CHARSIZE = , FONT=' 
      print,'                [ /DATA, /NORMAL, THICK= , COLOR=, ARROWSIZE = ]'
      return
 endif 

  if (n_elements(arrowsize) ge 1) and (n_elements(arrowsize) ne 3) then begin
   print,'Error in ONE_ARROW:  returning to main level.'
   print,'Arrowsize is [length, head_length, head_angle]'
   print,'Defaults are [30.0,9.0,35.0]'
   return
 endif

 setdefaultvalue, charsize, 2.0
 setdefaultvalue, thick, 2.0
   if keyword_set(data) then scale = (!X.CRANGE[1] - !X.CRANGE[0])/512. $
    else if keyword_set(normal) then scale = 1/512. else scale = 1.
 if N_elements(arrowsize) eq 0 then $
    arrowsize=[30.0*scale,9.0*scale,35.0] else $
    arrowsize = [arrowsize[0]*scale, arrowsize[1]*scale, arrowsize[2] ]

 device = ~keyword_set(data) && ~keyword_set(normal)
 label = strmid(strtrim(label,2),0,1)
 if keyword_set(font) then label = '!' + strtrim(font,2) + label + '!X '
 len       = arrowsize[0]
 headlen   = arrowsize[1]
 headangle = arrowsize[2]
 baseline  = (!d.y_ch_size+!d.x_ch_size)/2.0
 char_cen_offset  = baseline*charsize
 if keyword_set(data) then char_cen_offset = $
        convert_coord(char_cen_offset,0,/device,/to_data) - $ 
        convert_coord(0,0,/device,/to_data)
 if keyword_set(normal) then char_cen_offset = $ 
       convert_coord(char_cen_offset,0,/device,/to_normal) - $
       convert_coord(0,0,/device,/to_normal)
 char_cen_offset = char_cen_offset[0]           
 char_orig_len    = char_cen_offset/2.0
 char_orig_angle  = 225.0
<span class="comments">;  Draw shaft of arrow</span>
one_ray,xcen,ycen,len,angle,terminus,thick=thick,color=color,data= data, $
   normal=normal,linestyle=linestyle

<span class="comments">;  Draw head of arrow</span>
one_ray,terminus[0],terminus[1],headlen,(angle+180.0+headangle),t2, $
   thick=thick,color=color,data=data,normal=normal,linestyle=linestyle
one_ray,terminus[0],terminus[1],headlen,(angle+180.0-headangle),t2, $
   thick=thick,color=color,data = data, normal = normal,linestyle=linestyle

<span class="comments">;  Draw label</span>
one_ray,xcen,ycen,len+char_cen_offset,angle,terminus,/nodraw
one_ray,terminus[0],terminus[1],char_orig_len,char_orig_angle,char_orig,/nodraw
cgtext, char_orig[0], char_orig[1], label, charthick=thick, color=color, $
 charsize=charsize, device=device, normal=normal


 return
 end
</code>
    </div>
  </body>
</html>