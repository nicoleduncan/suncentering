<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:14 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>zoom_xy.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="zoom_xy.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="zoom_xy:source"></a>pro zoom_xy, xim, yim, xtv, ytv, OFFSET=offset, ZOOM = zoom
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      ZOOM_XY</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Converts X, Y position on the image array to the the X,Y position </span>
<span class="comments">;       in the current window.   (These  positions are identical </span>
<span class="comments">;       only for an unroamed, zoomed image with with pixel (0,0) of the </span>
<span class="comments">;       image placed at position (0,0) on the TV.)</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      ZOOM_XY, Xim,Yim,Xtv,Ytv, [ OFFSET =, ZOOM = ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;      XIM - Scalar or vector giving X position(s) as read on the image</span>
<span class="comments">;            display (e.g. with CURSOR,XIM,YIM,/DEVICE)</span>
<span class="comments">;      YIM - Like XTV but giving Y position(s) as read on the image display.</span>
<span class="comments">;</span>
<span class="comments">;      If only 2 parameters are supplied then XIM and YIM will be modfied</span>
<span class="comments">;      on output to contain the converted coordinates.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD INPUT:</span>
<span class="comments">;      OFFSET - 2 element vector giving the location of the image pixel (0,0) </span>
<span class="comments">;               on the window display.   OFFSET can be positive (e.g if the </span>
<span class="comments">;               image is centered in a larger window) or negative (e.g. if the</span>
<span class="comments">;               only the central region of an image much larger than the window</span>
<span class="comments">;               is being displayed. </span>
<span class="comments">;               Default value is [0,0], or no offset.</span>
<span class="comments">;</span>
<span class="comments">;       ZOOM - Scalar specifying the magnification of the window with respect</span>
<span class="comments">;               to the image variable.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;      XTV,YTV - REAL*4 X and Y coordinates of the image corresponding to the</span>
<span class="comments">;            cursor position on the TV display.   Same number of elements as</span>
<span class="comments">;            XIM, YIM.</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;       If present, ZOOM_XY will use the TV and IMAGE common blocks which are</span>
<span class="comments">;       defined in the MOUSSE software system (see </span>
<span class="comments">;        http://archive.stsci.edu/uit/analysis.html)   If the user is not using</span>
<span class="comments">;       the MOUSSE software (which keeps track of the offset and zoom in each</span>
<span class="comments">;       window) then the common blocks are ignored.</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       The integer value of a pixel is assumed to refer to the *center*</span>
<span class="comments">;       of a pixel.</span>
<span class="comments">; REVISON HISTORY:</span>
<span class="comments">;       Adapted from MOUSSE procedure of the same name W. Landsman HSTX Mar 1996</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Properly include ZOOM keyword  W. Landsman   May 2000</span>
<span class="comments">;       Put back common blocks for MOUSSE compatibility    September 2004</span>
<span class="comments">;-</span>
 On_error,2
 Compile_opt idl2
 common tv,chan,czoom,xroam,yroam
 common images,x00,y00,xsize,ysize 

 if N_params() LT 2 then begin
        print,'Syntax - Zoom_XY, Xtv, Ytv, Xim, Yim, [ Offset=, Zoom = ]'
        return
 endif
    
 if N_elements(offset) NE 2 then begin
<span class="comments">;Determine if Images common block defined</span>
      if n_elements(x00) eq 0 then offset = [0,0] $ 
                              else offset = [x00[chan],y00[chan]]
 endif
 if N_elements(zoom) NE 1 then begin 
          if N_elements(czoom) GT 0 then zoom = czoom[chan] else $
             zoom = 1
 endif

 cen =  (zoom-1)/2.

 xtv =  cen + zoom*(xim + offset[0] )
 ytv =  cen + zoom*(yim + offset[1] )

 if N_Params() LT 3 then begin
    xim = xtv  & yim = ytv
 endif                  

 return
 end                                    
</code>
    </div>
  </body>
</html>