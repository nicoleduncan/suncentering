<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:05 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tab_expand.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tab_expand.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tab_expand:source"></a>pro tab_expand,tcb,tab,maxcol,maxrow,rowlen
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TAB_EXPAND</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	routine to expand the size of an SDAS table file.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	tab_expand, tcb, tab, maxcol, maxrow, rowlen</span>
<span class="comments">;</span>
<span class="comments">; INPUT/OUTPUT:</span>
<span class="comments">;	tcb - table control block returned by routine TAB_READ</span>
<span class="comments">;		or TAB_CREATE.</span>
<span class="comments">;	tab - table array</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;	maxcol - new maximum number of columns.</span>
<span class="comments">;	maxrow - new maximum number of rows.</span>
<span class="comments">;	rowlen - new maximum row length in 2 byte units.</span>
<span class="comments">;</span>
<span class="comments">;	If maxcol, maxrow, or rowlen are supplied with</span>
<span class="comments">;	values less than the previous maximums, the previous</span>
<span class="comments">;	maximums are used.  All values are defaulted to zero</span>
<span class="comments">;	if not supplied.</span>
<span class="comments">;</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	Version 1   D. Lindler   Dec. 88</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
<span class="comments">;-----------------------------------------------------------------------</span>
<span class="comments">;</span>
<span class="comments">; set default parameters</span>
<span class="comments">;</span>
	npar=n_params(0)
	if npar lt 3 then return		<span class="comments">;nothing to expand</span>
	if npar lt 4 then maxrow=0
	if npar lt 5 then rowlen=0
<span class="comments">;</span>
<span class="comments">; get old table sizes and parameters</span>
<span class="comments">;</span>
	old_maxcol=tcb[6,0]
	old_maxrow=tcb[4,0]>tcb[3,0]
	old_rowlen=tcb[8,0]>tcb[7,0]
<span class="comments">;</span>
<span class="comments">; set new table sizes</span>
<span class="comments">;</span>
	new_maxcol=old_maxcol>maxcol
	new_maxrow=old_maxrow>maxrow
	new_rowlen=old_rowlen>rowlen
<span class="comments">;</span>
<span class="comments">; increase size of table control block in maxcol increased</span>
<span class="comments">;</span>
	if new_maxcol gt old_maxcol then begin
		new_tcb=lonarr(16,new_maxcol+2)
		new_tcb[0,0]=tcb
		new_tcb[0,new_maxcol+1]=tcb[*,old_maxcol+1]
		tcb=new_tcb
	endif
<span class="comments">;</span>
<span class="comments">; increase table size if needed</span>
<span class="comments">;</span>
	if (new_maxrow gt old_maxrow) or (new_rowlen gt old_rowlen) then begin
		oldtab=tab
		tab=bytarr(new_rowlen*2,new_maxrow)
		tab[0,0]=oldtab
	endif
<span class="comments">;</span>
<span class="comments">; update control block</span>
<span class="comments">;</span>
	tcb[6,0]=new_maxcol
	tcb[8,0]=new_rowlen
	tcb[4,0]=new_maxrow
	return
	end
</code>
    </div>
  </body>
</html>