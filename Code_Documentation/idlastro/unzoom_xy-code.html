<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:10 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>unzoom_xy.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="unzoom_xy.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="unzoom_xy:source"></a>pro unzoom_xy,xtv,ytv,xim,yim,OFFSET=offset, ZOOM = zoom
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      UNZOOM_XY</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;      Converts X, Y position on the image display to the the X,Y position </span>
<span class="comments">;      on the corresponding image array.  (These  positions are identical </span>
<span class="comments">;      only for an unroamed, unzoomed image with with pixel (0,0) of the </span>
<span class="comments">;      image placed at position (0,0) on the TV.)</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      UNZoom_XY, Xtv,Ytv,Xim,Yim, [ OFFSET =, ZOOM = ]   </span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;      XTV - Scalar or vector giving X position(s) as read on the image</span>
<span class="comments">;            display (e.g. with CURSOR,XTV,YTV,/DEVICE)</span>
<span class="comments">;      XTV - Scalar or vector giving Y position(s) on the image display.</span>
<span class="comments">;      If only 2 parameters are supplied then XTV and YTV will be modfied</span>
<span class="comments">;      on output to contain the image array coordinates.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD INPUT:</span>
<span class="comments">;      OFFSET - 2 element vector giving the location of the image pixel (0,0) </span>
<span class="comments">;               on the window display.   OFFSET can be positive (e.g if the </span>
<span class="comments">;               image is centered in a larger window) or negative (e.g. if the</span>
<span class="comments">;               only the central region of an image much larger than the window</span>
<span class="comments">;               is being displayed. </span>
<span class="comments">;               Default value is [0,0], or no offset.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;      XIM,YIM - X and Y coordinates of the image corresponding to the</span>
<span class="comments">;            cursor position on the TV display.</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;       If present, ZOOM_XY will use the TV and IMAGE common blocks which are</span>
<span class="comments">;       defined in the MOUSSE software system (see </span>
<span class="comments">;        http://archive.stsci.edu/uit/analysis.html)   If the user is not using</span>
<span class="comments">;       the MOUSSE software (which keeps track of the offset and zoom in each</span>
<span class="comments">;       window) then the common blocks are ignored.</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       The integer value of a pixel is assumed to refer to the *center*</span>
<span class="comments">;       of a pixel.</span>
<span class="comments">; REVISON HISTORY:</span>
<span class="comments">;       Adapted from MOUSSE procedure  W. Landsman       March 1996</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Proper handling of offset option          S. Ott/W. Landsman May 2000</span>
<span class="comments">;       Put back common blocks for MOUSSE compatibility    September 2004</span>
<span class="comments">;-</span>

 On_error,2
 Compile_opt idl2
 common tv,chan,czoom,xroam,yroam
 common images,x00,y00,xsize,ysize 

 if N_params() LT 2 then begin
        print,'Syntax - UNZOOM_XY, xtv, ytv, xim, yim, [OFFSET= ,ZOOM = ]'
        return
 endif

    
 if N_elements(offset) NE 2 then begin
<span class="comments">;Determine if Images common block defined</span>
      if n_elements(x00) eq 0 then offset = [0,0] $ 
                              else offset = [x00[chan],y00[chan]]
 endif
 if N_elements(zoom) NE 1 then begin 
          if N_elements(czoom) GT 0 then zoom = czoom[chan] else $
             zoom = 1
 endif


 cen =  (zoom-1)/2.
 xim =  float((xtv-cen)/zoom) - offset[0]/float(zoom)
 yim =  float((ytv-cen)/zoom) - offset[1]/float(zoom)
 if N_Params() LT 3 then begin
   xtv = xim & ytv = yim
 endif

return
end                                    

</code>
    </div>
  </body>
</html>