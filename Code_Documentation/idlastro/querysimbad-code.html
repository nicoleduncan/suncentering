<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:58 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>querysimbad.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="querysimbad.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">PRO QuerySimbad, name, ra, de, id, Found = found, NED = ned, ERRMSG = errmsg, $
    Verbose = verbose, CADC = cadc, CFA=cfa, Server=server, SILENT=silent, $
    Print = print
<span class="comments">;+</span>
<span class="comments">; NAME: </span>
<span class="comments">;   QUERYSIMBAD</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE: </span>
<span class="comments">;   Query the SIMBAD/NED/Vizier astronomical name resolver to obtain coordinates</span>
<span class="comments">;</span>
<span class="comments">; EXPLANATION: </span>
<span class="comments">;   Uses the IDL SOCKET command to query either the SIMBAD or NED nameserver </span>
<span class="comments">;   over the Web to return J2000 coordinates.     ;   By default, QuerySimbad </span>
<span class="comments">;   first queries the Simbad database, then (if no match found) the NED </span>
<span class="comments">;   database, and then the Vizier database.</span>
<span class="comments">;    </span>
<span class="comments">;   For details on the SIMBAD service, see http://simbad.u-strasbg.fr/Simbad </span>
<span class="comments">;   and for the NED service, see http://ned.ipac.caltech.edu/</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE: </span>
<span class="comments">;    QuerySimbad, name, ra, dec, [ id, Found=, /NED, /CADC, ERRMSG=, /VERBOSE]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS: </span>
<span class="comments">;    name - a scalar string containing the target name in SIMBAD (or NED)</span>
<span class="comments">;           nomenclature. For SIMBAD details see</span>
<span class="comments">;           http://vizier.u-strasbg.fr/cgi-bin/Dic-Simbad .</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS: </span>
<span class="comments">;     ra -  Right ascension of the target in J2000.0 in *degrees*, scalar </span>
<span class="comments">;     dec - declination of the target in degrees, scalar</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;     /CFA - if set, then use the Simbad server at the Center for Astrophysics</span>
<span class="comments">;             rather than the default server in Strasbourg, France.</span>
<span class="comments">;     ERRMSG   = If defined and passed, then any error messages will be</span>
<span class="comments">;                  returned to the user in this parameter rather than</span>
<span class="comments">;                  depending on the MESSAGE routine in IDL.  If no errors are</span>
<span class="comments">;                  encountered, then a null string is returned. </span>
<span class="comments">;     /NED - if set, then only the nameserver of the NASA Extragalactic database</span>
<span class="comments">;            is used to resolve the name and return coordinates.   Note that</span>
<span class="comments">;           /NED cannot be used with Galactic objects</span>
<span class="comments">;     /VERBOSE - If set, then the HTTP-GET command is displayed</span>
<span class="comments">;     /PRINT - if set, then output coordinates are displayed at the terminal </span>
<span class="comments">;            By default, the coordinates are displayed if no output parameters</span>
<span class="comments">;           are supplied to QUERYSIMBAD</span>
<span class="comments">;     /SILENT - If set, then don't print warnings if multiple SIMBAD objects</span>
<span class="comments">;             correspond to the supplied name.</span>
<span class="comments">; OPTIONAL OUTPUT: </span>
<span class="comments">;     id - the primary SIMBAD (or NED) ID of the target, scalar string</span>
<span class="comments">;          As of June 2009, a more reliable ID seems to be found when using </span>
<span class="comments">;          CFA (/CFA) server.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD OUTPUT:</span>
<span class="comments">;     found - set to 1 if the translation was successful, or to 0 if the</span>
<span class="comments">;           the object name could not be translated by SIMBAD or NED</span>
<span class="comments">;     Errmsg - if supplied, then any error messages are returned in this</span>
<span class="comments">;            keyword, rather than being printed at the terminal.   May be either</span>
<span class="comments">;            a scalar or array.</span>
<span class="comments">;     Server - Character indicating which server was actually used to resolve</span>
<span class="comments">;           the object, 'S'imbad, 'N'ed or 'V'izier</span>
<span class="comments">;            </span>
<span class="comments">; EXAMPLES:</span>
<span class="comments">;     (1) Display the J2000 coordinates for the ultracompact HII region</span>
<span class="comments">;         G45.45+0.06 </span>
<span class="comments">;</span>
<span class="comments">;      IDL> QuerySimbad,'GAL045.45+00.06'</span>
<span class="comments">;           ===>19 14 20.77  +11 09  3.6</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       REPSTR(), WEBGET()</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;     The actual  query is made to the Sesame name resolver </span>
<span class="comments">;     ( see http://cdsweb.u-strasbg.fr/doc/sesame.htx ).     The Sesame</span>
<span class="comments">;     resolver first searches the Simbad name resolver, then  NED and then</span>
<span class="comments">;     Vizier.   </span>
<span class="comments">; MODIFICATION HISTORY: </span>
<span class="comments">;     Written by M. Feldt, Heidelberg, Oct 2001   &lt;mfeldt@mpia.de></span>
<span class="comments">;     Minor updates, W. Landsman   August 2002</span>
<span class="comments">;     Added option to use NED server, better parsing of SIMBAD names such as </span>
<span class="comments">;          IRAS F10190+5349    W. Landsman  March 2003</span>
<span class="comments">;     Turn off extended name search for NED server, fix negative declination</span>
<span class="comments">;     with /NED    W. Landsman  April 2003</span>
<span class="comments">;     Use Simbad Sesame sever, add /Verbose, /CADC keywords </span>
<span class="comments">;       B. Stecklum, TLS Tautenburg/ W. Landsman, Feb 2007</span>
<span class="comments">;    Update NED query to account for new IPAC format, A. Barth  March 2007</span>
<span class="comments">;    Update NED query to account for another new IPAC format, A. Barth  </span>
<span class="comments">;                                                   July 2007</span>
<span class="comments">;     Update message when NED does not find object  W.L.  October 2008</span>
<span class="comments">;     Remove CADC keyword, add CFA keyword, warning if more than two</span>
<span class="comments">;         matches  W.L. November 2008 </span>
<span class="comments">;     Make NED queries through the Sesame server, add Server output </span>
<span class="comments">;          keyword  W.L.  June 2009</span>
<span class="comments">;     Don't get primary name if user didn't ask for it  W.L. Aug 2009</span>
<span class="comments">;     Added /SILENT keyword W.L. Oct 2009</span>
<span class="comments">;     Added /PRINT keyword W.L.   Oct 2011</span>
<span class="comments">;-</span>
  On_error,2
  compile_opt idl2
  if N_params() LT 1 then begin
       print,'Syntax - QuerySimbad, name, ra, dec, [ id, ]
       print,'                 Found=, /CFA, /NED, ERRMSG=, /VERBOSE]'
       print,'   Input - object name, scalar string'
       print,'   Output -  Ra, dec of object (degrees)'
       return
  endif
  <span class="comments">;;</span>
  printerr = ~arg_present(errmsg)
  if ~printerr  then errmsg = ''
  object = repstr(name,'+','%2B')
 object = repstr(strcompress(object),' ','%20')
 if keyword_set(Cadc) then message,'CADC keyword is no longer supported'
 if keyword_set(cfa) then base = 'vizier.cfa.harvard.edu/viz-bin' else $
 base = 'cdsweb.u-strasbg.fr/cgi-bin'
    if keyword_set(NED) then begin
 QueryURL = "http://" + base + "/nph-sesame/-o/N?" + $
               strcompress(object,/remove)
 endif else begin
 QueryURL = "http://" + base + "/nph-sesame/-o/?" + $
               strcompress(object,/remove)

  endelse
  <span class="comments">;;</span>
  if keyword_set(verbose) then print,queryURL
  Result = webget(QueryURL)
  found = 0
  <span class="comments">;;</span>
   Result=Result.Text
   if arg_present(server) then $ 
        server = strmid(result[1],2,1)
<span class="comments">; look for J2000 coords</span>
  idx=where(strpos(Result, '%J ') ne -1,cnt)

  if cnt GE 1 then begin
    if cnt GT 1 then begin 
        if ~keyword_set(SILENT) then $
	 message,/INF,'Warning - More than one match found for name '  + name
        idx = idx[0]
    endif 	
    found=1   
    ra = 0.0d & de = 0.0d
    reads,strmid(Result[idx],2),ra,de
        if N_params() GT 3 then begin 

     idx2= where(strpos(Result, '%I.0 ') ne -1,cnt)
     if cnt GT 0 then id = strtrim(strmid(Result[idx2],4),2) else $
	    if ~keyword_set(SILENT) then $
	       message,'Warning - could not determine primary ID',/inf 
     endif	    
  ENDIF ELSE BEGIN 
      errmsg = ['No objects returned by SIMBAD.   The server answered:' , $
                 strjoin(result)]
      if printerr then begin
         message, errmsg[0], /info	
	 message,strjoin(result),/info
      endif	 
  ENDELSE
  if (N_params() LT 2) || keyword_set(print) then print,adstring(ra,de,1)
        
  
  return 
END 
  
</code>
    </div>
  </body>
</html>