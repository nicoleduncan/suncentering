<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:23 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>date.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="date.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION DATE,YEAR,DAY
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	DATE</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Convert day-of-year to a DD-MMM-YYYY string</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	D_String = DATE(Year, day )</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	Year - Integer scalar specifying the year.   If the year contains only</span>
<span class="comments">;		two digits, then it is assumed to indicate the number of </span>
<span class="comments">;		years after 1900. </span>
<span class="comments">;</span>
<span class="comments">;	Day - Integer scalar giving number of days after Jan 0 of the </span>
<span class="comments">;		specified year.    Can be larger than 366     </span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	D_String - String giving date in format '13-MAR-1986'</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;	Will not work for years before 100 AD </span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;	IDL> print, date(1997,279)</span>
<span class="comments">;		'6-Oct-1997'</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       D.M. fecit  24 October,1983</span>
<span class="comments">;	Work for years outside of the 19th century  W. Landsman  September 1997</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
 IF day LE 0 THEN BEGIN
	D_String = '%DATE-F-DAY.LE.ZERO'
 ENDIF ELSE BEGIN
	Last_Day = [31,59,90,120,151,181,212,243,273,304,334,365]
	LD = [0,INTARR(11)+1]
	Day_of_Year = Day
	Months = 'JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC'

<span class="comments">; Every year that is exactly divisible by 4 is a leap year, except for years</span>
<span class="comments">; that exactly divisible by 100; these centurial years are leap years only if</span>
<span class="comments">; they are exactly divisible by 400.</span>

	IF Year LT 100 THEN Yr = Year + 1900 ELSE Yr = Year
	Leap = (((Yr MOD 4) EQ 0) AND ((Yr MOD 100) NE 0)) $
		OR ((Yr MOD 400) EQ 0)
	N_Days = 365 + Leap

	WHILE Day_of_Year GT N_Days DO BEGIN
		Day_of_Year = Day_of_Year - N_Days
		Yr = Yr + 1
		Leap = (((Yr MOD 4) EQ 0) AND ((Yr MOD 100) NE 0)) $
			OR ((Yr MOD 400) EQ 0)
		N_Days = 365 + Leap
	END

	End_Date = '-' + STRTRIM(YR,2)

	IF Leap THEN Last_Day = Last_Day + LD
	Last_Month = Day_of_Year LE Last_Day
	Where_LD = WHERE(Last_Month, N_Month)

	IF N_Month EQ 12 THEN BEGIN
		D_String = STRTRIM(Day_of_Year,2) + '-JAN' + End_Date
	ENDIF ELSE BEGIN
		LAST_Month = Where_LD[0]
		Month = STRMID(Months,3*Last_Month,3)
		Day_of_Month = Day_of_Year - Last_Day[Last_Month-1]
		D_String = STRTRIM(Day_of_Month,2) + '-' + Month + End_Date
	END
 END

 RETURN,D_String
 END
</code>
    </div>
  </body>
</html>