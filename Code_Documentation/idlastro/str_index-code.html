<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:02 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>str_index.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="str_index.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION STR_INDEX, str, substr, offset
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       STR_INDEX()</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Get indices of a substring (SUBSTR) in string.</span>
<span class="comments">;</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       The IDL intrinsic function STRPOS returns only the index of the first</span>
<span class="comments">;       occurrence of a substring. This routine calls itself recursively to get</span>
<span class="comments">;       indices of the remaining occurrences.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       result= STR_INDEX(str, substr [, offset])</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       STR    -- The string in which the substring is searched for</span>
<span class="comments">;       SUBSTR -- The substring to be searched for within STR</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;       OFFSET -- The character position at which the search is begun. If</span>
<span class="comments">;                 omitted or being negative, the search begins at the first</span>
<span class="comments">;                 character (character position 0).</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       RESULT -- Integer scalar or vector containing the indices of SUBSTR</span>
<span class="comments">;                 within STR. If no substring is found, it is -1.</span>
<span class="comments">;</span>
<span class="comments">; CALLS:</span>
<span class="comments">;       DELVARX</span>
<span class="comments">;</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;       STR_INDEX -- internal common block. The variable save in the block is</span>
<span class="comments">;                    deleted upon final exit of this routine.</span>
<span class="comments">;</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;       Utility, string</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Written January 3, 1995, Liyun Wang, GSFC/ARC</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Use size(/TNAME) instead of DATATYPE()   W. Landsman   October 2001</span>
<span class="comments">;       </span>
<span class="comments">;-</span>
<span class="comments">;</span>
   ON_ERROR, 2
   COMMON str_index, idx

   IF N_PARAMS() LT 2 THEN MESSAGE,'Syntax: str_index, str, substr [,offset]'

   IF size(str,/TNAME) NE 'STRING' OR size(substr,/TNAME) NE 'STRING' THEN $
      MESSAGE, 'The first two input parameters must be of string type.'

   IF N_ELEMENTS(offset) EQ 0 THEN pos = 0 ELSE pos = offset
   aa = STRPOS(str,substr,pos)
   IF aa NE -1 THEN BEGIN
      IF N_ELEMENTS(idx) EQ 0 THEN idx = aa ELSE idx = [idx,aa]
      bb = str_index(str,substr,aa+1)
      RETURN, bb
   ENDIF ELSE BEGIN
      IF N_ELEMENTS(idx) NE 0 THEN BEGIN
         result = idx
         delvarx, idx
      ENDIF ELSE result = -1
      RETURN, result
   ENDELSE
END
</code>
    </div>
  </body>
</html>