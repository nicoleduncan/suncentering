<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:39 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>getpro.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="getpro.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="getpro:source"></a>pro getpro,proc_name            <span class="comments">;Obtain a copy of a procedure</span>
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     GETPRO</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;     Search !PATH for a procedure, and copy into user's working directory</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;     Extract a procedure from an IDL Library or directory given in the </span>
<span class="comments">;     !PATH  system variable and place it in the current default directory</span>
<span class="comments">;     (presumably to be edited by the user). </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     GETPRO, [ proc_name ]          ;Find PROC_NAME in !PATH and copy</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;     proc_name - Character string giving the name of the IDL procedure or </span>
<span class="comments">;               function.  Do not give an extension.   If omitted, </span>
<span class="comments">;               the program will prompt for PROC_NAME.   </span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;     None.</span>
<span class="comments">;</span>
<span class="comments">; SIDE EFFECTS:</span>
<span class="comments">;      A file with the extension .pro and a name given by PROC_NAME will</span>
<span class="comments">;      be created on the user's directory.</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;      The FILE_WHICH() function is used to locate the procedure in the IDL</span>
<span class="comments">;      !PATH.     When found, FILE_COPY is used to </span>
<span class="comments">;      copy the procedure into the user's current default directory.    If not </span>
<span class="comments">;      found in !PATH, then the ROUTINE_INFO() function is used to determine </span>
<span class="comments">;      if it is an intrinsic IDL procedure.  </span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Put a copy of the USER library procedure CURVEFIT on the current</span>
<span class="comments">;       directory</span>
<span class="comments">;</span>
<span class="comments">;       IDL> getpro, 'CURVEFIT'</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       User will be unable to obain source code for a native IDL function</span>
<span class="comments">;       or procedure, or for a FORTRAN or C routine added with CALL_EXTERNAL.</span>
<span class="comments">;       User must have write privilege to the current directory</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE CALLS:</span>
<span class="comments">;      ZPARCHECK</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;      Written W. Landsman, STX Corp.   June 1990</span>
<span class="comments">;      Now use intrinsic EXPAND_PATH() command  W. Landsman November 1994</span>
<span class="comments">;      Use ROUTINE_NAMES() to check for intrinsic procs  W. Landsman July 95</span>
<span class="comments">;      Update for Windows/IDL     W. Landsman      September 95</span>
<span class="comments">;      Check if procedure is in current directory  W. Landsman  June 1997</span>
<span class="comments">;      Use ROUTINE_INFO instead of undocumented ROUTINE_NAMES W.L. October 1998</span>
<span class="comments">;      Use FILE_WHICH() to locate procedure W. Landsman May 2006 </span>
<span class="comments">;      Assume since V5.5, remove VMS support  W. Landsman Sep 2006</span>
<span class="comments">;      Assume since V6.0, use file_basename() W.Landsman Feb 2009</span>
<span class="comments">;      Test for .sav file, more robust test for write privilege W.L. Jul 2010</span>
<span class="comments">;-</span>
  On_error,2                                     <span class="comments">;Return to caller on error</span>
  compile_opt idl2


  if N_params() EQ 0 then begin <span class="comments">;Prompt for procedure name?</span>
        proc_name = ' ' 
        read,'Enter name of procedure you want a copy of: ',proc_name     
  
  endif else zparcheck, 'getpro', proc_name, 1, 7, 0, 'Procedure name'

  name = strtrim( file_basename(proc_name,'.pro'), 2 )  

<span class="comments">;First check if procedure is already on current directory (no overwriting)</span>

  if file_test(name + '.pro') then begin
       message,name + '.pro already exists in the current directory',/INF
        return
  endif 

<span class="comments">;Locate file in the user's !PATH  </span>

  fname = file_which(name + '.pro')
  if fname NE '' then begin           <span class="comments">;File found? </span>

<span class="comments">; Now make sure user has write privileges</span>
        cd, current=curdir
        if file_test(curdir,/write) NE 1 then $
        message,curdir +  $
	   ' has insufficient privilege or file protection violation'

         file_copy,fname, name + '.pro' 
         message,'Procedure '+ NAME + '.pro copied from '+ fname,/INF
         return
   endif else begin

<span class="comments">; Is it a .sav file in the !PATH? </span>
  fname = file_which(name + '.sav')
  if fname NE '' then begin           <span class="comments">;.Sav File found? </span>
      message,'File ' + fname + ' is an IDL save set',/INF
      return
  endif 

<span class="comments">; Now check if it is an intrinsic IDL procedure or function.  </span>

  funcnames = routine_info(/system,/func)
  name = strupcase(name)
  test = where ( funcnames EQ name, fcount)

  funcnames = routine_info(/system)
  test = where ( funcnames EQ name, pcount)

  if (fcount EQ 0) and (pcount EQ 0) then begin   

     message,'Procedure '+NAME+' not found in the !PATH search string',/CONT
     message,'Check your spelling or search the individual directories',/INF

  endif else begin     

  if fcount GT 0 then $
       message,NAME + ' is an intrinsic IDL function',/CONT  $
  else message,NAME + ' is an intrinsic IDL procedure',/CONT
       message,'No source code is available',/INF

  endelse
  endelse
  return
  
  end 
</code>
    </div>
  </body>
</html>