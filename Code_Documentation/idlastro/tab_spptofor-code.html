<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:06 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tab_spptofor.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tab_spptofor.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tab_spptofor:source"></a>pro tab_spptofor,sppformat,format,width
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TAB_SPPTOFOR  </span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	This procedure converts an spp format specification to a normal</span>
<span class="comments">;	Fortran format specification.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	tab_spptofor, sppformat, format, width</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	sppformat - spp format specification (without preceeding %)</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	forformat - fortran format specification (string)</span>
<span class="comments">;	width - field width (integer)</span>
<span class="comments">;</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	version 1  D. Lindler  Jan 1989</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
<span class="comments">;--------------------------------------------------------------------------</span>
<span class="comments">;</span>
<span class="comments">; initialization</span>
<span class="comments">;</span>
	zero=byte('0') & zero=zero[0]
	nine=byte('9') & nine=nine[0]
	period=byte('.') & period=period[0]
	minus=byte('-') & minus=minus[0]
	O=byte('O') & O=O[0]
<span class="comments">;</span>
<span class="comments">; determine if leading character is - or O. if so ignore it</span>
<span class="comments">;</span>
	b=byte(sppformat) & nb=n_elements(b)
	if (b[0] eq O) or (b[0] eq minus) then begin
		nb=nb-1
		b=b[1:nb]
	endif
<span class="comments">;</span>
<span class="comments">; get field width by searching for consecutive digits</span>
<span class="comments">;</span>
	w = 0
	while (b[0] ge zero) and (b[0] le nine) do begin
		w = w*10 + b[0]-zero
		nb=nb-1
		b=b[1:nb]
	end
<span class="comments">;</span>
<span class="comments">; if next character is a period search for number of digits of</span>
<span class="comments">; precision</span>
<span class="comments">;</span>
	d = 0
	if b[0] eq period then begin
		nb=nb-1
		b=b[1:nb]
		while (b[0] ge zero) and (b[0] le nine) do begin
			d = d*10 + b[0]-zero
			nb=nb-1
			b=b[1:nb]
		end
	end
<span class="comments">;</span>
<span class="comments">; convert to strings for use in fortran format specification</span>
<span class="comments">;</span>
	w=w>d
	w=w>1
	width=w
	sw=strtrim(w,2)
	sd=strtrim(d,2)
<span class="comments">;</span>
<span class="comments">; next character should be the format character</span>
<span class="comments">;</span>
	case string(b[0]) of
	   'b' : format='I'+sw
	   'c' : format='A'+sw
	   'd' : format='I'+sw
	   'e' : format='E'+sw+'.'+sd
	   'f' : format='F'+sw+'.'+sd
	   'g' : format='G'+sw+'.'+sd
	   'h' : format='F'+sw+'.'+sd
	   'm' : format='F'+sw+'.'+sd
	   'o' : format='O'+sw
	   'r' : format='I'+sw
	   's' : format='A'+sw
	   'u' : format='I'+sw
	   'x' : format='Z'+sw
	   else: begin
		print,'TAB_SPPTOFOR-- '+sppformat+' spp format not supported'
		retall
		end
	endcase
	return
end
</code>
    </div>
  </body>
</html>