<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:18 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>aitoff_grid.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="aitoff_grid.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       AITOFF_GRID</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Produce an overlay of latitude and longitude lines over a plot or image</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       The grid is plotted on the current graphics device. AITOFF_GRID </span>
<span class="comments">;       assumes that the ouput plot coordinates span the x-range of </span>
<span class="comments">;       -180 to 180 and the y-range goes from -90 to 90.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;</span>
<span class="comments">;       AITOFF_GRID [,DLONG,DLAT, LABEL=, /NEW, CHARTHICK=, CHARSIZE=, </span>
<span class="comments">;                     FONT=, _EXTRA=]</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;</span>
<span class="comments">;       DLONG   = Optional input longitude line spacing in degrees. If left</span>
<span class="comments">;                 out, defaults to 30.</span>
<span class="comments">;       DLAT    = Optional input latitude line spacing in degrees. If left</span>
<span class="comments">;                 out, defaults to 30.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORDS:</span>
<span class="comments">;</span>
<span class="comments">;       LABEL           = Optional keyword specifying that the latitude and</span>
<span class="comments">;                         longitude lines on the prime meridian and the</span>
<span class="comments">;                         equator should be labeled in degrees. If LABELS is</span>
<span class="comments">;                         given a value of 2, i.e. LABELS=2, then the longitude</span>
<span class="comments">;                         labels will be in hours instead of degrees.</span>
<span class="comments">;        CHARSIZE       = If /LABEL is set, then CHARSIZE specifies the size</span>
<span class="comments">;                         of the label characters (passed to XYOUTS)</span>
<span class="comments">;        CHARTHICK     =  If /LABEL is set, then CHARTHICK specifies the </span>
<span class="comments">;                         thickness of the label characters (passed to XYOUTS)</span>
<span class="comments">;       FONT          =   scalar font graphics keyword (-1,0 or 1) for text</span>
<span class="comments">;       /NEW          =   If this keyword is set, then AITOFF_GRID will create</span>
<span class="comments">;                         a new plot grid, rather than overlay an existing plot.</span>
<span class="comments">;</span>
<span class="comments">;       Any valid keyword to OPLOT such as COLOR, LINESTYLE, THICK can be </span>
<span class="comments">;       passed to AITOFF_GRID (though the _EXTRA facility) to to specify the</span>
<span class="comments">;       color, style, or thickness of the grid lines.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       Draws grid lines on current graphics device.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Create a labeled Aitoff grid of the Galaxy, and overlay stars at </span>
<span class="comments">;       specified Galactic longitudes, glong and latitudes, glat</span>
<span class="comments">;</span>
<span class="comments">;       IDL> aitoff_grid,/label,/new        ;Create labeled grid</span>
<span class="comments">;       IDL> aitoff, glong, glat, x,y      ;Convert to X,Y coordinates</span>
<span class="comments">;       IDL> plots,x,y,psym=2              ;Overlay "star" positions</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       AITOFF</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       If labeling in hours (LABEL=2) then the longitude spacing should be</span>
<span class="comments">;       a multiple of 15 degrees</span>
<span class="comments">;</span>
<span class="comments">; AUTHOR AND MODIFICATIONS:</span>
<span class="comments">;</span>
<span class="comments">;       J. Bloch        1.2     6/2/91</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Create default plotting coords, if needed   W. Landsman  August 2000</span>
<span class="comments">;       Added _EXTRA, CHARTHICK, CHARSIZE keywords  W. Landsman  March 2001</span>
<span class="comments">;       Several tweaks, plot only hours not minutes W. Landsman January 2002</span>
<span class="comments">;       Allow FONT keyword to be passed to XYOUTS.  T. Robishaw Apr. 2006</span>
<span class="comments">;-</span>
PRO AITOFF_GRID,DLONG,DLAT,LABEL=LABEL, NEW = new, _EXTRA= E, $
     CHARSIZE = charsize, CHARTHICK =charthick, FONT=font

        if  N_elements(dlong) EQ 0 then dlong = 30.0
        if  N_elements(dlat) EQ 0 then dlat = 30.0
        if  N_elements(font) EQ 0 then font = !p.font

<span class="comments">; If no plotting axis has been defined, then create a default one</span>

        new = keyword_set(new)
        if not new then new =  (!X.crange[0] EQ 0) and (!X.crange[1] EQ 0)
        if new then plot,[-180,180],[-90,90],/nodata,xsty=5,ysty=5
<span class="comments">;</span>
<span class="comments">;       Do lines of constant longitude</span>
<span class="comments">;</span>
        lat=findgen(181)-90
        lng=fltarr(181,/nozero)
        lngtot = long(180.0/dlong)

        for i=0,lngtot do begin
                replicate_inplace, lng, -180.0 + (i*dlong)
                aitoff,lng,lat,x,y
                oplot,x,y,_extra=e
                oplot,-x,y,_extra=e
        endfor
<span class="comments">;</span>
<span class="comments">;       Do lines of constant latitude</span>
<span class="comments">;</span>
        lng = findgen(361)-180.0
        lat = fltarr(361,/nozero)
        lattot=long(180.0/dlat)
        for i=1,lattot do begin
                replicate_inplace, lat, -90. + (i*dlat)
                aitoff,lng,lat,x,y
                oplot,x,y,_extra=e
         endfor
<span class="comments">;</span>
<span class="comments">;       Do labeling if requested</span>
<span class="comments">;</span>
        if keyword_set(label) then begin

<span class="comments">;</span>
<span class="comments">;       Label equator</span>
<span class="comments">;</span>
          if (!d.name eq 'PS') and (font eq 0) then hr = '!Uh!N' else hr='h'
             xoff = 2*dlong/30.
            for i=0,2*lngtot-1 do begin
                lng =  (180 + (i*dlong)) mod 360
                if (lng ne 0.0) and (lng ne 180.0) then begin
                    aitoff,lng,0.0,x,y
                    if label eq 1 then xyouts,x[0]+xoff,y[0]+1,$
                        strcompress(string(lng,format="(I4)"),/remove_all), $
                        charsize = charsize, charthick = charthick,font=font $
                    else begin
                         tmp = lng/15.
                         xyouts,round(x[0])+xoff,round(y[0])+1,string(tmp[0],$
                            format='(I2)') + hr, font=font,$
                            charsize = charsize, charthick = charthick
                    endelse
                endif
            endfor
<span class="comments">;</span>
<span class="comments">;       Label prime meridian</span>
<span class="comments">;</span>
            lat = -90 + (indgen(lattot-1)+1)*dlat
            aitoff,fltarr(lattot-1),lat,x,y
            slat = strtrim(round(lat),2)
            pos = where(lat GT 0, Npos)
            if Npos GT 0 then slat[pos] = '+' + slat[pos] 
            for i=0,lattot-2 do begin
                 xyouts,x[i]+2,y[i]+1, slat[i], font=font, $
                        charsize = charsize, charthick = charthick
            endfor
        endif

        return
end
</code>
    </div>
  </body>
</html>