<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:29 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>fdecomp.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="fdecomp.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="fdecomp:source"></a>pro fdecomp, filename, disk, dir, name, qual, version, OSfamily = osfamily
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     FDECOMP</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;     Routine to decompose file name(s) for any operating system.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     FDECOMP, filename, disk, dir, name, qual, [OSFamily = ]</span>
<span class="comments">;</span>
<span class="comments">; INPUT:</span>
<span class="comments">;     filename - string file name(s), scalar or vector</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;     All the output parameters will have the same number of elements as </span>
<span class="comments">;       input filename </span>
<span class="comments">;</span>
<span class="comments">;       disk - disk name, always '' on a Unix machine, scalar or vector string</span>
<span class="comments">;       dir - directory name, scalar or vector string</span>
<span class="comments">;       name - file name, scalar or vector string </span>
<span class="comments">;       qual - qualifier, set equal to the characters beyond the last "."</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;     OSFamily -  scalar string specifying the operating system, must be either</span>
<span class="comments">;             'Windows' or 'unix'.    If not supplied,</span>
<span class="comments">;             then !VERSION.OS_FAMILY is used to determine the OS.</span>
<span class="comments">; EXAMPLES:</span>
<span class="comments">;     Consider the following file names </span>
<span class="comments">;</span>
<span class="comments">;     unix:    file = '/itt/idl71/avg.pro' </span>
<span class="comments">;     Windows: file =  'd:\itt\idl71\avg.pro'</span>
<span class="comments">;       </span>
<span class="comments">;     then IDL> FDECOMP,  file, disk, dir, name, qual</span>
<span class="comments">;       will return the following</span>
<span class="comments">;</span>
<span class="comments">;                 Disk             Dir          Name        Qual    </span>
<span class="comments">;       Unix:      ''            '/itt/idl71/'  'avg'       'pro'   </span>
<span class="comments">;       Windows:    'd:'         \itt\idl71\    'avg'       'pro'   </span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;     (1) The period is removed between the name and qualifier </span>
<span class="comments">;     (2) Unlike the intrinsic FILE_BASENAME() and FILE_DIRNAME() functions,</span>
<span class="comments">;         one can use FDECOMP to decompose a Windows file name on a Unix machine</span>
<span class="comments">;         or a Unix filename on a Windows machine.</span>
<span class="comments">;</span>
<span class="comments">; ROUTINES CALLED:</span>
<span class="comments">;     None.</span>
<span class="comments">; HISTORY</span>
<span class="comments">;     version 1  D. Lindler  Oct 1986</span>
<span class="comments">;     Include VMS DECNET machine name in disk    W. Landsman  HSTX  Feb. 94</span>
<span class="comments">;     Converted to Mac IDL, I. Freedman HSTX March 1994          </span>
<span class="comments">;     Major rewrite to accept vector filenames V5.3   W. Landsman June 2000</span>
<span class="comments">;     Fix cases where disk name not always present  W. Landsman  Sep. 2000</span>
<span class="comments">;     Make sure version defined for Windows  W. Landsman April 2004</span>
<span class="comments">;     Include final delimiter in directory under Windows as advertised</span>
<span class="comments">;                W. Landsman   May 2006</span>
<span class="comments">;     Remove VMS support, W. Landsman    September 2006</span>
<span class="comments">;     Remove MacOS branch (same as Unix) W. Landsman  August 2009</span>
<span class="comments">;-</span>
<span class="comments">;--------------------------------------------------------</span>
<span class="comments">;</span>
  On_error,2                            <span class="comments">;Return to caller</span>
  compile_opt idl2

  if N_params() LT 2 then begin
     print, 'Syntax - FDECOMP, filename, disk, [dir, name, qual ] '
     return
  endif
    

  if ~keyword_set(osfamily) then osfamily = !Version.OS_Family
       st = filename
     disk = st
     replicate_inplace,disk,''
     dir = disk
     qual = disk


 if OSFAMILY EQ "Windows" then begin 
 
     lpos = strpos( st, ':')                 <span class="comments">; DOS diskdrive (i.e. c:)</span>
     good = where(lpos GT 0, Ngood) 
     if Ngood GT 0 then begin
         stg = st[good]
         lpos = reform( lpos[good], 1, Ngood)
         disk[good] = strmid( stg, 0, lpos+1) 
         st[good] = strmid(stg,lpos+1 )
     endif

<span class="comments">;  Search the path name (i.e. \dos\idl\) and locate last backslash</span>

     lpos = strpos(st,'\',/reverse_search)
     good = where(lpos Gt 0, Ngood)

 
 endif ELSE begin                 <span class="comments">;Unix</span>

 
<span class="comments">; Unix directory name ends at last slash</span>

    lpos = strpos(st,'/',/reverse_search)
    good = where(lpos GE 0, Ngood)
 
  endelse
    
  if Ngood GT 0 then begin      <span class="comments">;Extract directory name if present</span>
          stg = st[good] 
          lpos = reform( lpos[good],1, Ngood )
 
             dir[good] = strmid(stg,0, lpos+1) 
             st[good] = strmid(stg,lpos+1 )
    endif
  
<span class="comments">; get  name and qualifier (extension)...qual is optional</span>

    lpos = strpos(st,'.',/reverse_search)
    good = where(lpos GE 0, Ngood)
    name = st

    if Ngood GT 0 then begin
             stg = st[good]
             lpos = reform(lpos[good], 1, Ngood)
 
             name[good] = strmid(stg,0,lpos )
             qual[good] = strmid(stg,lpos+1 )
     endif


 return
  end
</code>
    </div>
  </body>
</html>