<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:10 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tvlist.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tvlist.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tvlist:source"></a>pro tvlist, image, dx, dy, TEXTOUT = textout, OFFSET = offset, ZOOM = ZOOM
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TVLIST</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Cursor controlled listing of image pixel values in a window. </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	TVLIST, [image, dx, dy, TEXTOUT=, OFFSET= , ZOOM= ]</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;	IMAGE - Array containing the image currently displayed on the screen.</span>
<span class="comments">;		If omitted, the byte pixel intensities are read from the TV</span>
<span class="comments">;		If the array does not start at position (0,0) on the window then</span>
<span class="comments">;		the OFFSET keyword should be supplied.</span>
<span class="comments">;</span>
<span class="comments">;	DX     -Integer scalar giving the number of pixels in the X direction </span>
<span class="comments">;		to be displayed.  If omitted then DX = 18 for byte images, and </span>
<span class="comments">;		DX = 14 for integer images.  TVLIST will display REAL data </span>
<span class="comments">;		with more significant figures if more room is availble to </span>
<span class="comments">;		print.  </span>
<span class="comments">;</span>
<span class="comments">;	DY    - Same as DX, but in Y direction.  If omitted, then DY = DX </span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORDS:</span>
<span class="comments">;      OFFSET - 2 element vector giving the location of the image pixel (0,0) </span>
<span class="comments">;		on the window display.   OFFSET can be positive (e.g if the </span>
<span class="comments">;		image is centered in a larger window) or negative (e.g. if the</span>
<span class="comments">;		only the central region of an image much larger than the window</span>
<span class="comments">;		is being displayed. </span>
<span class="comments">;		Default value is [0,0], or no offset.</span>
<span class="comments">;	ZOOM - Scalar specifying the magnification of the window with respect</span>
<span class="comments">;		to the image variable.    Use, for example, if image has been</span>
<span class="comments">;		REBINed before display.</span>
<span class="comments">;	TEXTOUT - Optional keyword that determines output device.</span>
<span class="comments">;		The following dev/file is opened for output.</span>
<span class="comments">;</span>
<span class="comments">;		textout=1	TERMINAL using /more option (default)</span>
<span class="comments">;		textout=2	TERMINAL without /more option</span>
<span class="comments">;		textout=3	&lt;program>.prt  </span>
<span class="comments">;		textout=4	laser.tmp</span>
<span class="comments">;		textout=5       user must open file</span>
<span class="comments">;		textout=7	Append to an existing &lt;program>.prt file if it</span>
<span class="comments">;				exists</span>
<span class="comments">;		textout = filename (default extension of .prt)</span>
<span class="comments">;</span>
<span class="comments">;	If TEXTOUT > 3 or set to a filename, then TVLIST will prompt for a </span>
<span class="comments">;	brief description to be included in the output file</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	None.</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;	Program prompts user to place cursor on region of interest in </span>
<span class="comments">;	image display.  Corresponding region of image is then displayed at</span>
<span class="comments">;	the terminal.   A compression factor between the image array and the</span>
<span class="comments">;	displayed image is determined using the ratio of image sizes.  If </span>
<span class="comments">;	necessary, TVLIST will divide all pixel values in a REAL*4 image by a </span>
<span class="comments">;	(displayed) factor of 10^n (n=1,2,3...) to make a pretty format.</span>
<span class="comments">;</span>
<span class="comments">; SYSTEM VARIABLE:</span>
<span class="comments">;	The nonstandard system variable !TEXTOUT is used as an alternative to</span>
<span class="comments">;	the keyword TEXTOUT.   The procedure ASTROLIB can be used to define</span>
<span class="comments">;	!TEXTOUT (and !TEXTUNIT) if necessary.</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;	TVLIST may not be able to correctly format all pixel values if the</span>
<span class="comments">;	dynamic range near the cursor position is very large.</span>
<span class="comments">;</span>
<span class="comments">;       For the cursor to work under Mac OSX  the "Click-through Inactive </span>
<span class="comments">;       Windows" setting the in X11:Preferences:Window needs to be enabled.</span>
<span class="comments">; PROCEDURES CALLED:</span>
<span class="comments">;	IMLIST, UNZOOM_XY</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;	Written by rhc, SASC Tech, 3/14/86.</span>
<span class="comments">;	Added textout keyword option, J. Isensee, July, 1990</span>
<span class="comments">;	Check for readable pixels     W. Landsman   May 1992</span>
<span class="comments">;	Use integer format statement from F_FORMAT    W. Landsman   Feb 1994</span>
<span class="comments">;	Added OFFSET, ZOOM keywords  W. Landsman   Mar 1996</span>
<span class="comments">;	More intelligent formatting of longword, call TEXTOPEN with /STDOUT</span>
<span class="comments">;		W. Landsman  April, 1996</span>
<span class="comments">;	Added check for valid dx value  W. Landsman   Mar 1997</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Major rewrite to call IMLIST, recognize new integer data types</span>
<span class="comments">;                                           W. Landsman Jan 2000</span>
<span class="comments">;       Remove all calls to !TEXTUNIT   W. Landsman   Sep 2000</span>
<span class="comments">;       Always call UNZOOM_XY for MOUSSE compatibility  W. Landsman Sep. 2004</span>
<span class="comments">;-</span>
 On_error,2
 Compile_opt idl2

 npar = N_params()

 if npar GE 2 then $
    if N_elements( dx) NE 1 then $
          message, 'ERROR - Second parameter (format width) must be a scalar'

 if npar EQ 0 then begin 	<span class="comments">;Read pixel values from TV</span>

        if (!D.FLAGS and 128) NE 128 then message, $
             'ERROR -- Unable to read pixels from current device ' + !D.NAME
	message,'No image array supplied, pixel values read from TV',/INF 
	type = 1		<span class="comments">;Byte format</span>

 endif else begin

	sz = size(image)
	if (sz[0] LT 2) or (sz[sz[0]+2] NE sz[1]*sz[2]) then $
		message,'Image array (first parameter) not 2-dimensional'
    	type = sz[sz[0]+1]	     <span class="comments">;Byte or Integer image?</span>

 endelse 

 if (!D.FLAGS AND 256) EQ 256 THEN wshow,!D.WINDOW

 if ( npar GT 0 ) then begin 	<span class="comments">;get X and Y dimensions of the image</span>
	xdim = sz[1] - 1 
	ydim = sz[2] - 1 
 endif else begin		<span class="comments">;dimensions of TV display</span>
	xdim = !d.x_vsize
	ydim = !d.y_vsize
 endelse

 if N_elements(dx) EQ 0 then  $  <span class="comments">;Use default print size? </span>
    if type EQ 1 then dx = 18 else dx = 15 else $
    if (dx GT 38) then begin 
	message, 'ERROR - X Pixel Width (second parameter) value of ' + $
		strtrim(dx,2) + ' is too large',/CON
    return
 endif

 tvcrs, 1                                    <span class="comments">;Make sure cursor is on</span>
 print, 'Put the cursor on the area you want to list; press any mousse button'
 if Npar GT 0 then begin
   cursor, xtv, ytv, /WAIT, /DEVICE
   unzoom_xy, xtv, ytv, xim, yim, OFFSET=offset, ZOOM=zoom 
   xim = fix(xim+0.5)
   yim = fix(yim+0.5)
 endif else cursor, xim, yim, /WAIT, /DEVICE

 if npar LT 3 then dy = dx
<span class="comments">; Don't try to print outside the image</span>
  xmax = (xim + dx/2) &lt<span class="comments">; xdim</span>
  xmin = (xim - dx/2) > 0 
  ymax = (yim + dy/2) &lt<span class="comments">; ydim</span>
  ymin = (yim - dy/2) > 0 

 dx = xmax - xmin + 1 & dy = ymax - ymin + 1

 if xmin GE xmax then $
    message,'ERROR - The cursor is off the image in the x-direction'
 if ymin GE ymax then $
    message,'ERROR - The cursor is off the image in the y-direction'


 if npar EQ 0 then begin 
    image = tvrd( xmin,ymin,dx,dy)
    xim = dx/2
    yim = dy/2
    zoffset = [xmin,ymin]
 endif

 imlist,image,xim,yim,dx=dx,dy=dy,textout=textout,offset=zoffset
 
 return
 end
</code>
    </div>
  </body>
</html>