<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:20 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>boost_array.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="boost_array.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">	PRO BOOST_ARRAY, DESTINATION, APPEND
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	BOOST_ARRAY</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Append one array onto a destination array</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	Add array APPEND to array DESTINATION, allowing the dimensions of</span>
<span class="comments">;	DESTINATION to adjust to accommodate it.  If both input arrays have the</span>
<span class="comments">;	same number of dimensions, then the output array will have one</span>
<span class="comments">;	additional dimension.  Otherwise, the last dimension of DESTINATION</span>
<span class="comments">;	will be incremented by one.</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;	Utility</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	BOOST_ARRAY, DESTINATION, APPEND</span>
<span class="comments">; INPUT:</span>
<span class="comments">;	DESTINATION	= Array to be expanded.</span>
<span class="comments">;	APPEND		= Array to append to DESTINATION.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	DESTINATION	= Expanded output array.</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;	DESTINATION and APPEND have to be either both of type string or both of</span>
<span class="comments">;	numerical types.</span>
<span class="comments">;</span>
<span class="comments">;	APPEND cannot have more dimensions than DESTINATION.</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTOBY:</span>
<span class="comments">;	Written Aug'88 (DMZ, ARC)</span>
<span class="comments">;	Modified Sep'89 to handle byte arrays (DMZ)</span>
<span class="comments">;	Modifed to version 2, Paul Hick (ARC), Feb 1991</span>
<span class="comments">;	Removed restriction to 2D arrays, William Thompson (ARC), Feb 1992.</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
<span class="comments">;</span>
	ON_ERROR, 2			<span class="comments">;On error, return to caller</span>
<span class="comments">;</span>
<span class="comments">;  Check the number of parameters.</span>
<span class="comments">;</span>
	IF N_PARAMS() NE 2 THEN MESSAGE,	$
		'Syntax:  BOOST_ARRAY, DESTINATION, APPEND'
<span class="comments">;</span>
<span class="comments">;  Make sure APPEND is defined.</span>
<span class="comments">;</span>
	IF N_ELEMENTS(APPEND) EQ 0 THEN MESSAGE,	$
		'Array to be appended (APPEND) not defined'
<span class="comments">;</span>
<span class="comments">;  If DESTINATION is not defined, then set it equal to APPEND.</span>
<span class="comments">;</span>
	IF N_ELEMENTS(DESTINATION) EQ 0 THEN BEGIN
		DESTINATION = APPEND
		RETURN
	ENDIF
<span class="comments">;</span>
<span class="comments">;  Get the array types and dimensions of DESTINATION and APPEND.</span>
<span class="comments">;</span>
	SD = SIZE(DESTINATION)
	SA = SIZE(APPEND)
	D_NDIM = SD[0]
	A_NDIM = SA[0]
	IF D_NDIM EQ 0 THEN D_DIM = 1 ELSE D_DIM = SD[1:D_NDIM]
	IF A_NDIM EQ 0 THEN A_DIM = 1 ELSE A_DIM = SA[1:A_NDIM]
	D_TYPE = SD[N_ELEMENTS(SD)-2]
	A_TYPE = SA[N_ELEMENTS(SA)-2]
<span class="comments">;</span>
<span class="comments">;  Treat scalars as one-dimensional arrays.</span>
<span class="comments">;</span>
	D_NDIM = D_NDIM > 1
	A_NDIM = A_NDIM > 1
<span class="comments">; </span>
<span class="comments">;  Check to see if both arrays are of type string or numeric.</span>
<span class="comments">;</span>
	IF D_TYPE EQ 7 THEN D_STRING = 1  ELSE D_STRING = 0
	IF A_TYPE EQ 7 THEN A_STRING = 1  ELSE A_STRING = 0
	IF D_STRING NE A_STRING THEN MESSAGE,	$
		'Data arrays should be either both string or both non-string'
<span class="comments">;</span>
<span class="comments">;  Calculate the number of dimensions in the output array.  If both arrays have</span>
<span class="comments">;  the same number of dimensions, then create a new array with an extra</span>
<span class="comments">;  dimension of two.  Otherwise, make sure that DESTINATION has more dimensions</span>
<span class="comments">;  than APPEND.</span>
<span class="comments">;</span>
	IF D_NDIM EQ A_NDIM THEN BEGIN
		R_DIM = [D_DIM > A_DIM, 2]
	END ELSE IF D_NDIM LT A_NDIM THEN BEGIN
		MESSAGE,'APPEND has more dimensions than DESTINATION'
<span class="comments">;</span>
<span class="comments">;  Otherwise, merge the dimensions of DESTINATION and APPEND, and add one to</span>
<span class="comments">;  the final dimension.</span>
<span class="comments">;</span>
	END ELSE BEGIN
		R_DIM = D_DIM
		FOR I = 0,A_NDIM-1 DO R_DIM[I] = D_DIM[I] > A_DIM[I]
		R_DIM[D_NDIM-1] = R_DIM[D_NDIM-1] + 1
	ENDELSE
<span class="comments">;</span>
<span class="comments">;  Create the output array with the correct number of elements, and the greater</span>
<span class="comments">;  of the types of DESTINATION and APPEND.</span>
<span class="comments">;</span>
	OUTPUT = MAKE_ARRAY(DIMENSION=R_DIM, TYPE=(D_TYPE > A_TYPE))
<span class="comments">;</span>
<span class="comments">;  Store DESTINATION in the output array.</span>
<span class="comments">;</span>
	R_NDIM = N_ELEMENTS(R_DIM)
	CASE R_NDIM OF
		2:  OUTPUT[0,0] = DESTINATION
		3:  OUTPUT[0,0,0] = DESTINATION
		4:  OUTPUT[0,0,0,0] = DESTINATION
		5:  OUTPUT[0,0,0,0,0] = DESTINATION
		6:  OUTPUT[0,0,0,0,0,0] = DESTINATION
		7:  OUTPUT[0,0,0,0,0,0,0] = DESTINATION
	ENDCASE
<span class="comments">;</span>
<span class="comments">;  Add APPEND at the end.</span>
<span class="comments">;</span>
	LAST = R_DIM[R_NDIM-1] - 1
	CASE R_NDIM OF
		2:  OUTPUT[0,LAST] = APPEND
		3:  OUTPUT[0,0,LAST] = APPEND
		4:  OUTPUT[0,0,0,LAST] = APPEND
		5:  OUTPUT[0,0,0,0,LAST] = APPEND
		6:  OUTPUT[0,0,0,0,0,LAST] = APPEND
		7:  OUTPUT[0,0,0,0,0,0,LAST] = APPEND
	ENDCASE
<span class="comments">;</span>
<span class="comments">;  Replace DESTINATION with OUTPUT, and return.</span>
<span class="comments">;</span>
	DESTINATION = OUTPUT
	RETURN
	END
</code>
    </div>
  </body>
</html>