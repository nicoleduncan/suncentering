<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:03 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>strnumber.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="strnumber.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="strnumber:source"></a>function strnumber, st, val, hex = hexflg, NaN = nan, L64 = l64
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      STRNUMBER()</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;      Function to determine if a string is a valid numeric value.</span>
<span class="comments">;</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;      A string is considered a valid numeric value if IDL can convert it</span>
<span class="comments">;      to a numeric variable without error.    </span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      result = strnumber( st, [val, /HEX] )</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;      st - any IDL scalar string</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;      1 is returned as the function value if the string st has a</span>
<span class="comments">;      valid numeric value, otherwise, 0 is returned.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL OUTPUT:</span>
<span class="comments">;      val - (optional) value of the string. double precision unless /L64 is set</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;       /HEX - If present and nonzero, the string is treated as a hexadecimal</span>
<span class="comments">;             longword integer.</span>
<span class="comments">;       /L64 - If present and nonzero, the val output variable is returned</span>
<span class="comments">;              as a 64 bit integer.    This to ensure that precision is not       </span>
<span class="comments">;              lost when returning a large 64 bit integer as double precision.</span>
<span class="comments">;              This keyword has no effect on the function result.</span>
<span class="comments">;       /NAN - if set, then the value of an empty string is returned as NaN,</span>
<span class="comments">;              by default the returned value is 0.0d.     In either case,</span>
<span class="comments">;              an empty string is considered a valid numeric value.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLES:</span>
<span class="comments">;      IDL> res = strnumber('0.2d', val)</span>
<span class="comments">;           returns res=1 (a valid number), and val = 0.2000d</span>
<span class="comments">;              </span>
<span class="comments">; NOTES:</span>
<span class="comments">;      (1) STRNUMBER was modified in August 2006 so that an empty string is </span>
<span class="comments">;      considered a valid number.   Earlier versions of strnumber.pro did not </span>
<span class="comments">;      do this because in very early (pre-V4.0) versions of IDL</span>
<span class="comments">;      this could corrupt the IDL session.</span>
<span class="comments">;</span>
<span class="comments">;       (2) STRNUMBER will return a string such as '23.45uyrg' as a valid </span>
<span class="comments">;      number (=23.45) since this is how IDL performs the type conversion.  If</span>
<span class="comments">;      you want a stricter definition of valid number then use the VALID_NUM()</span>
<span class="comments">;      function.</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;      version 1  By D. Lindler Aug. 1987</span>
<span class="comments">;      test for empty string, W. Landsman          February, 1993</span>
<span class="comments">;      Hex keyword added.  MRG, RITSS, 15 March 2000.</span>
<span class="comments">;      An empty string is a valid number   W. Landsman    August 2006</span>
<span class="comments">;      Added /NAN keyword  W. Landsman August 2006</span>
<span class="comments">;      Added /L64 keyword W. Landsman  Feb 2010</span>
<span class="comments">;-</span>
 compile_opt idl2
 if N_params() EQ 0 then begin
      print,'Syntax - result = strnumber( st, [val, /HEX, /NAN] )'
      return, 0
 endif

 newstr = strtrim( st )
 if keyword_set(NAN) then if newstr EQ '' then begin
        val = !VALUES.D_NAN
	return, 1
  endif 	

 On_IOerror, L1                 <span class="comments">;Go to L1 if conversion error occurs</span>

  If ~keyword_set(hexflg) Then Begin
   val = double( newstr )
 EndIf Else Begin
   val = 0L
   reads, newstr, val, Format="(Z)"
 EndElse

 if keyword_set(L64) then val = long64( newstr) 
 return, 1                      <span class="comments">;No conversion error</span>

 L1: return, 0                  <span class="comments">;Conversion error occured</span>

 end
 
</code>
    </div>
  </body>
</html>