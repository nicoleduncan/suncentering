<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:57 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>qdcb_grid.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="qdcb_grid.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	QDCB_GRID</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Produce an overlay of latitude and longitude lines over a plot or image</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	Grid is plotted on the current graphics device assuming that the </span>
<span class="comments">;	current plot is a map  in the so called quad cube projection. The </span>
<span class="comments">;	output plot range is assumed to go from 7.0 to -1.0 on the X axis and </span>
<span class="comments">;	-3.0 to 3.0 on the Y axis. Within this plotting space, the quad cube </span>
<span class="comments">;	faces are laid out as follows (X=Empty, Astronomical Layout shown - </span>
<span class="comments">;	X axis can be swapped for geographic maps):</span>
<span class="comments">;</span>
<span class="comments">;	    3.0_</span>
<span class="comments">;		XXX0</span>
<span class="comments">;		4321</span>
<span class="comments">;	   -3.0_XXX5</span>
<span class="comments">;		|  |</span>
<span class="comments">;	      7.0  -1.0</span>
<span class="comments">;</span>
<span class="comments">; CATEGORY:</span>
<span class="comments">;	Mapping Support Routine</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;</span>
<span class="comments">;	QDCB_GRID,[,DLONG,DLAT,[LINESTYLE=N,/LABELS]</span>
<span class="comments">;</span>
<span class="comments">; INPUT PARAMETERS:</span>
<span class="comments">;</span>
<span class="comments">;	DLONG	= Optional input longitude line spacing in degrees. If left</span>
<span class="comments">;		  out, defaults to 30.</span>
<span class="comments">;</span>
<span class="comments">;	DLAT    = Optional input lattitude line spacing in degrees. If left</span>
<span class="comments">;		  out, defaults to 30.</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD PARAMETERS:</span>
<span class="comments">;</span>
<span class="comments">;	LINESTYLE	= Optional input integer specifying the linestyle to</span>
<span class="comments">;			  use for drawing the grid lines.</span>
<span class="comments">;</span>
<span class="comments">;	LABELS		= Optional keyword specifying that the lattitude and</span>
<span class="comments">;			  longitude lines on the prime meridian and the</span>
<span class="comments">;			  equator should be labeled in degrees. If LABELS is</span>
<span class="comments">;			  given a value of 2, i.e. LABELS=2, then the longitude</span>
<span class="comments">;			  labels will be in hours and minutes instead of</span>
<span class="comments">;			  degrees.</span>
<span class="comments">;</span>
<span class="comments">; OUTPUT PARAMETERS:</span>
<span class="comments">;</span>
<span class="comments">;	NONE</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;</span>
<span class="comments">;	Uses WCSSPH2XY.PRO with projection 23 ("QSC" - COBE Quadrilatieralized</span>
<span class="comments">;	Spherical Cube) to compute positions of grid lines and labels.</span>
<span class="comments">;</span>
<span class="comments">; COPYRIGHT NOTICE:</span>
<span class="comments">;</span>
<span class="comments">;	Copyright 1991, The Regents of the University of California. This</span>
<span class="comments">;	software was produced under U.S. Government contract (W-7405-ENG-36)</span>
<span class="comments">;	by Los Alamos National Laboratory, which is operated by the</span>
<span class="comments">;	University of California for the U.S. Department of Energy.</span>
<span class="comments">;	The U.S. Government is licensed to use, reproduce, and distribute</span>
<span class="comments">;	this software. Neither the Government nor the University makes</span>
<span class="comments">;	any warranty, express or implied, or assumes any liability or</span>
<span class="comments">;	responsibility for the use of this software.</span>
<span class="comments">;</span>
<span class="comments">; AUTHOR:</span>
<span class="comments">;</span>
<span class="comments">;	Jeff Bloch</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATIONS/REVISION LEVEL:</span>
<span class="comments">;</span>
<span class="comments">;	%I%	%G%</span>
<span class="comments">;	Use WCSSPH2XY instead of QDCB   Wayne Landsman   December 1994</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>

PRO QDCB_GRID,DLONG,DLAT,LINESTYLE=N,LABELS=LABELS

	if not keyword_set(n) then n=0
	if n_params() lt 2 then dlat = 30.0
	if n_params() lt 1 then dlong = 30.0
<span class="comments">;</span>
<span class="comments">;	Set up offsets to cube face panes</span>
<span class="comments">;</span>
	xfaceoff = [0.0,0.0,2.0,4.0,6.0,0.0]
	yfaceoff = [2.0,0.0,0.0,0.0,0.0,-2.0]
	face = 0
<span class="comments">;</span>
<span class="comments">;	Do lines of constant longitude</span>
<span class="comments">;</span>
	lat=findgen(180)-90
	lng=fltarr(180)
	lngtot = long(360.0/dlong)
	for i=0,lngtot do begin
		lng[*]=-180.0+(i*dlong)
                wcssph2xy, lng, lat, x, y, 23,face = face,north=0.,south=0.
		x = x/45. & y = y/45.
		for k=0,5 do begin
		    j=where(face eq k,nf)
		    if nf ne 0 then $
		      oplot,x[j]+xfaceoff[k],$
			y[j]+yfaceoff[k],linestyle=n
		endfor
	endfor
<span class="comments">;</span>
<span class="comments">;	Do lines of constant latitude</span>
<span class="comments">;</span>
	lng=findgen(360)-45.0
	lat=fltarr(360)
	lattot=long(180.0/dlat)
	for i=1,lattot do begin
		lat[*]=-90+(i*dlat)
		wcssph2xy, lng, lat, x, y, 23,face = face,north=0.,south=0.
		x = x/45. & y = y/45.
                for k=0,5 do begin
                    j=where(face eq k,nf) 
                    if nf ne 0 then $
                      oplot,x[j]+xfaceoff[k],$
                        y[j]+yfaceoff[k],linestyle=n
                endfor
	endfor

<span class="comments">;</span>
<span class="comments">;	Do labeling if requested</span>
<span class="comments">;</span>
	if keyword_set(labels) then begin
<span class="comments">;</span>
<span class="comments">;	Label equator</span>
<span class="comments">;</span>
	    for i=0,lngtot-1 do begin
		lng = (i*dlong)
		if lng ne 0.0 then begin
                    wcssph2xy, lng, 0.0, x, y, 23, face = face,north=0.,south=0.
		    x = x/45. & y = y/45.
		    if labels eq 1 then xyouts,x[0]+xfaceoff[face],$
					y[0]+yfaceoff[face],noclip=0,$
			strcompress(string(lng,format="(I4)"),/remove_all) $
		    else begin
		        tmp=sixty(lng*23.0/360.0)
		        xyouts,x[0]+xfaceoff[face[0]],y[0]+yfaceoff[face[0]],$
			    noclip=0,strcompress(string(tmp[0],tmp[1],$
			    format='(I2,"h",I2,"m")'),/remove_all),alignment=0.5
		    endelse
		endif
	    endfor
<span class="comments">;</span>
<span class="comments">;	Label prime meridian</span>
<span class="comments">;</span>
	    for i=1,lattot-1 do begin
		lat=-90+(i*dlat)
                wcssph2xy, 0.0, lat, x, y, 23, face = face
		x = x/45. & y = y/45.
		xyouts,x[0]+xfaceoff[face[0]],y[0]+yfaceoff[face[0]],noclip=0,$
			strcompress(string(lat,format="(I4)"),/remove_all)
	    endfor
	endif
	return
END
</code>
    </div>
  </body>
</html>