<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:04 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>sxhmake.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="sxhmake.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">Pro sxhmake,data,groups,header
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       SXHMAKE</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Create a basic STSDAS header file from an IDL data array</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       sxhmake, Data, Groups, Header</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       Data = IDL data array of the same type, dimensions and</span>
<span class="comments">;               size as are to be written to file.</span>
<span class="comments">;       Groups = # of groups to be written.</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       Header = String array containing ST header file.</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;       Call sxhmake to create a header file.  Then call sxopen to</span>
<span class="comments">;       open output image, followed by sxwrite to write the data.</span>
<span class="comments">;       If you do not plan to change the header created by sxhmake</span>
<span class="comments">;       before calling sxopen, you might consider using sxmake which</span>
<span class="comments">;       does both steps.</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Don Lindler  Feb 1990 modified from SXMAKE by DMS, July, 1983.</span>
<span class="comments">;       D. Lindler April 90  Converted to new VMS IDL</span>
<span class="comments">;       M. Greason May 1990  Header creation bugs eliminated.</span>
<span class="comments">;       W. Landsman Aug 1997 Use SYSTIME() instead of !STIME for V5.0 </span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Recognize unsigned datatype    January 2000   W. Landsman </span>
<span class="comments">;-</span>
<span class="comments">;-----------------------------------------------------------------------------</span>
 On_error,2
 if N_Params() LT 3 then begin
     print,'Syntax - sxhmake, Data, Groups, Header'
     return
 endif

        s = size(data)                  <span class="comments">;obtain size of array.</span>
        stype = s[s[0]+1]               <span class="comments">;type of data.</span>
        if (groups eq 0) and (stype LT 6) then $
                sxaddpar,header,'simple','T','Written by IDL:  '+ systime() $
            else $
                sxaddpar,header,'simple','F','Written by IDL:  '+ systime()

        case stype of
0:      message,'Data parameter is not defined'
7:      message,"Can't write strings to ST files'
1:      begin& bitpix= 8 & d='INTEGER*1' & endcase
2:      begin& bitpix= 16 & d = 'INTEGER*2' & endcase
4:      begin& bitpix= 32 & d='REAL*4' & endcase
3:      begin& bitpix= 32 & d='INTEGER*4' & endcase
5:      begin& bitpix= 64 & d='REAL*8' & endcase
6:      begin& bitpix= 64 & d='COMPLEX*8' & endcase
12:     begin & bitpix=16 & d='UNSIGNED*2' & endcase
13:     begin & bitpix=32 & d='UNSIGNED*4' & endcase
else:   message,'ERROR -- Unrecoginized input data type'
        endcase
        sxaddpar,header,'BITPIX',bitpix
        sxaddpar,header,'NAXIS',S[0]    <span class="comments">;# of dimensions</span>
        for i=1,s[0] do sxaddpar,header,'NAXIS'+strtrim(i,2),s[i]
        sxaddpar,header,'DATATYPE',d,'Type of data'
        Get_date,dte                    <span class="comments">;Get current date as CCYY-MM-DD</span>
        sxaddpar,header,'DATE',dte
        if groups eq 0 then $           <span class="comments">;true if not group fmt.</span>
                sxaddpar,header,'GROUPS','F','No groups' $
           else begin                   <span class="comments">;make group params.</span>
                sxaddpar,header,'GROUPS','T'
                sxaddpar,header,'PCOUNT',0
                sxaddpar,header,'GCOUNT',groups
                sxaddpar,header,'PSIZE',0,'# of bits in parm blk'
           endelse
        return
end
</code>
    </div>
  </body>
</html>