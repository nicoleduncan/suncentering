<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:58 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>randomp.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="randomp.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="randomp:source"></a>pro randomp,x,pow,n,range_x=range_x,seed=s
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       RANDOMP</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Generates an array of random numbers distributed as a power law.</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       RANDOMP, X, Pow, N, [ RANGE_X = [low,high], SEED= ]'</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       Pow:  Exponent of power law.</span>
<span class="comments">;               The pdf of X is f_X(x) = A*x^pow, low &lt;= x &lt;= high</span>
<span class="comments">;               ASTRONOMERS PLEASE NOTE:  </span>
<span class="comments">;               pow is little gamma  = big gamma - 1 for stellar IMFs.</span>
<span class="comments">;       N:    Number of elements in generated vector.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD PARAMETER:</span>
<span class="comments">;       RANGE_X:  2-element vector [low,high] specifying the range of </span>
<span class="comments">;               output X values; the default is [5, 100].</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT-OUTPUT KEYWORD PARAMETER:</span>
<span class="comments">;       SEED:    Seed value for RANDOMU function.    As described in the </span>
<span class="comments">;               documentation for RANDOMU, the value of SEED is updated on </span>
<span class="comments">;               each call to RANDOMP, and taken from the system clock if not</span>
<span class="comments">;               supplied.   This keyword can be used to have RANDOMP give </span>
<span class="comments">;               identical results on different runs.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       X:    Vector of random numbers, distributed as a power law between</span>
<span class="comments">;               specified range</span>
<span class="comments">; PROCEDURE:  </span>
<span class="comments">;       "Transformation Method" for random variables is described in Bevington </span>
<span class="comments">;       & Robinson, "Data Reduction & Error Analysis for Physical Sciences", 2nd</span>
<span class="comments">;       Edition (McGraw-Hill, 1992). p. 83.</span>
<span class="comments">;       Output of RANDOMU function is transformed to power-law</span>
<span class="comments">;       random variable.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Create a stellar initial mass function (IMF) with 10000 stars</span>
<span class="comments">;       ranging from 0.5 to 100 solar masses and a Salpeter slope.  Enter:</span>
<span class="comments">;</span>
<span class="comments">;       RANDOMP,MASS,-2.35,10000,RANGE_X=[0.5,100]</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       Versions 5.1.1 and V5.2 of IDL have a bug in RANDOMU such that the SEED</span>
<span class="comments">;       value is initialized to the same value at the start of each session,</span>
<span class="comments">;       rather than being initialized by the system clock.    RANDOMP will be</span>
<span class="comments">;       affected in a similar manner.</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Written by R. S. Hill, Hughes STX, July 13, 1995</span>
<span class="comments">;       July 14, 1995   SEED keyword added at Landsman's suggestion.</span>
<span class="comments">;                    Documentation converted to standard format.  RSH</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
 On_error,2

 if N_params() LT 3 then begin
   print,'Syntax - RANDOMP, x, pow, n, [ RANGE_X = [low,high], SEED= ]'
   return
 endif

 if N_elements(range_x) lt 1 then range_x=[5,100]
 if N_elements(range_x) ne 2 then begin
   message,'Error - RANGE_X keyword must be a 2 element vector',/CON
   return
 endif

 pow1 = pow + 1.0
 lo = range_x[0] & hi = range_x[1]
 if lo GT hi then begin
  temp=lo & lo=hi & hi=tmp
 endif

 r = randomu(s, n )
 if pow NE -1.0 then begin
   norm = 1.0d0/(hi^pow1 - lo^pow1)
   expo = alog10(r/norm + lo^pow1)/pow1
   x = 10.0^expo
 endif else begin
   norm = 1.0d0/(alog(hi) - alog(lo))
   x = exp(r/norm + alog(lo))
 endelse

 return
 end
</code>
    </div>
  </body>
</html>