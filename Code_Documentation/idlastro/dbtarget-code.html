<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:27 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dbtarget.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dbtarget.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="dbtarget:source"></a>function dbtarget, target, radius, sublist,SILENT=silent, $
                 TO_B1950 = to_B1950, DIS = dis
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      DBTARGET</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;      Find sources in a database within specified radius of specified target</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;      Uses QuerySimbad to translate target name to RA and Dec, and then uses</span>
<span class="comments">;      DBCIRCLE() to find any entries within specified radius.   Database must </span>
<span class="comments">;      include items named 'RA' (in hours) and 'DEC' (in degrees) and must </span>
<span class="comments">;      have previously been opened with DBOPEN</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     list = DBTARGET(target, [radius, sublist, /SILENT, DIS= ,/TO_B1950 ] )   </span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;      TARGET - A scalar string giving an astronomical target name, which </span>
<span class="comments">;          will be  translated into J2000 celestial coordinates by QuerySimbad </span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;       RADIUS - Radius of the search field in arc minutes, scalar.</span>
<span class="comments">;                Default is 5 arc minutes</span>
<span class="comments">;       SUBLIST - Vector giving entry numbers in currently opened database</span>
<span class="comments">;               to be searched.  Default is to search all entries</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;     LIST - Vector giving entry numbers in the currently opened catalog</span>
<span class="comments">;            which have positions within the specified search circle</span>
<span class="comments">;            LIST is set to -1 if no sources fall within the search circle</span>
<span class="comments">;            !ERR is set to the number sources found.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL OUTPUT</span>
<span class="comments">;       DIS -  The distance in arcminutes of each entry specified by LIST</span>
<span class="comments">;               to the search center specified by the target.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD INPUT:</span>
<span class="comments">;       /SILENT - If this keyword is set, then DBTARGET will not print the </span>
<span class="comments">;               number of entries found at the terminal</span>
<span class="comments">;       /TO_B1950 - If this keyword is set, then the SIMBAD J2000 coordinates </span>
<span class="comments">;               are converted to B1950 before searching the database</span>
<span class="comments">;               NOTE: The user must determine on his own whether the database</span>
<span class="comments">;               is in B1950 or J2000 coordinates.</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS;</span>
<span class="comments">;       The database must have items 'RA' (in hours) and 'DEC' (in degrees).</span>
<span class="comments">;       Alternatively, the database could have items RA_OBJ and DEC_OBJ </span>
<span class="comments">;      (both in degrees)</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       (1) Use the HST_CATALOG database to find all  HST observations within </span>
<span class="comments">;           5' (the default) of M33</span>
<span class="comments">;</span>
<span class="comments">;       IDL> dbopen,'hst_catalog'</span>
<span class="comments">;       IDL> list = dbtarget('M33')</span>
<span class="comments">;</span>
<span class="comments">;      (2) As above but restrict targets within 2' of the nucleus using the</span>
<span class="comments">;          WFPC2 camara</span>
<span class="comments">;</span>
<span class="comments">;       IDL> dbopen,'hst_catalog'</span>
<span class="comments">;       IDL> sublist = dbfind('config=WFPC2')</span>
<span class="comments">;       IDL> list = dbtarget('M33',2,sublist)</span>
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE CALLS:</span>
<span class="comments">;       QuerySimbad, DBCIRCLE()</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;      Written W. Landsman     SSAI          September 2002</span>
<span class="comments">;      Propagate /SILENT keyword to QuerySimbad    W. Landsman Oct 2009</span>
<span class="comments">;      Make sure a database is open  W.L. Oct 2010</span>
<span class="comments">;-                   </span>
 On_error,2

 if N_params() LT 1 then begin
    print,'Syntax - list = DBTARGET( targetname_or_coord, [radius, sublist  '
    print,'                           DIS =, /SILENT, /TO_B1950 ] )'
    if N_elements(sublist) GT 0 then return, sublist else return,lonarr(1)-1
 endif
 
  if ~db_info('open') then message,'ERROR - No database open'

  QuerySimbad, target, ra,dec, Found = Found,Silent=silent
  if found EQ 0 then message,'Target name ' + target + $
  	     ' could not be translated by SIMBAD'
  ra = ra/15.
 
 if N_elements(radius) EQ 0 then radius = 5
 if n_elements(sublist) EQ 0 then $
 return, dbcircle(ra, dec, radius, dis, SILENT=silent, $
                   TO_B1950 = to_b1950 )
 return, dbcircle(ra, dec, radius, dis, sublist, SILENT=silent, $
                   TO_B1950 = to_b1950 )
  
 end
</code>
    </div>
  </body>
</html>