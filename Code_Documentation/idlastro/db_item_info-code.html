<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:24 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>db_item_info.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="db_item_info.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="db_item_info:source"></a>function db_item_info,request,itnums
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	DB_ITEM_INFO</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	routine to return information on selected item(s) in the opened</span>
<span class="comments">;	data bases.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	result = db_item_info( request, itnums)</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	request - string giving the requested information.</span>
<span class="comments">;		'name'		- item names</span>
<span class="comments">;		'idltype'	- IDL data type (integers)</span>
<span class="comments">;				  see documentation of intrinsic SIZE funtion</span>
<span class="comments">;		'nvalues'	- vector item length (1 for scalar)</span>
<span class="comments">;		'sbyte'		- starting byte in .dbf record (use bytepos</span>
<span class="comments">;				  to get starting byte in record returned by</span>
<span class="comments">;				  dbrd)</span>
<span class="comments">;		'nbytes'	- bytes per data value</span>
<span class="comments">;		'index'		- index types</span>
<span class="comments">;		'description'	- description of the item</span>
<span class="comments">;		'pflag'		- pointer item flags</span>
<span class="comments">;		'pointer'	- data bases the items point to</span>
<span class="comments">;		'format'	- print formats</span>
<span class="comments">;		'flen'		- print field length</span>
<span class="comments">;		'headers'	- print headers</span>
<span class="comments">;		'bytepos'	- starting byte in dbrd record for the items</span>
<span class="comments">;		'dbnumber'	- number of the opened data base</span>
<span class="comments">;		'pnumber'	- number of db it points to (if the db is</span>
<span class="comments">;					opened)</span>
<span class="comments">;		'itemnumber'	- item number in the file</span>
<span class="comments">;</span>
<span class="comments">;	itnums -(optional) Item numbers.  If not supplied info on all items</span>
<span class="comments">;		are returned.</span>
<span class="comments">; OUTPUT:</span>
<span class="comments">;	Requested information is returned as a vector.  Its type depends</span>
<span class="comments">;	on the item requested.</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	version 1  D. Lindler  Nov. 1987</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Support new DB format which allows > 32767 bytes W.L. Oct 2010</span>
<span class="comments">;-</span>
<span class="comments">;------------------------------------------------------------------------</span>
<span class="comments">; data base common block</span>
<span class="comments">;               </span>
common db_com,QDB,QITEMS,QLINK
<span class="comments">;</span>
<span class="comments">; QDB(*,i) contains the following for each data base opened</span>
<span class="comments">;</span>
<span class="comments">;	bytes</span>
<span class="comments">;	  0-18   data base name character*19</span>
<span class="comments">;	  19-79  data base title character*61</span>
<span class="comments">;	  80-81  number of items (integer*2)</span>
<span class="comments">;	  82-83  record length of DBF file (integer*2)</span>
<span class="comments">;	  84-87  number of entries in file (integer*4)</span>
<span class="comments">;	  88-89  position of first item for this file in QITEMS (I*2)</span>
<span class="comments">;	  90-91  position of last item for this file (I*2)</span>
<span class="comments">;	  92-95  Last Sequence number used (item=SEQNUM) (I*4)</span>
<span class="comments">;	  96	 Unit number of .DBF file</span>
<span class="comments">;	  97	 Unit number of .IND file (0 if none exists)</span>
<span class="comments">;	  98-99  Index number of item pointing to this file (0 for first db)</span>
<span class="comments">;	  100-103 Number of entries with space allocated</span>
<span class="comments">;	  104	 Update flag (0 open for read only, 1 open for update)</span>
<span class="comments">;	  119	 Equals 1 if external data representation (IEEE) is used</span>
<span class="comments">;	</span>
<span class="comments">;  QITEMS(*,i) contains decription of item number i with following</span>
<span class="comments">;  byte assignments:</span>
<span class="comments">;</span>
<span class="comments">;	0-19	item name (character*20)</span>
<span class="comments">;	20-21   IDL data type (integet*2)</span>
<span class="comments">;	22-23 	Number of values for item (1 for scalar) (integer*2)</span>
<span class="comments">;	24-25	Starting byte position in original DBF record (integer*2)</span>
<span class="comments">;	26-27	Number of bytes per data value (integer*2)</span>
<span class="comments">;	28	Index type</span>
<span class="comments">;	29-97	Item description</span>
<span class="comments">;	98-99	Print format field length</span>
<span class="comments">;	100	Flag set to one if pointer item</span>
<span class="comments">;	101-119 Data base this item points to</span>
<span class="comments">;	120-125 Print format</span>
<span class="comments">;	126-170 Print headers</span>
<span class="comments">;	171-172 Starting byte in record returned by DBRD</span>
<span class="comments">;	173-174 Data base number in QDB</span>
<span class="comments">;	175-176 Data base number this item points to</span>
<span class="comments">;	177-178 item number within file</span>
<span class="comments">;       179-182 Number of values for item (1 for scalar) (integer*4)</span>
<span class="comments">;       183-186   Starting byte position in original DBF record (integer*4)</span>
<span class="comments">;       187-190 Starting byte in record returned by DBRD</span>
<span class="comments">;</span>
<span class="comments">; QLINK(i) contains the entry number in the second data base</span>
<span class="comments">;	corresponding to entry i in the first data base.</span>
<span class="comments">;-------------------------------------------------------------------------</span>
s=size(qitems) & n=s[2]
newdb = qdb[118,0] EQ 1
case strupcase(strtrim(request)) of

	'NAME'		: x=string(qitems[0:19,*])
	'IDLTYPE'	: x=fix(qitems[20:21,*],0,n)
	'NVALUES'	: x = newdb? long(qitems[179:182,*],0,n) : $ 
			             fix(qitems[22:23,*],0,n)
	'SBYTE'		: x = newdb ? long(qitems[183:186,*],0,n) : $
			               fix(qitems[24:25,*],0,n) 
	'NBYTES'	: x=fix(qitems[26:27,*],0,n)
	'INDEX'		: x=qitems[28,*]
	'DESCRIPTION'	: x=string(qitems[29:99,*])
	'PFLAG'		: x=qitems[100,*]
	'POINTER'	: x=string(qitems[101:119,*])
	'FORMAT'	: x=string(qitems[120:125,*])
	'FLEN'		: x=fix(qitems[98:99,*],0,n)
	'HEADERS'	: x=string(qitems[126:170,*])
	'BYTEPOS'	: x = newdb ?  long(qitems[187:190,*],0,n) : $ 
	                                fix(qitems[171:172,*],0,n)
	'DBNUMBER'	: x=fix(qitems[173:174,*],0,n)
	'PNUMBER'	: x=fix(qitems[175:176,*],0,n)
	'ITEMNUMBER'	: x=fix(qitems[177:178,*],0,n)
	else: begin
		print,'DB_ITEM_INFO-- invalid information request'
		retall
	      end
endcase
if N_params() eq 1 then return,x else return,x[itnums]
end
</code>
    </div>
  </body>
</html>