<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:01 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>select_w.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="select_w.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">PRO select_w_event, event
<span class="comments">;</span>
<span class="comments">;This procedure is the event handler for the XMENU widget below</span>
COMMON select_w, val, exclusive

WIDGET_CONTROL, event.id, GET_VALUE = value, GET_UVALUE = i

<span class="comments">;start:</span>

<span class="comments">; Get the selections</span>
if (event.select EQ 1) then val = [val,i] $
                       else val = val[ where( val NE i) ]

if (value EQ 'DONE') or (exclusive) then begin  
              good  = where( val GE 0, nsel )
              if (nsel GT 0) THEN val = val[good] 
              widget_control, event.top, /DESTROY
 END
END

PRO select_w, items, iselected, comments, command_line, only_one, $
	Count = count, GROUP_LEADER=GROUP, selectin = selectin
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	SELECT_W    </span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Create a non-exclusive widget menu of items</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	More than one item may be selected or 'de-selected'.   </span>
<span class="comments">;	Normally called by SCREEN_SELECT</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	SELECT_W, items ,iselected, [ comments, command_line, only_one ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	items - string array giving list of items that can be</span>
<span class="comments">;		selected.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;	comments - comments which can be requested for each item in</span>
<span class="comments">;		array selections.    NOT YET IMPLEMENTED</span>
<span class="comments">;	command_line - optional command line to be placed at the bottom</span>
<span class="comments">;		of the screen.  It is usually used to specify what the</span>
<span class="comments">;		user is selecting.</span>
<span class="comments">;	only_one - integer flag. If set to 1 then the user can only select</span>
<span class="comments">;		one item.  The routine returns immediately after the first</span>
<span class="comments">;		selection is made.</span>
<span class="comments">; OPTIONAL KEYWORD INPUT</span>
<span class="comments">;       SELECTIN - vector of items to be pre-selected upon input (not used for</span>
<span class="comments">;               only_one option)</span>
<span class="comments">;</span>
<span class="comments">; OUTPUT:</span>
<span class="comments">;	iselected - list of indices in selections giving the selected</span>
<span class="comments">;		items.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL OUTPUT KEYWORD:</span>
<span class="comments">;       COUNT  - Integer scalar giving the number of items selected</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;	SELECT_W - Used to communicate with the SELECT_W_EVENT procedure </span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;	Written, K. Venkatakrishna & W. Landsman, Hughes/STX    January, 1992</span>
<span class="comments">;	Widgets made MODAL.  M. Greason, Hughes STX, 15 July 1992.</span>
<span class="comments">;       Changed handling of MODAL keyword for V5.0   W.Thompson  September 1997</span>
<span class="comments">;       Added selectin keyword  D. Lindler 01/12/99 </span>
<span class="comments">;-</span>
<span class="comments">;</span>
 On_error,2
 common select_w, val, exclusive

 if N_elements(only_one) EQ 0 then only_one = 0
 if N_params() LT 5 then exclusive = 0 else exclusive = only_one

 val = -1

 if N_params() LT 4 then command_line = $ 
' Select by pressing the left mouse button once; To de-select press twice; finally QUIT'
    
        MODAL = N_ELEMENTS(GROUP) GE 1
        base = WIDGET_BASE( TITLE = command_line, /COLUMN, MODAL=MODAL, $
                GROUP_LEADER=GROUP)
 if only_one then $
       XMENU, items, base, COLUMN=8  $
    else begin 
       donebut = WIDGET_BUTTON( base, VALUE = "DONE", UVALUE = -1) 
       XMENU, items, base, /NONEXCLUSIVE, COLUMN=8, buttons=buttons
       if n_elements(selectin) gt 0 then begin
                for i=0,n_elements(selectin)-1 do $
                        widget_control,buttons(selectin[i]),set_button=1
                val = [-1,selectin]
       endif
 endelse

<span class="comments">; Realize the widgets:</span>
 WIDGET_CONTROL, base, /REALIZE

<span class="comments">; Hand off to the XMANAGER, i.e.,event-handler,:</span>
  XMANAGER, 'select_w', base, GROUP_LEADER = GROUP
 if val[0] NE -1 then iselected = val
 count = N_elements( iselected)
 !ERR = count

 return
 end

</code>
    </div>
  </body>
</html>