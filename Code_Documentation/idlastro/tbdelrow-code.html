<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:07 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tbdelrow.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tbdelrow.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tbdelrow:source"></a>pro tbdelrow,h,tab,rows                                               
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TBDELROW</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Delete specified row or rows of data from a FITS binary table</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	TBDELROW, h, tab, rows</span>
<span class="comments">;</span>
<span class="comments">; INPUTS-OUPUTS</span>
<span class="comments">;	h,tab - FITS binary table header and data array.  H and TAB will</span>
<span class="comments">;		be updated on output with the specified row(s) deleted.</span>
<span class="comments">;</span>
<span class="comments">;	rows  -  scalar or vector, specifying the row numbers to delete</span>
<span class="comments">;		First row has index 0.   If a vector it will be sorted and</span>
<span class="comments">;		duplicates removed by TBDELROW</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;	Compress a table to include only non-negative flux values</span>
<span class="comments">;</span>
<span class="comments">;	flux = TBGET(h,tab,'FLUX')       ;Obtain original flux vector</span>
<span class="comments">;	bad = where(flux lt 0)           ;Find negative fluxes</span>
<span class="comments">;	TBDELROW,h,tab,bad               ;Delete rows with negative fluxes</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;	Specified rows are deleted from the data array, TAB.  The NAXIS2</span>
<span class="comments">;	keyword in the header is updated.</span>
<span class="comments">;</span>
<span class="comments">; REVISION HISTORY:                                           </span>
<span class="comments">;	Written   W. Landsman        STX Co.     August, 1988</span>
<span class="comments">;	Checked for IDL Version 2, J. Isensee, July, 1990</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;- </span>
 On_error,2

 if N_params() LT 3 then begin
     print,'Syntax - tbdelrow, h, tab, rows '
     return                                                  
 endif

 nrows = sxpar(h,'NAXIS2')            <span class="comments">;Original number of rows</span>
 if (max(rows) GE nrows) or (min(rows) LT 0) then $
     message,'Specified rows must be between 0 and ' + strtrim(nrows-1,2)

 ndel = N_elements(rows)
 if ndel GT 1 then begin
    rows = rows[rem_dup(rows)]
    ndel = N_elements(rows)
 endif

 j = 0L
 i = rows[0]

 for k = long(rows[0]),nrows-1 do begin

 if k eq rows[j] then begin
     j = j+1 
     if j EQ ndel then goto,done
 endif else begin
     tab[0,i] = tab[*,k]
     i = i+1
 endelse

 endfor

 k = k-1

DONE: 

 if k NE nrows-1 then tab[0,i] = tab[*,i+j:nrows-1]
 tab = tab[*,0:nrows-ndel-1]
 sxaddpar,h,'NAXIS2',nrows-ndel      <span class="comments">;Reduce number of rows</span>

 return  
 end
</code>
    </div>
  </body>
</html>