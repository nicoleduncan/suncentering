<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:41 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>hgrep.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="hgrep.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="hgrep:source"></a>pro hgrep, header, substring, keepcase=keepcase, linenum=linenum

<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     HGREP</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Find a substring in a FITS header (or any other string array)</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       HGREP, header, substring, [/KEEPCASE, /LINENUM ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS: </span>
<span class="comments">;       header -  FITS header or other string array</span>
<span class="comments">;       substring - scalar string to find in header; if a numeric value is </span>
<span class="comments">;                 supplied, it will be converted to type string</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORDS:</span>
<span class="comments">;       /KEEPCASE: if set, then look for an exact match of the input substring </span>
<span class="comments">;                 Default is to ignore case .</span>
<span class="comments">;       /LINENUM: if set, prints line number of header in which</span>
<span class="comments">;                substring appears </span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       None, results are printed to screen</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE: </span>
<span class="comments">;       Find every place in a FITS header that the word 'aperture'</span>
<span class="comments">;       appears in lower case letters and print the element number </span>
<span class="comments">;       of the header array:</span>
<span class="comments">;       </span>
<span class="comments">;       IDL> hgrep, header, 'aperture', /keepcase, /linenum</span>
<span class="comments">;</span>
<span class="comments">; HISTORY: </span>
<span class="comments">;       Written, Wayne Landsman (Raytheon ITSS)      August 1998</span>
<span class="comments">;       Adapted from STIS version by Phil Plait/ ACC November 14, 1997</span>
<span class="comments">;       Remove trailing spaces if a non-string is supplied W. Landsman Jun 2002</span>
<span class="comments">;-</span>

   if (N_params() LT 2) then begin
      print,'Syntax - HGREP, header, substring, [/KEEPCASE, /LINENUM ]'
      return
   endif

   if N_elements(header) eq 0 then begin
      print,'first parameter not defined. Returning...'
      return
   endif
   hh = strtrim(header,2)
   if size(substring,/tname) NE 'STRING' then substring = strtrim(substring,2)

   if keyword_set(keepcase) then $
         flag = strpos(hh,substring) $
   else  flag = strpos(strlowcase(hh),strlowcase(substring))
     

   g = where(flag NE -1, Ng)
   if Ng GT 0 then $
       if keyword_set(linenum) then $
           for i = 0, Ng-1 do print, string(g[i],f='(i4)') + ': ' + hh[g[i]] $
       else $
           for i = 0, Ng-1 do print,hh[g[i]] 
                   
   return
   end
</code>
    </div>
  </body>
</html>