<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:01 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>sky.pro (Documentation for ./)</title>

    

    <script type="text/javascript" src="../idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="../idldoc-resources/js/copybutton.js"></script>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="sky.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">

    <div class="header">
      <h1>Documentation for ./</h1>
      <h2>Generated by IDLdoc</h2>
    </div>
    
    
    <table class="navbar smaller" summary="Navigation header" cellspacing="0">
      <tr>
        <td >
          <a href="../overview.html">Overview</a>
        </td>
    
        <td >
          Directory
        </td>
    
        <td class="selected">File</td>
    
        
        <td >
          <a href="sky-code.html" title="Chromocoded source">Source</a> <a href="sky.pro" title=".pro file"><img src="../idldoc-resources/attach.png" alt="[attach.png]" align="top"/></a>
        </td>
        
    
        <td >Etc</td>
    
        <td >
        	<a href="../categories.html">Categories</a>
        </td>
    
        <td >
        	<a href="../search.html">Search</a>
        </td>
    
        
        <td >
          <a href="../idldoc-index.html">Index</a>
        </td>
        
    
        
    
        <td >
          <a href="../idldoc-help.html">Help</a>
        </td>
    
        <td class="flexible">
          User documentation
        </td>
      </tr>
    </table>
    
    
    
    <p class="localnavbar smallest"><a href="" target="_top">single page</a> | <a href="../index.html" target="_top">use frames</a> &nbsp;&nbsp;&nbsp; summary &nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp; fields &nbsp;&nbsp;&nbsp; <a href="#routine-details">routine details</a> &nbsp;&nbsp;&nbsp; <a href="#attributes">file attributes</a></p>
    
    
    
    
    
    
    
    
    

    <div class="content">
      <h2 class="directory">idlastro/</h2>
      <h1 class="basename">sky.pro<span class="file-attributes"></span></h1>
      

      
      
      
      <br/>

      

      

      

      

      

      


      
      <div id="routine-details">
        

        
        <div class="routine-details details" id="sky">
          <h2 class="routine-name"><a href="#root" class="top">top</a> <a href="sky-code.html#sky:source" class="top">source</a> sky<span class="routine-attributes"></span></h2>

          

          <p class="syntax"><code>sky<span class="argument">, <a href="#sky:p:image">image</a></span><span class="argument">, <a href="#sky:p:skymode">skymode</a></span><span class="argument">, <a href="#sky:p:skysig">skysig</a></span><span class="argument">, <a href="#sky:k:SILENT">SILENT</a>=<span class="var">SILENT</span></span><span class="argument">, <a href="#sky:k:CIRCLERAD">CIRCLERAD</a>=<span class="var">CIRCLERAD</span></span><span class="argument">, <a href="#sky:k:_EXTRA">_EXTRA</a>=<span class="var">_EXTRA</span></span><span class="argument">, <a href="#sky:k:NAN">NAN</a>=<span class="var">NAN</span></span><span class="argument">, <a href="#sky:k:MEANBACK">MEANBACK</a>=<span class="var">MEANBACK</span></span></code></p>

          
          <div class="small "><p> NAME:
       SKY
 PURPOSE:
       Determine the sky level in an image
 EXPLANATION:
       Approximately 10000 uniformly spaced pixels are selected for the
       computation.  Adapted from the DAOPHOT routine of the same name.
</p>

<p>       The sky is computed either by using the procedure mmm.pro (default)
       or by sigma clipping (if /MEANBACK is set)
</p>

<p> CALLING SEQUENCE:
       SKY, image, [ skymode, skysig ,/SILENT, /MEANBACK, /NAN, CIRCLERAD= ]
</p>

<p>         Keywords available  when MEANBACK is not set (passed to mmm.pro):
                   /DEBUG, HIGHBAD=, /INTEGER, MAXITER=. READNOISE=
         Keywords available when /MEANBACK is set:
                   CLIPSIG=, /DOUBLE, CONVERGE_NUM=, MAXITER=, /VERBOSE
 INPUTS:
       IMAGE - One or two dimensional array
</p>

<p> OPTIONAL OUTPUT ARRAYS:
       SKYMODE - Scalar, giving the mode of the sky pixel values of the
               array IMAGE, as determined by the procedures MMM or MEANCLIP
       SKYSIG -  Scalar, giving standard deviation of sky brightness.   If it
               was not possible to derive a mode then SKYSIG is set to -1
</p>

<p> INPUT KEYWORD PARAMETERS:
	CIRCLERAD - Use this keyword to have SKY only select pixels within
		specified pixel radius of the center of the image.  If
		CIRCLERAD =1, then the radius is set equal to half the image
		width.   Can only be used with square images.
       /MEANBACK - if set, then the background is computed using the 3 sigma
             clipped mean (using meanclip.pro) rather than using the mode
             computed with mmm.pro.    This keyword is useful for the Poisson
             count regime or where contamination is known  to be minimal.
       /NAN - This keyword must be set to  ignore NaN values when computing
              the sky.
       /SILENT - If this keyword is supplied and non-zero, then SKY will not
               display the sky value and sigma at the terminal
</p>

<p>      The _EXTRA facility can is used to pass optional keywords to the programs
             that actually perform the sky computation: either mmm.pro
             (default) or meanclip.pro (if /MEANBACK) is set.    The following
             keywords are available with the mmm.pro (default) setting
       HIGHBAD - scalar value of the (lowest) "bad" pixel level (e.g. cosmic
                rays or saturated pixels) If not supplied, then there is
                assumed to be no high bad pixels.
       READNOISE - Scalar giving the read noise (or minimum noise for any
                pixel).     Normally, MMM determines the (robust) median by
                averaging the central 20% of the sky values.     In some cases
                where the noise is low, and pixel values are quantized a
                larger fraction may be needed.    By supplying the optional
                read noise parameter, MMM is better able to adjust the
                fraction of pixels used to determine the median.
       /INTEGER - Set this keyword if the  input SKY image only contains
                discrete integer values.    This keyword is only needed if the
                SKY image is of type float or double precision, but contains
                only discrete integer values.
</p>

<p>     If the /MEANBACK keyword is set then the following keywords are available
</p>

<p>       CLIPSIG:  Number of sigma at which to clip.  Default=3
	MAXITER:  Ceiling on number of clipping iterations.  Default=5
       CONVERGE_NUM:  If the proportion of rejected pixels is less
           than this fraction, the iterations stop.  Default=0.02, i.e.,
           iteration stops if fewer than 2% of pixels excluded.
       /DOUBLE - if set then perform all computations in double precision.
                 Otherwise double precision is used only if the input
                 data is double
</p>

<p> PROCEDURE:
       A grid of points, not exceeding 10000 in number, is extracted
       from the srray.  The mode of these pixel values is determined
       by the procedure mmm.pro or meanclip.pro.   In a 2-d array the grid is
       staggered in each row to avoid emphasizing possible bad columns
</p>

<p> PROCEDURE CALLS:
       MEANCLIP, MMM, DIST_CIRCLE
 REVISION HISTORY:
       Written, W. Landsman   STX Co.            September, 1987
       Changed INDGEN to LINDGEN                 January, 1994
       Fixed display of # of points used         March, 1994
       Stagger beginning pixel in each row, added NSKY, READNOISE, HIGHBAD
          W. Landsman        June 2004
      Adjustments for unbiased sampling  W. Landsman June 2004
      Added /NAN keyword, put back CIRCLERAD keyword W. Landsman July 2004
      Added MEANBACK keyword, _EXTRA kewyord ,preserve data type in
             calculations       W. Landsman November 2005
      Fix problem for very large images by requiring at least 2 pixels to
       be sampled per row.    March 2007    W. Landsman
      Avoid possible out of bounds if /NAN set   W. Landsman   Jan 2008
      Use  TOTAL(/INTEGER)      June 2009
</p>

</div>
          

          

          
          <h3>Parameters</h3>
            <dl>
              
              <dt id="sky:p:image">image <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:p:skymode">skymode <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:p:skysig">skysig <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
            </dl>
          

          
          <h3>Keywords</h3>
            <dl>
              
              <dt id="sky:k:SILENT">SILENT <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:k:CIRCLERAD">CIRCLERAD <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:k:_EXTRA">_EXTRA <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:k:NAN">NAN <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="sky:k:MEANBACK">MEANBACK <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
            </dl>
          

          

          

          

          

        </div>
        

      </div>
      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Tue Oct 23 10:15:50 2012</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>184</td>
          </tr>

          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.5.1 on Mon Sep 30 16:58:01 2013</td>
          <td class="right"><a target="_top" href="http://idldoc.idldev.com">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>