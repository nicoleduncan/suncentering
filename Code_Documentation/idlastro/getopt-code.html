<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:39 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>getopt.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="getopt.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="getopt:source"></a>function getopt,input,type,numopt,count =count
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	GETOPT</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Convert a string supplied by the user into a valid scalar or vector</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	Distinct elements in the string may be</span>
<span class="comments">;	separated by either a comma or a space.  The output scalar</span>
<span class="comments">;	or vector can be specified to be  either  integer or floating</span>
<span class="comments">;	point.   A null string is converted to a zero.   </span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     option = GETOPT( input, [ type, numopt, COUNT = ])</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	input   - string that was input by user in response to a prompt</span>
<span class="comments">;		Arithmetic operations can be included in the string (see</span>
<span class="comments">;		examples)</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;	type    - Either an "I" (integer) or an "F" (floating point) specifying </span>
<span class="comments">;		the datatype of the output vector.  Default is floating point</span>
<span class="comments">;</span>
<span class="comments">;	numopt  - number of values expected by calling procedure</span>
<span class="comments">;		If less than NUMOPT values are supplied the output</span>
<span class="comments">;		vector will be padded with zeros.  </span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	option  - scalar or vector containing the numeric conversion of</span>
<span class="comments">;		the fields in the string INPUT.  If NUMOPT is not</span>
<span class="comments">;		supplied, the number of elements in OPTION will </span>
<span class="comments">;		equal the number of distinct fields in INPUT.</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;       Count - integer giving the number of values actually returned by</span>
<span class="comments">;               GETOPT.   If the input is invalid then COUNT is set to -1</span>
<span class="comments">; NOTES:</span>
<span class="comments">;	(1) If an input is invalid, Count is set to -1 and the result is set </span>
<span class="comments">;		to 999.</span>
<span class="comments">;	(2) GETOPT uses the execute function to interpret the user string.   </span>
<span class="comments">;	 	Therefore GETOPT itself cannot be called with the EXECUTE </span>
<span class="comments">;		function.</span>
<span class="comments">;	(3) GETOPT has a hard limit of 10 tokens in the input string. </span>
<span class="comments">;</span>
<span class="comments">; EXAMPLES:</span>
<span class="comments">;	(1)   a = getopt( '3.4,5*4 ', 'I' )    yields   a = [ 3, 20]</span>
<span class="comments">;	(2)   a = getopt( '5/2.', 'F', 5)      yields   a = [2.5,0.,0.,0.,0.]</span>
<span class="comments">;	(3)   a = getopt( '2*3,5,6')           yields   a = [6.,5.,6.]</span>
<span class="comments">;</span>
<span class="comments">; REVISON HISTORY:</span>
<span class="comments">;	written by B. Pfarr, STX, 5/6/87</span>
<span class="comments">;	change value of !ERR W. Landsman   STX,  6/30/88</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
 On_error,2

 Err = 0
 inp = strtrim(input,2)               <span class="comments">;Remove leading & trailing blanks</span>
 comma = strpos(inp,',')              <span class="comments">;look for comma</span>

 if comma GT 0 then char = ',' else char = ' '  <span class="comments">;Delineator is comma or space</span>

 if N_params() LT 2 then option = fltarr(10) else  $
 if strupcase(type) EQ 'I' then option = intarr(10) $
                          else option = fltarr(10) <span class="comments">;Default type is float</span>

 if strlen(inp) EQ 0 then return,0.0   $            <span class="comments">;Null string is 0.0</span>
 else begin
   i =0                                            <span class="comments">;Counts number of tokens</span>
   while inp NE '' do begin

      token = strtrim( gettok(inp,char), 2 )
      if token NE '' then begin

          test = execute( 'option[i] = ' + token) 
          if test NE 1 then begin
                count = -1
                return, 999.9
          endif       
         i = i+1
      endif

   endwhile
 endelse
<span class="comments">;</span>

 if N_params() LT 3 then begin

    if i EQ 1 then option = option[0] else $
            option = option[0:i-1]    <span class="comments">;Trim output vector</span>

 endif else option = option[0:numopt-1] 

 count = N_elements(option)
 return,option       <span class="comments">;Successful completion</span>

 end
</code>
    </div>
  </body>
</html>