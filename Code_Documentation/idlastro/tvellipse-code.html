<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:10 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tvellipse.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tvellipse.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tvellipse:source"></a>pro tvellipse, rmax, rmin, xc, yc, pos_ang, color, DATA = data, $
	NPOINTS = npoints, COLOR=thecolor, MAJOR=major, MINOR=minor, $
        DEVICE= device, FILL = fill, _Extra = _extra
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      TVELLIPSE</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;      Draw an ellipse on the current graphics device.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      TVELLIPSE, rmax, rmin, xc, yc, [ pos_ang, color, COLOR= ,/DATA, NPOINTS=</span>
<span class="comments">;                                        LINESTYLE=, THICK=, /MAJOR, /MINOR ]</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       RMAX,RMIN - Scalars giving the semi-major and semi-minor axes of</span>
<span class="comments">;                   the ellipse</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;       XC,YC - Scalars giving the position on the TV of the ellipse center</span>
<span class="comments">;               If not supplied (or if XC, YC are negative and /DATA is not </span>
<span class="comments">;               set), and an interactive graphics device (e.g. not postscript)</span>
<span class="comments">;               is set,  then the user will be prompted for X,Y</span>
<span class="comments">;       POS_ANG - Position angle of the major axis, measured counter-clockwise</span>
<span class="comments">;                 from the X axis.  Default is 0.</span>
<span class="comments">;       COLOR - Scalar  integer or string specifying color to draw ellipse.   </span>
<span class="comments">;               See cgcolor.pro for a list of possible color names</span>

<span class="comments">; OPTIONAL KEYWORD INPUT:</span>
<span class="comments">;        COLOR - Intensity value or color name used to draw the circle, </span>
<span class="comments">;                overrides parameter value.  Default = 'opposite'</span>
<span class="comments">;                See cgCOLOR() for a list of color names.;        </span>
<span class="comments">;       /DATA - if this keyword is set and non-zero, then the ellipse radii and</span>
<span class="comments">;               X,Y position center are interpreted as being in DATA</span>
<span class="comments">;               coordinates.   Note that the data coordinates must have been</span>
<span class="comments">;               previously defined (with a PLOT or CONTOUR call).  The default</span>
<span class="comments">;              is to assume data coordinates if !X.CRANGE has been set by a </span>
<span class="comments">;              previous plot.    Force device coordinates by setting DATA = 0.</span>
<span class="comments">;        /DEVICE - Set to force use of device coordinates.</span>
<span class="comments">;        /FILL - If set, then fill the ellipse using cgCOLORFILL</span>
<span class="comments">;        NPOINTS - Number of points to connect to draw ellipse, default = 120</span>
<span class="comments">;                  Increase this value to improve smoothness</span>
<span class="comments">;        /MAJOR - Plot a line along the ellipse's major axis</span>
<span class="comments">;        /MINOR - Plot a line along the ellipse's minor axis</span>
<span class="comments">;</span>
<span class="comments">;               Any keyword recognized by cgPLOTS is also recognized by TVELLIPSE.</span>
<span class="comments">;               In particular, the color, linestyle, thickness and clipping of</span>
<span class="comments">;               the ellipses are controlled by the  COLOR, LINESTYLE, THICK and</span>
<span class="comments">;               NOCLIP keywords.  (Clipping is turned off by default, set</span>
<span class="comments">;               NOCLIP=0 to activate it.)  If /FILL is set then available </span>
<span class="comments">;               keywords include LINE_FILL and FILL_PATTERN. </span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;        TVELLIPSE does not check whether the ellipse is within the boundaries</span>
<span class="comments">;        of the window.</span>
<span class="comments">;</span>
<span class="comments">;        The ellipse is evaluated at NPOINTS (default = 120) points and</span>
<span class="comments">;        connected by straight lines, rather than using the more sophisticated</span>
<span class="comments">;        algorithm used by TVCIRCLE</span>
<span class="comments">;</span>
<span class="comments">;        TVELLIPSE does not accept normalized coordinates.</span>
<span class="comments">;</span>
<span class="comments">;        TVELLIPSE is not vectorized; it only draws one ellipse at a time</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;        Draw an ellipse of semi-major axis 50 pixels, minor axis 30</span>
<span class="comments">;        pixels, centered on (250,100), with the major axis inclined 25</span>
<span class="comments">;        degrees counter-clockwise from the X axis.  Use a double thickness</span>
<span class="comments">;        line and device coordinates</span>
<span class="comments">;</span>
<span class="comments">;	IDL> tvellipse,50,30,250,100,25,thick=2,/device</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;        Note that the position angle for TVELLIPSE (counter-clockwise from</span>
<span class="comments">;        the X axis) differs from the astronomical position angle</span>
<span class="comments">;        (counter-clockwise from the Y axis).</span>
<span class="comments">;</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;        Written  W. Landsman STX          July, 1989</span>
<span class="comments">;        Converted to use with a workstation.  M. Greason, STX, June 1990</span>
<span class="comments">;        LINESTYLE keyword, evaluate at 120 points,  W. Landsman HSTX Nov 1995</span>
<span class="comments">;        Added NPOINTS keyword, fixed /DATA keyword W. Landsman HSTX Jan 1996</span>
<span class="comments">;        Check for reversed /DATA coordinates  P. Mangiafico, W.Landsman May 1996</span>
<span class="comments">;        Work correctly when X & Y data scales are unequal  December 1998</span>
<span class="comments">;        Removed cursor input when -ve coords are entered with /data</span>
<span class="comments">;        keyword set  P. Maxted, Keele, 2002</span>
<span class="comments">;        Use _EXTRA keywords including NOCLIP  W. Landsman October 2006</span>
<span class="comments">;        Add plotting of major and minor axes and /MAJOR, /MINOR keywords;</span>
<span class="comments">;        fixed description of RMAX,RMIN (semi-axes).  J. Guerber Feb. 2007</span>
<span class="comments">;        Update to use Coyote graphics W. Landsman Feb 2011</span>
<span class="comments">;        Default to data coordinates if a previous plot has been made </span>
<span class="comments">;        (X.crange is non-zero)  W. Landsman Jan 2012</span>
<span class="comments">;        Added /DEVICE keyword W. Landsman   Mar 2012</span>
<span class="comments">;        Added /FILL keyword  W. Landsman Mar 2012</span>
<span class="comments">;-</span>
 On_error,2                              <span class="comments">;Return to caller</span>

 if N_params() lt 2 then begin
   print,'Syntax - TVELLIPSE, rmax, rmin, xc, yc, [pos_ang, color, COLOR=,'
   print,'          /FILL, NPOINTS=, LINESTYLE=, THICK=, /DATA, /MAJOR, /MINOR]'
   print,'          /DEVICE...any other keyword accepted by cgPLOTS'
   return
 endif
 
 <span class="comments">; Default to data coordinates if !X.crange is set (previous plot) </span>

  if keyword_set(device) then datacoord = 0 else begin
  if N_elements(data) Eq 0  then datacoord = !x.crange[0] NE !x.crange[1]  $
                         else datacoord = logical_true(data)
  endelse			 

 if N_params() lt 4 then $
       cursor, xc, yc, /DEVICE, /NOWAIT      <span class="comments">;Get unroamed,unzoomed coordinates</span>

 if ( (xc LT 0) || (yc LT 0)) && ~keyword_set(data) then begin
       message,'Position cursor in window ' + strtrim(!D.WINDOW,2) + $
              ' -- then hit mouse button',/INF
       cursor, xc, yc, /DEVICE, /WAIT
         message,'Ellipse is centered at (' + strtrim(xc,2) + ',' + $
		strtrim(yc,2) + ')',/INF
 endif

 if N_params() LT 5 then pos_ang = 0.    <span class="comments">;Default position angle</span>
 if N_Elements(TheColor) EQ 0 then begin
     IF N_Elements( Color ) eq 0 THEN Color = cgcolor('opposite')
 endif else color = TheColor
 
 if ~keyword_set(NPOINTS) then npoints = 120   <span class="comments">;Number of points to connect</span>

 phi = 2*!pi*(findgen(npoints)/(npoints-1))       <span class="comments">;Divide circle into Npoints</span>
 ang = pos_ang/!RADEG               	          <span class="comments">;Position angle in radians</span>
 cosang = cos(ang)
 sinang = sin(ang)

 x =  rmax*cos(phi)              <span class="comments">;Parameterized equation of ellipse</span>
 y =  rmin*sin(phi)

 xprime = xc + x*cosang - y*sinang   	<span class="comments">;Rotate to desired position angle</span>
 yprime = yc + x*sinang + y*cosang

 if keyword_set(fill) then begin 
 if datacoord then $
   cgcolorfill, xprime, yprime, /DATA, COLOR=color, _STRICT_Extra = _extra else $
   cgcolorfill, round(xprime), round(yprime),  COLOR=color, /DEVICE,  $
                _STRICT_Extra = _extra
 endif else begin		
 if datacoord then $
   cgplots, xprime, yprime, /DATA, COLOR=color, _STRICT_Extra = _extra else $
   cgplots, round(xprime), round(yprime),  COLOR=color, /DEVICE,  $
                _STRICT_Extra = _extra
 endelse

 if keyword_set(major) then begin
     xmaj = xc + [rmax,-rmax]*cosang  <span class="comments">; rot & transl points (rmax,0),(-rmax,0)</span>
     ymaj = yc + [rmax,-rmax]*sinang
     if keyword_set(fill) then begin
     if datacoord then $
       cgcolorfill, xmaj, ymaj, /DATA, COLOR=color, _STRICT_Extra=_extra  $
     else   cgcolorfill, round(xmaj), round(ymaj), $
       /DEVICE, COLOR=color, _STRICT_Extra=_extra
      endif else begin
     if datacoord then $
       cgplots, xmaj, ymaj, /DATA, COLOR=color, _STRICT_Extra=_extra  $
     else   cgplots, round(xmaj), round(ymaj), $
       /DEVICE, COLOR=color, _STRICT_Extra=_extra
       endelse
 endif

 if keyword_set(minor) then begin
     xmin = xc - [rmin,-rmin]*sinang  <span class="comments">; rot & transl points (0,rmin),(0,-rmin)</span>
     ymin = yc + [rmin,-rmin]*cosang
     if keyword_set(fill) then begin
     if datacoord then $
       cgcolorfill, xmin, ymin, /DATA, COLOR=color, _STRICT_Extra=_extra  $
     else   cgplots, round(xmin), round(ymin), $
         /DEVICE, COLOR=color, _STRICT_Extra=_extra
     endif else begin
     if datacoord then $
       cgplots, xmin, ymin, /DATA, COLOR=color, _STRICT_Extra=_extra  $
     else   cgplots, round(xmin), round(ymin), $
         /DEVICE, COLOR=color, _STRICT_Extra=_extra
     endelse
 endif

 return
 end
</code>
    </div>
  </body>
</html>