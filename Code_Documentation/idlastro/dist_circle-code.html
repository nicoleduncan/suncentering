<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:28 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dist_circle.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dist_circle.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="dist_circle:source"></a>pro dist_circle ,im, n, xcen ,ycen, DOUBLE = double 
<span class="comments">;+</span>
<span class="comments">; NAME: </span>
<span class="comments">;      DIST_CIRCLE</span>
<span class="comments">; PURPOSE:      </span>
<span class="comments">;      Form a square array where each value is its distance to a given center.</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;      Returns a square array in which the value of each element is its </span>
<span class="comments">;      distance to a specified center. Useful for circular aperture photometry.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      DIST_CIRCLE, IM, N, [ XCEN, YCEN,  /DOUBLE ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;      N = either  a scalar specifying the size of the N x N square output</span>
<span class="comments">;               array, or a 2 element vector specifying the size of the</span>
<span class="comments">;               N x M rectangular output array.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;      XCEN,YCEN = Scalars designating the X,Y pixel center.  These need</span>
<span class="comments">;               not be integers, and need not be located within the</span>
<span class="comments">;               output image.   If not supplied then the center of the output</span>
<span class="comments">;               image is used (XCEN = YCEN = (N-1)/2.).</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       IM  - N by N (or M x N) floating array in which the value of each </span>
<span class="comments">;               pixel is equal to its distance to XCEN,YCEN</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;       /DOUBLE - If this keyword is set and nonzero, the output array will</span>
<span class="comments">;               be of type DOUBLE rather than floating point.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Total the flux in a circular aperture within 3' of a specified RA</span>
<span class="comments">;       and DEC on an 512 x 512 image IM, with a header H.</span>
<span class="comments">;</span>
<span class="comments">;       IDL> adxy, H, RA, DEC, x, y       ;Convert RA and DEC to X,Y</span>
<span class="comments">;       IDL> getrot, H, rot, cdelt        ;CDELT gives plate scale deg/pixel</span>
<span class="comments">;       IDL> cdelt = cdelt*3600.          ;Convert to arc sec/pixel</span>
<span class="comments">;       IDL> dist_circle, circle, 512, x, y  ;Create a distance circle image</span>
<span class="comments">;       IDL> circle = circle*abs(cdelt[0])   ;Distances now given in arcseconds</span>
<span class="comments">;       IDL> good = where(circle LT 180)  ;Within 3 arc minutes</span>
<span class="comments">;       IDL> print,total( IM[good] )      ;Total pixel values within 3'</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       The speed of DIST_CIRCLE decreases and the the demands on virtual</span>
<span class="comments">;       increase as the square of the output dimensions.   Users should</span>
<span class="comments">;       dimension the output array as small as possible, and re-use the</span>
<span class="comments">;       array rather than re-calling DIST_CIRCLE</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Adapted from DIST    W. Landsman            March 1991</span>
<span class="comments">;       Allow a rectangular output array   W. Landsman     June 1994</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Add /DOUBLE keyword, make XCEN,YCEN optional  W. Landsman Jun 1998</span>
<span class="comments">;-</span>
 On_error,2                <span class="comments">;Return to caller if an error occurs</span>

 if N_params() LT 2  then begin
     print,'Syntax - DIST_CIRCLE, im, n,[ xcen, ycen, /DOUBLE ]' 
     print,'IM - output image array'
     print,'N - size of the output image array, scalar or 2 element vector'
     print,'XCEN,YCEN - position from which to specify distances'
     return
 endif

 if N_elements(N) EQ 2 then begin
        nx = n[0]
        ny = n[1] 
 endif else if N_elements(N) EQ 1 then begin
        ny = n
        nx = n                    <span class="comments">;Make a row</span>
 endif else message, $
        'ERROR - Output size parameter N must contain 1 or 2 elements'


 if N_params() LT 4 then begin
        xcen = (nx-1)/2. & ycen = (ny-1)/2.
 endif


 if keyword_set(DOUBLE) then begin
         x_2 = (dindgen(nx) - xcen) ^ 2     <span class="comments">;X distances (squared)</span>
         y_2 = (dindgen(ny) - ycen) ^ 2     <span class="comments">;Y distances (squared)  </span>
         im = dblarr( nx, ny, /NOZERO)      <span class="comments">;Make uninitialized output array</span>
 endif else begin
         x_2 = (findgen(nx) - xcen) ^ 2     <span class="comments">;X distances (squared)</span>
         y_2 = (findgen(ny) - ycen) ^ 2     <span class="comments">;Y distances (squared)  </span>
         im = fltarr( nx, ny, /NOZERO)      <span class="comments">;Make uninitialized output array</span>
 endelse

 for i = 0L, ny-1 do begin                <span class="comments">;Row loop</span>
        im[0,i] = sqrt(x_2 + y_2[i])     <span class="comments">;Euclidian distance</span>
 endfor

 return
 end
</code>
    </div>
  </body>
</html>