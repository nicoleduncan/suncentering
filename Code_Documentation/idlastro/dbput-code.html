<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:27 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dbput.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dbput.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="dbput:source"></a>pro dbput,item,val,entry
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	DBPUT</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Procedure to place a new value for a specified item into</span>
<span class="comments">;	a data base file entry.  </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:	</span>
<span class="comments">;	dbput, item, val, entry</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	item - item name or number</span>
<span class="comments">;	val - item value(s)</span>
<span class="comments">;</span>
<span class="comments">; INPUT/OUTPUT:</span>
<span class="comments">;	entry - entry (byte array) or scalar entry number.</span>
<span class="comments">;	        if entry is a scalar entry number then the data</span>
<span class="comments">;	        base file will be updated.  Otherwise the change</span>
<span class="comments">;	        will be only made to the entry array which must</span>
<span class="comments">;	        be written latter using DBWRT.</span>
<span class="comments">;</span>
<span class="comments">; OPERATIONAL NOTES:</span>
<span class="comments">;	If entry is a scalar entry number or the input file name</span>
<span class="comments">;	is supplied, the entry in the data base will be updated</span>
<span class="comments">;	instead of a supplied entry variable.  In this case, !priv</span>
<span class="comments">;	must be greater than 1.</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       IDL> dbput,'WAVELEN',1215.6,entry</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       DB_ITEM, DBRD, DBXPUT, DBWRT</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	version 2  D. Lindler  Feb 1988 (new db formats)</span>
<span class="comments">;	modified to convert blanks into zeros correctly D. Neill Jan 1991</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       V5.2 version support unsigned, 64bit integers W. Landsman  Sep. 2001</span>
<span class="comments">;-</span>
<span class="comments">;-----------------------------------------------------------------------</span>
<span class="comments">;</span>
<span class="comments">; get item number</span>
<span class="comments">;</span>
 db_item, item, inum, ivalnum, dtype, sbyte, numvals, nbytes
<span class="comments">;   </span>
<span class="comments">; convert val to correct type and check size</span>
<span class="comments">;</span>
 if (dtype[0] NE 7) and ( size(val,/type) EQ 7) then val = strtrim(val)
 case dtype[0] of
	1: v = byte(fix(val))
	2: v = fix(val)
	3: v = long(val)
	4: v = float(val)
	5: v = double(val)
	7: v = string(val)
	12: v = uint(val)
	13: v = ulong(val)
	14: v = long64(val)
	15: v = ulong64(val)
 endcase
<span class="comments">;</span>
 if N_elements(v) NE numvals[0] then begin
	print,'DBPUT - Invalid number of data values'
	print,'Item '+item+' requires ',strtrim(numvals[0],2),' values'
	print,'DBPUT aborting'
	retall
 endif
<span class="comments">;</span>
<span class="comments">; determine if entry number supplied</span>
<span class="comments">;</span>
 if size(entry,/n_dimen) EQ 0 then begin      <span class="comments">;scalar entry number supplied</span>
	dbrd,entry,e
	dbxput,v,e,dtype[0],sbyte[0],nbytes[0]*numvals[0] <span class="comments">;update entry</span>
	dbwrt,e					<span class="comments">;update file</span>
  end else begin				<span class="comments">;array supplied, just update it</span>
	dbxput,v,entry,dtype[0],sbyte[0],nbytes[0]*numvals[0]
 end

 return
 end
</code>
    </div>
  </body>
</html>