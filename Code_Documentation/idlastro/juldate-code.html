<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:44 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>juldate.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="juldate.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">PRO JULDATE, DATE, JD, PROMPT = prompt
<span class="comments">;+                                                                  </span>
<span class="comments">; NAME:</span>
<span class="comments">;     JULDATE</span>
<span class="comments">; PURPOSE:                                   </span>
<span class="comments">;     Convert from calendar to Reduced Julian Date</span>
<span class="comments">;</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;     Julian Day Number is a count of days elapsed since Greenwich mean noon </span>
<span class="comments">;     on 1 January 4713 B.C.  The Julian Date is the Julian day number</span>
<span class="comments">;     followed by the fraction of the day elapsed since the preceding noon. </span>
<span class="comments">;</span>
<span class="comments">;     This procedure duplicates the functionality of the JULDAY() function in</span>
<span class="comments">;     in the standard IDL distribution, but also allows interactive input and</span>
<span class="comments">;     gives output as Reduced Julian date (=JD - 2400000.)  </span>

<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     JULDATE, /PROMPT           ;Prompt for calendar Date, print Julian Date</span>
<span class="comments">;               or</span>
<span class="comments">;     JULDATE, date, jd      </span>
<span class="comments">;</span>
<span class="comments">; INPUT:</span>
<span class="comments">;     DATE -  3 to 6-element vector containing year,month (1-12),day, and </span>
<span class="comments">;              optionally hour, minute, and second all specified as numbers</span>
<span class="comments">;              (Universal Time).   Year should be supplied with all digits.</span>
<span class="comments">;              Years B.C should be entered as negative numbers (and note that</span>
<span class="comments">;              Year 0 did not exist).  If Hour, minute or seconds are not </span>
<span class="comments">;              supplied, they will default to 0. </span>
<span class="comments">;</span>
<span class="comments">;  OUTPUT:</span>
<span class="comments">;       JD - Reduced Julian date, double precision scalar.  To convert to</span>
<span class="comments">;               Julian Date, add 2400000.   JULDATE will print the value of</span>
<span class="comments">;               JD at the terminal if less than 2 parameters are supplied, or </span>
<span class="comments">;               if the /PROMPT keyword is set</span>
<span class="comments">;      </span>
<span class="comments">;  OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;       /PROMPT - If this keyword is set and non-zero, then JULDATE will prompt</span>
<span class="comments">;               for the calendar date at the terminal.</span>
<span class="comments">;</span>
<span class="comments">;  RESTRICTIONS:</span>
<span class="comments">;       The procedure HELIO_JD can be used after JULDATE, if a heliocentric</span>
<span class="comments">;       Julian date is required.</span>
<span class="comments">;</span>
<span class="comments">;  EXAMPLE:</span>
<span class="comments">;       A date of 25-DEC-2006 06:25 UT may be expressed as either</span>
<span class="comments">;</span>
<span class="comments">;       IDL> juldate, [2006, 12, 25, 6, 25], jd       </span>
<span class="comments">;       IDL> juldate, [2006, 12, 25.2673611d], jd </span>
<span class="comments">;</span>
<span class="comments">;       In either case, one should obtain a Reduced Julian date of </span>
<span class="comments">;       JD = 54094.7673611</span>
<span class="comments">;</span>
<span class="comments">;  PROCEDURE USED:</span>
<span class="comments">;       GETOPT()</span>
<span class="comments">;  REVISION HISTORY</span>
<span class="comments">;       Adapted from IUE RDAF (S. Parsons)                      8-31-87</span>
<span class="comments">;       Algorithm from Sky and Telescope April 1981   </span>
<span class="comments">;       Added /PROMPT keyword, W. Landsman    September 1992</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Make negative years correspond to B.C. (no year 0), work for year 1582</span>
<span class="comments">;       Disallow 2 digit years.    W. Landsman    March 2000</span>
<span class="comments">;-</span>
 On_error,2 

 if ( N_params() EQ 0 ) and ( ~keyword_set( PROMPT ) ) then begin
     print,'Syntax - JULDATE, date, jd          or JULDATE, /PROMPT'
     print, $
     '  date - 3-6 element vector containing [year,month,day,hour,minute,sec]'
     print,'  jd - output reduced julian date (double precision)'
     return
 endif

 if ( N_elements(date) EQ 0 ) then begin   

    opt = ''                                                          
    rd: read,' Enter Year,Month,Day,Hour, Minute, Seconds (All Numeric): ',opt
    date = getopt( opt, 'F' )

 endif

 case N_elements(date) of      

    6: 
    5: date = [ date, 0.0d]
    4: date = [ date, 0.0d,0.0d]    
    3: date = [ date, 0.0d, 0.0d,0.0d]
    else: message,'Illegal DATE Vector - must have a least 3 elements'

  endcase   

 iy = floor( date[0] ) 
 if iy lt 0 then iy++  else $
    if iy EQ 0 then message,'ERROR - There is no year 0'                   
 im = fix( date[1] )
 date = double(date)
 day = date[2] + ( date[3] + date[4]/60.0d + date[5]/3600.0d) / 24.0d
<span class="comments">;</span>
 if ( im LT 3 ) then begin   <span class="comments">;If month is Jan or Feb, don't include leap day</span>

     iy-- & im = im+12 

 end

 a = long(iy/100)
 ry = float(iy)

 jd = floor(ry*0.25d) + 365.0d*(ry -1860.d) + fix(30.6001d*(im+1.)) + $
      day  - 105.5d

<span class="comments">;Gregorian Calendar starts on Oct. 15, 1582 (= RJD -100830.5)</span>
 if jd GT -100830.5 then jd = jd + 2 - a + floor(a/4)

 if N_params() LT 2 || keyword_set( PROMPT) then begin      
    yr = fix( date[0] )
    print, FORM='(A,I4,A,I3,A,F9.5)',$ 
       ' Year ',yr,'    Month', fix(date[1] ),'    Day', day 
    print, FORM='(A,F15.5)',' Reduced Julian Date:',JD                       
 endif
 
 return                               
 end                                  <span class="comments">; juldate</span>
</code>
    </div>
  </body>
</html>