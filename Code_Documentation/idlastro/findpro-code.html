<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:29 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>findpro.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="findpro.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="FindPro:source"></a>pro FindPro, Proc_Name, NoPrint=NoPrint, DirList=DirList, ProList=ProList
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     FINDPRO</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;     Find all locations of a procedure in the IDL !PATH</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;     FINDPRO searces for the procedure name (as a .pro or a .sav file) in all </span>
<span class="comments">;     IDL libraries or directories given in the !PATH system variable.    This</span>
<span class="comments">;     differs from the intrinsic FILE_WHICH() function which only finds the </span>
<span class="comments">;     first occurence of the procedure name.</span>
<span class="comments">;               </span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;    FINDPRO, [ Proc_Name, /NoPrint, DirList = , ProList = ]</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;     Proc_Name - Character string giving the name of the IDL procedure or </span>
<span class="comments">;             function. Do not include the ".pro" extension. If Proc_Name is</span>
<span class="comments">;             omitted, the program will prompt for PROC_NAME.  "*" wildcards</span>
<span class="comments">;             are permitted.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD INPUT:</span>
<span class="comments">;     /NoPrint - if set, then the file's path is not printed on the screen and</span>
<span class="comments">;             absolutely no error messages are printed on the screen.  If not</span>
<span class="comments">;             set, then - since the MESSAGE routine is used - error messages </span>
<span class="comments">;             will be printed but the printing of informational messages</span>
<span class="comments">;             depends on the value of the !Quiet variable.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD OUTPUTS:</span>
<span class="comments">;     DirList - The directories in which the file is located are returned in</span>
<span class="comments">;             the keyword as a string array.</span>
<span class="comments">;             If the procedure is an intrinsic IDL procedure, then the </span>
<span class="comments">;             value of DirList = ['INTRINSIC'].</span>
<span class="comments">;             If the procedure is not found, the value of DirList = [''].</span>
<span class="comments">;     ProList - The list (full pathnames) of procedures found.  Useful if you</span>
<span class="comments">;             are looking for the name of a procedure using wildcards.</span>
<span class="comments">;</span>
<span class="comments">;     The order of the names in DirList and ProList is identical to the order</span>
<span class="comments">;     in which the procedure name appears in the !PATH</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;     The system variable !PATH is parsed using EXPAND_PATH into individual </span>
<span class="comments">;     directories.  FILE_SEARCH() is used to search the directories for</span>
<span class="comments">;     the procedure name.  If not found in !PATH, then the name is compared </span>
<span class="comments">;     with the list of intrinsic IDL procedures given by the ROUTINE_INFO()</span>
<span class="comments">;     function. </span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;     (1) Find the procedure CURVEFIT.  Assume for this example that the user</span>
<span class="comments">;     also has a copy of the curvefit.pro procedure in her home directory</span>
<span class="comments">;     on a Unix machine.</span>
<span class="comments">;</span>
<span class="comments">;       IDL> findpro, 'curvefit', DIRLIST=DirList</span>
<span class="comments">;       Procedure curvefit.pro found in directory  /home/user/.</span>
<span class="comments">;       Procedure curvefit.pro found in directory  /home/idl/lib/userlib </span>
<span class="comments">;       IDL> help, DirList</span>
<span class="comments">;       DIRLIST         STRING    = Array(2) </span>
<span class="comments">;       IDL> help, DirList[0], DirList[1]</span>
<span class="comments">;       &lt;Expression>    STRING    = '/home/user'</span>
<span class="comments">;       &lt;Expression>    STRING    = '/home/idl/lib/userlib' </span>
<span class="comments">;</span>
<span class="comments">;     (2) Find all procedures in one's !path containing the characters "zoom" </span>
<span class="comments">;</span>
<span class="comments">;       IDL> findpro,'*zoom*'</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       User will be unable to find a path for a native IDL function</span>
<span class="comments">;       or procedure, or for a FORTRAN or C routine added with CALL_EXTERNAL.</span>
<span class="comments">;       Remember that Unix is case sensitive, and most procedures will be in</span>
<span class="comments">;       lower case.</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       FDECOMP   -- Decompose file name</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;       Based on code extracted from the GETPRO procedure, J. Parker 1994</span>
<span class="comments">;       Use the intrinsic EXPAND_PATH function    W. Landsman Nov. 1994</span>
<span class="comments">;       Use ROUTINE_NAMES() to check for intrinsic procs   W. Landsman Jul 95</span>
<span class="comments">;       Added Macintosh, WINDOWS compatibility    W. Landsman   Sep. 95</span>
<span class="comments">;       Removed spurious first element in PROLIST  W. Landsman  March 1997</span>
<span class="comments">;       Don't include duplicate directories  in !PATH  WL   May 1997</span>
<span class="comments">;       Use ROUTINE_INFO instead of undocumented ROUTINE_NAMES W.L. October 1998</span>
<span class="comments">;       Also check for save sets   W. Landsman  October 1999 </span>
<span class="comments">;       Force lower case check for VMS  W. Landsman January 2000 </span>
<span class="comments">;       Only return .pro or .sav files in PROLIST   W. Landsman  January 2002 </span>
<span class="comments">;       Force lower case check for .pro and .sav    D. Swain  September 2002 </span>
<span class="comments">;       Use FILE_SEARCH() if V5.5 or later   W. Landsman June 2006</span>
<span class="comments">;       Assume since V55, remove VMS support W. Landsman Sep. 2006</span>
<span class="comments">;       Assume since V6.0, use file_basename() W.Landsman Feb 2009</span>
<span class="comments">;</span>
<span class="comments">;-</span>
<span class="comments">;/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/</span>

 On_error,2                           <span class="comments">;Return to caller on error</span>
 compile_opt idl2

 if (N_params() EQ 0) then begin      <span class="comments">;Prompt for procedure name?</span>
   Proc_Name = ' ' 
   read,'Enter name of procedure for which you want the path: ',Proc_Name
 endif else $
   if (size(proc_name,/type) NE 7 ) and (N_elements(proc_name) NE 1) then $
       message,'ERROR - First parameter (.pro name) must be a scalar string'

 NoPrint = keyword_set(NoPrint)

 Name = strtrim( file_basename(proc_name,'.pro'), 2 )  

<span class="comments">; Set up separate file and directory separators for current OS</span>

 psep = path_sep()

 pathdir = expand_path(!PATH,/ARRAY, Count = N_dir)
 cd,current = dir 

<span class="comments">; Remove duplicate directories  in !PATH but keep original order</span>
 path_dir = [dir]
 for i = 0,N_dir -1 do begin
      test = where(path_dir EQ pathdir[i], Ndup)
      if Ndup EQ 0 then path_dir = [path_dir,pathdir[i]]
 endfor
 N_dir = N_elements(path_dir)

<span class="comments">; Use FILE_PATH() to search all directories for &lt;name>.pro or &lt;name>.sav files </span>

   ProList = file_search(path_dir + psep + name + '.{pro,sav}', COUNT=Nfile) 
    
      if (Nfile ge 1) then begin                     <span class="comments">;Found by FILE_SEARCH?</span>
       fdecomp, ProList, ddisk,ddir,fname,ext
       dirlist = ddisk + ddir
       found = 1b
       for j = 0,nfile-1 do begin
          case strlowcase(ext[j]) of 
	 'pro':  message,/Con,  NoPrint = NoPrint,/NoPrefix, /Noname, $
                 'Procedure ' + fname[j] + ' found in directory  ' + dirlist[j]
         'sav':  message,/Con,NoPrint = NoPrint,/NoPrefix, /Noname, $
                'Save set ' + fname[j] + '.sav found in directory  ' + dirlist[j]
	 endcase	  
        endfor
     endif  else begin     
           

<span class="comments">; At this point !PATH has been searched.  If the procedure was not found</span>
<span class="comments">; check if it is an intrinsic IDL procedure or function</span>
 
  funcnames = routine_info(/system,/func)
  test = where ( funcnames EQ strupcase(name), fcount)

  funcnames = routine_info(/system)
  test = where ( funcnames EQ strupcase(name), pcount)

   if (fcount EQ 0) and (pcount EQ 0) then begin
        prolist = strarr(1)
  	dirlist = strarr(1)
       if not(NoPrint) then begin
         message, 'Procedure '+Name+' not found in a !PATH directory.', /CONT
         message, 'Check your spelling or search individual directories.', /INF
      endif
   endif else begin 
      DirList = ['INTRINSIC']
      ProList = ['INTRINSIC']
      if not(NoPrint) then begin
         message, 'Procedure ' + Name + ' is an intrinsic IDL procedure.', /CONT
         message, 'No path information available.', /INF
      endif
   endelse

 endelse
  
 return
 end   
</code>
    </div>
  </body>
</html>