<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:30 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>fits_close.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="fits_close.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="fits_close:source"></a>pro fits_close,fcb,no_abort=no_abort,message=message
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;      FITS_CLOSE</span>
<span class="comments">;</span>
<span class="comments">;*PURPOSE:</span>
<span class="comments">;       Close a FITS data file</span>
<span class="comments">;</span>
<span class="comments">;*CATEGORY:</span>
<span class="comments">;       INPUT/OUTPUT</span>
<span class="comments">;</span>
<span class="comments">;*CALLING SEQUENCE:</span>
<span class="comments">;       FITS_CLOSE,fcb</span>
<span class="comments">;</span>
<span class="comments">;*INPUTS:</span>
<span class="comments">;       FCB: FITS control block returned by FITS_OPEN.</span>
<span class="comments">;</span>
<span class="comments">;*KEYWORD PARAMETERS:</span>
<span class="comments">;       /NO_ABORT: Set to return to calling program instead of a RETALL</span>
<span class="comments">;               when an I/O error is encountered.  If set, the routine will</span>
<span class="comments">;               return  a non-null string (containing the error message) in the</span>
<span class="comments">;               keyword MESSAGE.   If /NO_ABORT not set, then FITS_CLOSE will </span>
<span class="comments">;               print the message and issue a RETALL</span>
<span class="comments">;       MESSAGE = value: Output error message</span>
<span class="comments">;       </span>
<span class="comments">;*EXAMPLES:</span>
<span class="comments">;       Open a FITS file, read some data, and close it with FITS_CLOSE</span>
<span class="comments">;</span>
<span class="comments">;               FITS_OPEN,'infile',fcb</span>
<span class="comments">;               FITS_READ,fcb,data</span>
<span class="comments">;               FITS_READ,fcb,moredata</span>
<span class="comments">;               FITS_CLOSE,fcb</span>
<span class="comments">;</span>
<span class="comments">;*HISTORY:</span>
<span class="comments">;       Written by:     D. Lindler      August, 1995</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Do nothing if fcb an invalid structure D. Schlegel/W. Landsman Oct. 2000</span>
<span class="comments">;       Return Message='' for to signal normal operation W. Landsman Nov. 2000</span>
<span class="comments">;-</span>
<span class="comments">;----------------------------------------------------------------------------</span>
<span class="comments">;</span>
<span class="comments">; print calling sequence if no parameters supplied</span>
<span class="comments">;</span>
        if N_params() lt 1 then begin
                print,'Syntax -  FITS_CLOSE, fcb'
                print,'KEYWORD PARAMETERS: /No_abort, message='
                return
        end
<span class="comments">;</span>
<span class="comments">; close unit</span>
<span class="comments">;</span>
        on_ioerror,ioerror
        message = ''

        sz_fcb = size(fcb)             <span class="comments">;Valid structure?</span>
        if sz_fcb[2] EQ 8 then free_lun,fcb.unit
        return
<span class="comments">;</span>
<span class="comments">; error exit (probably should never occur)</span>
<span class="comments">;</span>
ioerror:
        message = !error_state.msg
         if keyword_set(no_abort) then return
        message,' ERROR: '+message,/CON
        retall
end
</code>
    </div>
  </body>
</html>