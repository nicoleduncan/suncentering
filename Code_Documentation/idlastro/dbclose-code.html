<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:25 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dbclose.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dbclose.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="dbclose:source"></a>pro dbclose,dummy
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       DBCLOSE</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       procedure to close a data base file</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:  </span>
<span class="comments">;       dbclose</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       None</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS</span>
<span class="comments">;       None</span>
<span class="comments">;</span>
<span class="comments">; SIDE EFFECTS:</span>
<span class="comments">;       the data base files currently opened are closed</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE CALLS:</span>
<span class="comments">;       DB_INFO(), HOST_TO_IEEE</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;       version 2  D. Lindler  Oct. 1987</span>
<span class="comments">;       For IDL version 2      August 1990</span>
<span class="comments">;       William Thompson, GSFC/CDS (ARC), 30 May 1994</span>
<span class="comments">;                Added support for external (IEEE) data format</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
<span class="comments">;------------------------------------------------------------------------</span>
 On_error,2
 common db_com, QDB, QITEMS, QDBREC         <span class="comments">;Database common - see DBOPEN</span>

 if N_elements(qdb) LT 120 then return	<span class="comments">;No db opened</span>
 ndb = db_info('NUMBER')		<span class="comments">;number of data bases opened</span>
 update = db_info('UPDATE',0)		<span class="comments">;opened for update?</span>

<span class="comments">; If database open for update, write total number of entries in zeroeth record</span>

 if update EQ 1 then begin		<span class="comments">;update header</span>
	output = [db_info('entries',0), db_info('seqnum',0)]
	if qdb[119] eq 1 then host_to_ieee, output	<span class="comments">;External format?</span>
        qdbrec[0] = byte(output,0,8)
 endif

 for i = 0, ndb-1 do begin		<span class="comments">;loop on units (2 per data base)</span>
        unit1 = qdb[96,i]			<span class="comments">;unit numbers</span>
        unit2 = qdb[97,i]			<span class="comments">;unit numbers</span>
	if unit1 gt 0 then free_lun,unit1       <span class="comments">;Is it opened?</span>
	if unit2 gt 0 then free_lun,unit2       <span class="comments">;Is it opened?</span>
 endfor

 qdb=0					<span class="comments">;mark as closed</span>

 return                                                              
 end
</code>
    </div>
  </body>
</html>