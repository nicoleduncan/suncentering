<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:29 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>filter_image.pro (Documentation for ./)</title>

    

    <script type="text/javascript" src="../idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="../idldoc-resources/js/copybutton.js"></script>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="filter_image.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">

    <div class="header">
      <h1>Documentation for ./</h1>
      <h2>Generated by IDLdoc</h2>
    </div>
    
    
    <table class="navbar smaller" summary="Navigation header" cellspacing="0">
      <tr>
        <td >
          <a href="../overview.html">Overview</a>
        </td>
    
        <td >
          Directory
        </td>
    
        <td class="selected">File</td>
    
        
        <td >
          <a href="filter_image-code.html" title="Chromocoded source">Source</a> <a href="filter_image.pro" title=".pro file"><img src="../idldoc-resources/attach.png" alt="[attach.png]" align="top"/></a>
        </td>
        
    
        <td >Etc</td>
    
        <td >
        	<a href="../categories.html">Categories</a>
        </td>
    
        <td >
        	<a href="../search.html">Search</a>
        </td>
    
        
        <td >
          <a href="../idldoc-index.html">Index</a>
        </td>
        
    
        
    
        <td >
          <a href="../idldoc-help.html">Help</a>
        </td>
    
        <td class="flexible">
          User documentation
        </td>
      </tr>
    </table>
    
    
    
    <p class="localnavbar smallest"><a href="" target="_top">single page</a> | <a href="../index.html" target="_top">use frames</a> &nbsp;&nbsp;&nbsp; summary &nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp; fields &nbsp;&nbsp;&nbsp; <a href="#routine-details">routine details</a> &nbsp;&nbsp;&nbsp; <a href="#attributes">file attributes</a></p>
    
    
    
    
    
    
    
    
    

    <div class="content">
      <h2 class="directory">idlastro/</h2>
      <h1 class="basename">filter_image.pro<span class="file-attributes"></span></h1>
      

      
      
      
      <br/>

      

      

      

      

      

      


      
      <div id="routine-details">
        

        
        <div class="routine-details details" id="filter_image">
          <h2 class="routine-name"><a href="#root" class="top">top</a> <a href="filter_image-code.html#filter_image:source" class="top">source</a> filter_image<span class="routine-attributes"></span></h2>

          

          <p class="syntax"><code><span class="var">result</span> = filter_image(<span class="argument"><a href="#filter_image:p:image">image</a></span><span class="argument">, <a href="#filter_image:k:SMOOTH">SMOOTH</a>=<span class="var">SMOOTH</span></span><span class="argument">, <a href="#filter_image:k:ITERATE_SMOOTH">ITERATE_SMOOTH</a>=<span class="var">ITERATE_SMOOTH</span></span><span class="argument">, <a href="#filter_image:k:MEDIAN">MEDIAN</a>=<span class="var">MEDIAN</span></span><span class="argument">, <a href="#filter_image:k:ALL_PIXELS">ALL_PIXELS</a>=<span class="var">ALL_PIXELS</span></span><span class="argument">, <a href="#filter_image:k:FWHM_GAUSSIAN">FWHM_GAUSSIAN</a>=<span class="var">FWHM_GAUSSIAN</span></span><span class="argument">, <a href="#filter_image:k:NO_FT_CONVOL">NO_FT_CONVOL</a>=<span class="var">NO_FT_CONVOL</span></span><span class="argument">, <a href="#filter_image:k:PSF">PSF</a>=<span class="var">PSF</span></span>)</code></p>

          
          <div class="small "><p> NAME:
       FILTER_IMAGE
</p>

<p> PURPOSE:
       Identical to MEDIAN or SMOOTH but handle edges and allow iterations.
 EXPLANATION:
       Computes the average and/or median of pixels in moving box,
       replacing center pixel with the computed average and/or median,
       (using the IDL SMOOTH() or MEDIAN() functions).
       The main reason for using this function is the options to
       also process the pixels at edges and corners of image, and,
       to apply iterative smoothing simulating convolution with Gaussian,
       and/or to convolve image with a Gaussian kernel.    Users might also
       look at the function ESTIMATOR_FILTER() introduced in IDL 7.1.
</p>

<p> CALLING SEQUENCE:
       Result = filter_image( image, SMOOTH=width, MEDIAN = width, /ALL_PIXELS
                               /ITERATE, FWHM =,  /NO_FT_CONVOL)
</p>

<p> INPUT:
       image = 2-D array (matrix)
</p>

<p> OPTIONAL INPUT KEYWORDS:
       SMOOTH = scalar (odd) integer specifying the width of a square box
               for moving average, in # pixels.  /SMOOTH  means use box
               width = 3 pixels for smoothing.
</p>

<p>        MEDIAN = scalar (usually odd) integer specifying the width of square
               moving box for median filter, in # pixels.   /MEDIAN  means use
               box width = 3 pixels for median filter.
</p>

<p>       /ALL_PIXELS causes the edges of image to be filtered as well.   This
               is accomplished by reflecting pixels adjacent to edges outward
               (similar to the /EDGE_WRAP keyword in CONVOL).
               Note that this is a different algorithm from the /EDGE_TRUNCATE
               keyword to SMOOTH or CONVOL, which duplicates the nearest pixel.
</p>

<p>       /ITERATE means apply smooth(image,3) iteratively for a count of
               (box_width-1)/2 times (=radius), when box_width &gt;= 5.
               This is equivalent to convolution with a Gaussian PSF
               of FWHM = 2 * sqrt( radius ) as radius gets large.
               Note that /ALL_PIXELS is automatically applied,
               giving better results in the iteration limit.
               (also, MEDIAN keyword is ignored when /ITER is specified).
</p>

<p>       FWHM_GAUSSIAN = Full-width half-max of Gaussian to convolve with image.
                       FWHM can be a single number (circular beam),
                       or 2 numbers giving axes of elliptical beam.
</p>

<p>       /NO_FT_CONVOL causes the convolution to be computed directly,
               with intrinsic IDL CONVOL function.   The default is to use
               FFT when factors of size are all LE 13.   Note that
               external function convolve.pro handles both cases)
</p>

<p> OPTIONAL INPUT/OUTPUT KEYWORD:
     PSF = Array containing the PSF used during the convolution.   This
           keyword is only active if the FWHM_GAUSSIAN keyword is also
           specified.     If PSF is undefined on input, then upon output it
           contains the Gaussian convolution specified by the FWHM_GAUSSIAN
           keyword.    If the PSF array is defined on input then it is used
           as the convolution kernel,  the value of the  FWHM_GAUSSIAN keyword
           is ignored.      Typically, on a first call set PSF to an undefined
           variable, which can be reused for subsequent calls to prevent
           recalculation of the Gaussian PSF.
 RESULT:
       Function returns the smoothed, median filtered, or convolved image.
       If both SMOOTH and MEDIAN are specified, median filter is applied first.
       If only SMOOTH is applied, then output is of same type as input.  If
       either MEDIAN or FWHM_GAUSSIAN is supplied than the output is at least
       floating (double if the input image is double).
</p>

<p> EXAMPLES:
       To apply 3x3 moving median filter and
       then 3x3 moving average, both applied to all pixels:
</p>

<p>               Result = filter_image( image, /SMOOTH, /MEDIAN, /ALL )
</p>

<p>       To iteratively apply 3x3 moving average filter for 4 = (9-1)/2 times,
       thus approximating convolution with Gaussian of FWHM = 2*sqrt(4) = 4 :
</p>

<p>               Result = filter_image( image, SMOOTH=9, /ITER )
</p>

<p>       To convolve all pixels with Gaussian of FWHM = 3.7 x 5.2 pixels:
</p>

<p>               Result = filter_image( image, FWHM=[3.7,5.2], /ALL )
</p>

<p> EXTERNAL CALLS:
       function psf_gaussian
       function convolve
       pro factor
       function prime          ;all these called only if FWHM is specified
</p>

<p> PROCEDURE:
       If both /ALL_PIXELS (or /ITERATE)  keywords are set then
       create a larger image by reflecting the edges outward, then call the
       IDL MEDIAN() or SMOOTH() function on the larger image, and just return
       the central part (the original size image).
</p>

<p>       NAN values are recognized during calls to MEDIAN() or SMOOTH(), but
       not for convolution with a Gaussian (FWHM keyword supplied).
 HISTORY:
       Written, 1991, Frank Varosi, NASA/GSFC.
       FV, 1992, added /ITERATE option.
       FV, 1993, added FWHM_GAUSSIAN= option.
       Use /EVEN call to median, recognize NAN values in SMOOTH
                  W. Landsman   June 2001
       Added PSF keyword,   Bjorn Heijligers/WL, September 2001
       Keep same output data type if /ALL_PIXELS supplied A. Steffl Mar 2011
</p>

</div>
          

          

          
          <h3>Parameters</h3>
            <dl>
              
              <dt id="filter_image:p:image">image <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
            </dl>
          

          
          <h3>Keywords</h3>
            <dl>
              
              <dt id="filter_image:k:SMOOTH">SMOOTH <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:ITERATE_SMOOTH">ITERATE_SMOOTH <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:MEDIAN">MEDIAN <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:ALL_PIXELS">ALL_PIXELS <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:FWHM_GAUSSIAN">FWHM_GAUSSIAN <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:NO_FT_CONVOL">NO_FT_CONVOL <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
              <dt id="filter_image:k:PSF">PSF <span class="smaller"></span></dt>
              <dd class="small"></dd>
              
            </dl>
          

          

          

          

          

        </div>
        

      </div>
      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Tue Oct 23 10:15:50 2012</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>196</td>
          </tr>

          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.5.1 on Mon Sep 30 16:57:29 2013</td>
          <td class="right"><a target="_top" href="http://idldoc.idldev.com">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>