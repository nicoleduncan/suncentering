<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:09 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tvcircle.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tvcircle.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">Pro Tvcircle, radius, xc, yc, color, COLOR = TheColor, Device=device, $
               DATA= data, FILL=fill,_Extra = _extra
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     TVCIRCLE</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;     Draw circle(s) of specified radius at specified position(s) </span>
<span class="comments">; EXPLANATION: </span>
<span class="comments">;     If a position is not specified, and device has a cursor, then a circle</span>
<span class="comments">;     is drawn at the current cursor position.    By default, TVCIRCLE now</span>
<span class="comments">;     (since Jan 2012) assumes data coordinates if !X.crange is set.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;     TVCIRCLE, rad, x, y, color, [ /DATA, /FILL, _EXTRA  =  ]         </span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;     RAD - radius of circle(s) to be drawn, positive numeric scalar</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;      X - x position for circle center, vector or scalar</span>
<span class="comments">;      Y - y position for circle center, vector or scalar</span>
<span class="comments">;               If X and Y are not specified, and the device has a cursor, </span>
<span class="comments">;               then program will draw a circle at the current cursor position</span>
<span class="comments">;      COLOR -  color name or intensity value(s) (0 - !D.N_COLORS) used to draw</span>
<span class="comments">;               the circle(s).   If COLOR is a scalar then all circles are drawn</span>
<span class="comments">;               with the same color value.   Otherwise, the Nth circle is drawn</span>
<span class="comments">;               with the  Nth value of color.  See cgCOLOR() for a list of color</span>
<span class="comments">;               names.  Default = 'opposite' (i.e. color opposite the </span>
<span class="comments">;               background).   </span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL KEYWORD INPUTS:</span>
<span class="comments">;       /DATA - if this keyword is set and non-zero, then the circle width and</span>
<span class="comments">;              X,Y position center are interpreted as being in DATA </span>
<span class="comments">;              coordinates.   Note that data coordinates must be previously</span>
<span class="comments">;              defined (with a PLOT or CONTOUR call).    TVCIRCLE will</span>
<span class="comments">;              internally convert to device coordinates before drawing the</span>
<span class="comments">;              circle, in order to maintain optimal smoothness.    The default</span>
<span class="comments">;              is to assume data coordinates if !X.CRANGE is set.    Force</span>
<span class="comments">;              device coordinates by setting DATA = 0 or /DEVICE</span>
<span class="comments">;       /DEVICE - If set, then force use of device coordinates..</span>
<span class="comments">;       /FILL  - If set, fill the circle using cgCOLORFILL</span>
<span class="comments">;</span>
<span class="comments">;               Any keyword recognized by cgPLOTS (or cgCOLORFILL if /FILL is </span>
<span class="comments">;               set) is also recognized by TVCIRCLE.   In particular, the color,</span>
<span class="comments">;               linestyle, thickness and clipping of the circles are controlled</span>
<span class="comments">;               by the  COLOR, LINESTYLE, THICK and NOCLIP keywords.  (Clipping</span>
<span class="comments">;               is turned off by default, set NOCLIP=0 to activate it.)</span>
<span class="comments">;               If /FILL is set then available keywords are LINE_FILL and </span>
<span class="comments">;               FILL_PATTERN. </span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       None</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       (1) Some round-off error may occur when non-integral values are </span>
<span class="comments">;           supplied for both the radius and the center coordinates</span>
<span class="comments">;       (2) TVCIRCLE does not accept /NORMAL coordinates.</span>
<span class="comments">;       (3) TVCIRCLE always draws a circle --- even when in data coordinates </span>
<span class="comments">;           and the X and Y data scales are unequal.    (The X data scale is </span>
<span class="comments">;           used to define the circle radius.)     If this is not the behaviour</span>
<span class="comments">;           you want, then use TVELLIPSE instead.</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       (1) Draw circles of radius 9 pixels at the positions specified by </span>
<span class="comments">;           X,Y vectors, using double thickness lines</span>
<span class="comments">;</span>
<span class="comments">;           IDL> tvcircle, 9, x, y, THICK = 2</span>
<span class="comments">;</span>
<span class="comments">;           Now fill in the circles using the LINE_FILL method</span>
<span class="comments">;</span>
<span class="comments">;           IDL> tvcircle, 9, x, y, /FILL, /LINE_FILL</span>
<span class="comments">; METHOD:</span>
<span class="comments">;           The method used is that of Michener's, modified to take into account</span>
<span class="comments">;           the fact that IDL plots arrays faster than single points.   See</span>
<span class="comments">;           "Fundamental of Interactive Computer Graphics" by Foley and Van Dam"</span>
<span class="comments">;           p. 445 for the algorithm.</span>
<span class="comments">;</span>
<span class="comments">; REVISON HISTORY:</span>
<span class="comments">;           Original version   written by B. Pfarr  STX   10-88 </span>
<span class="comments">;           Major rewrite adapted from CIRCLE by Allyn Saroyan   LNLL</span>
<span class="comments">;           Wayne Landsman   STX     Sep. 91</span>
<span class="comments">;           Added DATA keyword   Wayne Landsman  HSTX    June 1993</span>
<span class="comments">;           Added FILL keyword.  R. S. Hill, HSTX, 4-Nov-1993</span>
<span class="comments">;           Always convert to device coords, add _EXTRA keyword, allow vector</span>
<span class="comments">;           colors.   Wayne Landsman, HSTX,  May 1995</span>
<span class="comments">;           Allow one to set COLOR = 0,   W. Landsman, HSTX, November 1995</span>
<span class="comments">;           Check if data axes reversed.  P. Mangifico, W. Landsman  May 1996</span>
<span class="comments">;           Use strict_extra to check input keywords W. Landsman  July 2005</span>
<span class="comments">;           Update documentation to note NOCLIP=0 option W.L.  Oct. 2006</span>
<span class="comments">;           Make all integers default to LONG  W. Landsman  Dec 2006</span>
<span class="comments">;           Use Coyote Graphics procedures W. Landsman Feb 2011</span>
<span class="comments">;           Default to data coordinates if !X.crange present  WL Jan 2012</span>
<span class="comments">;           Add /DEVICE coords, fix Jan 2012 update.   Mar 2012</span>
<span class="comments">;-</span>

   On_Error, 2   <span class="comments">; Return to caller</span>
   compile_opt idl2

   if ( N_params() LT 1) then begin
       print, 'Syntax - TVCIRCLE, rad, [ xc, yc, color, /DATA, /FILL, _EXTRA= ]'
       return
   endif

<span class="comments">; Default to data coordinates if !X.crange is set (previous plot) </span>
   if keyword_set(device) then datacoord = 0 else begin
      if N_elements(data) eq 0 then datacoord = !x.crange[0] NE !x.crange[1]  $
                          else datacoord = logical_true(data)
   endelse   			  
		  
   if N_elements(radius) NE 1 then message, $
          'ERROR - Circle radius (first parameter) must be a scalar'

   if N_elements(TheColor) EQ 0 then begin
      IF N_Elements( Color ) EQ 0 THEN Color = cgcolor('opposite')
   endif else color = TheColor


  if N_params() LT 3 then begin
        if (!D.WINDOW EQ -1) then message, $
                'ERROR - Cursor not available for device ' + !D.NAME
        cursor, xc, yc, /DEVICE, /NOWAIT
        if (xc LT 0) || (yc LT 0) then begin
        message,'Position cursor in window ' + strtrim(!D.WINDOW,2) + $
                ' -- then hit mouse button',/INF
        cursor, xc, yc, /DEVICE, /WAIT
        message,'Circle is centered at (' + strtrim(xc,2) + ',' + $
                strtrim(yc,2) + ')',/INF
  endif

  endif 

    N_circle = min( [ N_elements(xc), N_elements(yc) ] )


    if datacoord then begin 
                coord = abs(convert_coord(radius,0,/data,/to_dev) - $
                        convert_coord(0,0,/data,/to_dev)) 
                irad =  round( coord[0] )
    endif else $
               irad = round(radius)	             

   x = 0
   y = irad 
   d = 3 - 2 * irad


   <span class="comments">; Find the x and y coordinates for one eighth of a circle.</span>
   <span class="comments">; The maximum number of these coordinates is the radius of the circle.</span>

   xHalfQuad = Make_Array( irad + 1, /Long, /NoZero )
   yHalfQuad = xHalfQuad

   path = 0

   WHILE x lt y $
   DO BEGIN

      xHalfQuad[path] = x
      yHalfQuad[path] = y

      path++

      IF d lt 0 $
      THEN d += 4*x + 6 $
      ELSE BEGIN

           d +=  4*(x-y) + 10
           y--

           END

      x++

      END

   IF x eq y $
   THEN BEGIN <span class="comments">; Fill in last point</span>

        xHalfQuad[path] = x
        yHalfQuad[path] = y

        path++

        END <span class="comments">; Filling in last point</span>

   <span class="comments">; Shrink the arrays to their correct size</span>

   xHalfQuad = xHalfQuad[ 0:path-1 ]
   yHalfQuad = yHalfQuad[ 0:path-1 ]

   <span class="comments">; Convert the eighth circle into a quadrant</span>

   xQuad = [ xHalfQuad, Rotate(yHalfQuad, 5) ]
   yQuad = [ yHalfQuad, Rotate(xHalfQuad, 5) ]

   <span class="comments">; Prepare for converting the quadrants into a full circle</span>

   xQuadRev = Rotate( xQuad[0:2*path-2], 5 )
   yQuadRev = Rotate( yQuad[0:2*path-2], 5 )

   <span class="comments">; Create full-circle coordinates</span>

   x = [ xQuad, xQuadRev, -xQuad[1:*], -xQuadRev ]
   y = [ yQuad, -yQuadRev, -yQuad[1:*], yQuadRev ]

   <span class="comments">; Plot the coordinates about the given center</span>
   
   if datacoord then begin        <span class="comments">;Convert to device coordinates</span>
        coord = convert_coord( xc, yc, /DATA, /TO_DEVICE)
        xcen = round(coord[0,*]) & ycen = round(coord[1,*])
   endif else begin
        xcen = round(xc) & ycen = round(yc)
   endelse


   Ncolor1 = N_elements(color) -1
   for i = 0l, N_circle-1 do begin
      j = i &lt<span class="comments">; Ncolor1</span>
      if keyword_set(fill) then begin
            cgcolorfill, x+xcen[i],  y + ycen[i], COLOR=color[j], /DEV, $
            _STRICT_Extra = _extra
      endif else begin
            cgPlotS, x + xcen[i], y+ ycen[i], COLOR = Color[j], /DEV, $
            _STRICT_Extra = _extra
      endelse

   endfor

   Return
   End<span class="comments">; TVcircle</span>
</code>
    </div>
  </body>
</html>