<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:32 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>fthelp.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="fthelp.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="fthelp:source"></a>pro fthelp,h,TEXTOUT=textout
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       FTHELP</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Routine to print a description of a FITS ASCII table extension</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       FTHELP, H, [ TEXTOUT = ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       H - FITS header for ASCII table extension, string array</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD</span>
<span class="comments">;       TEXTOUT - scalar number (0-7) or string (file name) determining</span>
<span class="comments">;               output device (see TEXTOPEN).  Default is TEXTOUT=1, output </span>
<span class="comments">;               to the user's terminal    </span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       FTHELP checks that the keyword XTENSION  equals 'TABLE' in the FITS</span>
<span class="comments">;               header.</span>
<span class="comments">;</span>
<span class="comments">; SYSTEM VARIABLES:</span>
<span class="comments">;       Uses the non-standard system variables !TEXTOUT and !TEXTUNIT</span>
<span class="comments">;       which must be defined (e.g. with ASTROLIB) prior to compilation.</span>
<span class="comments">; PROCEDURES USED:</span>
<span class="comments">;       REMCHAR, SXPAR(), TEXTOPEN, TEXTCLOSE, ZPARCHECK</span>
<span class="comments">;</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;       version 1  W. Landsman  Jan. 1988</span>
<span class="comments">;       Add TEXTOUT option, cleaner format  W. Landsman   September 1991</span>
<span class="comments">;       TTYPE value can be longer than 8 chars,  W. Landsman  August 1995</span>
<span class="comments">;       Remove calls to !ERR, some vectorization  W. Landsman  February 2000 </span>
<span class="comments">;       Slightly more compact display  W. Landsman  August 2005</span>
<span class="comments">;-</span>
 compile_opt idl2
 On_error,2                                  <span class="comments">;Return to caller</span>

 if N_params() EQ 0 then begin
     print,'Syntax - FTHELP, hdr, [ TEXTOUT = ]'
     return
 endif

 zparcheck,'FTHELP',h,1,7,1,'Table Header'     <span class="comments">;Make sure a string array</span>

 n = sxpar( h, 'TFIELDS' , Count = N_TFields) 
 if N_TFields EQ 0 then message, $
        'ERROR - FITS Header does not include required TFIELDS keyword'
 if strtrim(sxpar(h,'XTENSION'),2) ne 'TABLE' then $
        message,'WARNING - Header is not for a FITS Table',/INF

 if not keyword_set(TEXTOUT) then textout = 1
 textopen,'fthelp',TEXTOUT=textout

 naxis = sxpar( h, 'NAXIS*')
 printf,!TEXTUNIT,'FITS ASCII Table: ' +$
        'Size ',strtrim(naxis[0],2),' by ',strtrim(naxis[1],2)

 extname = sxpar(h,'EXTNAME', Count=N_ext)	
 if N_ext GT 0 then printf,!TEXTUNIT, 'Extension Name:   ',sxpar(h,'EXTNAME')
 extver = sxpar(h, 'EXTVER', Count = N_extver)
 if N_extver GT 0 then printf,!TEXTUNIT,'Version: ',extver
 printf,!TEXTUNIT,' '                         
 printf,!TEXTUNIT,  $
 'Field      Name               Unit           Format     Column'

 tbcol = intarr(n)
 tform = strarr(n) & tunit = tform & ttype =tform
 name = strmid(h,0,5)
 number = strtrim(strmid(h,5,3),2)
 value = strtrim(strmid(h,11,20),2)

 for i = 1, N_elements(h)-1 do begin
  case name[i] of
   'TTYPE':  ttype[fix(number[i]-1)] = value[i]
   'TFORM':  tform[fix(number[i]-1)] = value[i]
   'TUNIT':  tunit[fix(number[i]-1)] = value[i]
   'TBCOL':  tbcol[fix(number[i]-1)] = fix(value[i])
   'END  ':  goto, DONE 
    ELSE :
 end

 endfor

DONE:                            <span class="comments">;Done reading FITS header</span>

 ttype = strtrim(ttype,2) & remchar,ttype,"'"
 remchar,tunit,"'"
 remchar,tform,"'"
 for i = 0,n-1 do  printf,!TEXTUNIT,i+1,ttype[i],tunit[i],tform[i],tbcol[i], $
              f='(I5,T9,A,T30,A,T47,A,T55,I8)'

 textclose,TEXTOUT=textout

 return
 end
</code>
    </div>
  </body>
</html>