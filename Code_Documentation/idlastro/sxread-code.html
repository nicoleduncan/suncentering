<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:04 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>sxread.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="sxread.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="sxread:source"></a>function sxread,unit,group,par
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	SXREAD</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Read a Space Telescope STSDAS image file     </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	result = sxread( Unit, group , [par] )</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	UNIT  =  Unit number of file, must be from 1 to 9.</span>
<span class="comments">;		Unit must have been opened with SXOPEN.</span>
<span class="comments">;	GROUP  =  group number to read.  if omitted, read first record.</span>
<span class="comments">;		The first record is number 0.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	Result of function  =  array constructed from designated record.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL OUTPUT:</span>
<span class="comments">;	PAR  =  Variable name into which parameter values from STSDAS</span>
<span class="comments">;		group parameter block are read.  It is a byte array</span>
<span class="comments">;		which may contain multiple data types.  The function</span>
<span class="comments">;		SXGPAR can be used to retrieve values from it.</span>
<span class="comments">;</span>
<span class="comments">; COMMON BLOCKS:</span>
<span class="comments">;	Uses IDL Common STCOMMN to access parameters.</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;	Use the function SXGREAD to read the group parameter blocks without</span>
<span class="comments">;	having to read the group array.</span>
<span class="comments">;</span>
<span class="comments">;	If the STSDAS file does not contain groups, then the optional output</span>
<span class="comments">;	parameter PAR is returned undefined, but no error message is given.</span>
<span class="comments">;</span>
<span class="comments">; SIDE EFFECTS:</span>
<span class="comments">;	IO is performed. </span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;	WRITTEN, Don Lindler, July, 1 1987</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
 On_error,2

<span class="comments">; common block containing description of file (see SXOPEN)</span>

	common stcommn,result,filename

<span class="comments">; check if unit open</span>

 if ( unit LT 1 ) or ( unit GT 9 ) then $
     message,'Invalid unit number, must be between 1 and 9'

 if N_elements(result) EQ 0 then result = 0

 if ( N_elements(result) NE 200 ) or ( result[0,unit] NE 121147 ) then $
        message,'Specified unit is not open'

 desc = result[*,unit]				<span class="comments">;description for unit</span>

<span class="comments">; default group number is 0 (first group)</span>

 if N_params() eq 1 then group = 0

<span class="comments">; read group parameters if requested</span>

 if (N_params() GT 2) and ( desc[7] GT 0 ) then begin
	parrec = assoc(UNIT, bytarr(desc[7]),(group+1)*desc[9]-desc[7])
	par = parrec[0]
 end

<span class="comments">; read data with dimensions specified in desc.</span>

 ndimen = desc[3]
 dtype  =  desc[8]
 dimen = desc[10:9+ndimen]
 sbyte = long(group)*desc[9]

 rec  =  assoc(unit,make_array(size=[ndimen,dimen>1,dtype,0],/nozero),sbyte)

 return,rec[0]

 end
</code>
    </div>
  </body>
</html>