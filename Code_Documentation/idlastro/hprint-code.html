<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:42 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>hprint.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="hprint.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="hprint:source"></a>pro hprint, h, firstline
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       HPRINT</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Display a FITS header (or other string array) </span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       On a GUI terminal, the string array is displayed using XDISPSTR.    </span>
<span class="comments">;       If printing at a non-GUI terminal, the string array is  printed 1 line </span>
<span class="comments">;       at a  time, to make sure that each element of the string array is </span>
<span class="comments">;       displayed on a separate line. </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       HPRINT, h, [ firstline ]</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       H - FITS header (or any other string array).</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;       FIRSTLINE - scalar integer specifying the first line to begin </span>
<span class="comments">;               displaying.   The default is FIRSTLINE = 1, i.e. display </span>
<span class="comments">;               all the lines.     If Firstline is negative, then the first</span>
<span class="comments">;               line to be printed is counted backward from the last line.</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;       When displaying at the terminal, HPRINT has the following differences </span>
<span class="comments">;       from the intrinsic PRINT procedure</span>
<span class="comments">;</span>
<span class="comments">;       (1) Arrays are printed one line at a time to avoid a space between 80</span>
<span class="comments">;               character lines</span>
<span class="comments">;       (2) Lines are trimmed with STRTRIM before being printed to speed up </span>
<span class="comments">;               display</span>
<span class="comments">;       (3) The /more option is used for output. </span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Read the header from a FITS file named 'test.fits' and display it at the</span>
<span class="comments">;       terminal beginning with line 50</span>
<span class="comments">;</span>
<span class="comments">;       IDL> h = headfits( 'test.fits')         ;Read FITS header</span>
<span class="comments">;       IDL> hprint, h, 50                      ;Display starting at line 50</span>
<span class="comments">;</span>
<span class="comments">;       To print the last 25 lines of the header</span>
<span class="comments">;</span>
<span class="comments">;       IDL> hprint, h, -25</span>
<span class="comments">;</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;       Written W. Landsman                     July, 1990</span>
<span class="comments">;       Added test for user quit                July, 1991</span>
<span class="comments">;       Added optional FIRSTLINE parameter      November, 1992</span>
<span class="comments">;       Modified for when STDOUT is not a TTY W. Landsman  September 1995</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Fixed printing in IDLDE, C. Gehman      August, 1998</span>
<span class="comments">;       Skip PRINTF if IDL in demo mode  W. Landsman  October 2004</span>
<span class="comments">;       Fixed bug on non-terminals, William Thompson, 18-Oct-2004</span>
<span class="comments">;       Assume since V5.4 Use BREAK instead of GOTO  W. Landsman Apr 2006</span>
<span class="comments">;       Call XDISPSTR on a GUI terminal  W. Landsman Jun 2006</span>
<span class="comments">;-</span>
  On_error,2                        <span class="comments">;Return to Caller</span>
  compile_opt idl2

  if N_params() EQ 0 then begin
       print,'Syntax - HPRINT, h, [ firstline ]'
       return
  endif

  n = N_elements(h)
  if ( n EQ 0 ) then    $               <span class="comments">;Make sure input array is defined</span>
     message,'String array (first parameter) not defined'

   if N_elements( firstline ) EQ 0 then firstline = 1
  if ( firstline[0] LT 0 ) then firstline = ( n + firstline[0]) > 1 &lt<span class="comments">; n  $</span>
                                else firstline = firstline[0] > 1 &lt<span class="comments">; n</span>

  stdout = fstat(-1)
  if stdout.isagui then begin 
           xdispstr,h,tit='HPRINT',top_line=firstline-1
           return
  endif	   
  if lmgr(/demo) then begin      <span class="comments">;in demo mode?</span>
      for i=firstline-1, n-1 do print,h[i]
      return
  endif


<span class="comments">; Now print the array one line at a time</span>
  if (stdout.isatty) then begin  <span class="comments">;Open with /MORE if a TTY</span>
      
      openw, outunit, filepath(/TERMINAL), /MORE, /GET_LUN  
      for i = firstline-1, n-1 do begin

     printf, outunit, strtrim( h[i] )
     if !ERR EQ 1 then BREAK     <span class="comments">;User entered "Q" in response to /more</span>

  endfor
  free_lun, outunit

 endif else printf,-1,strtrim(h[firstline-1:*]), FORMAT='(A)'

  return
  end
</code>
    </div>
  </body>
</html>