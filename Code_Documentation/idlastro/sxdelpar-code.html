<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:03 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>sxdelpar.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="sxdelpar.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="sxdelpar:source"></a>pro sxdelpar, h, parname
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	SXDELPAR</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Procedure to delete a keyword parameter(s) from a FITS header</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	sxdelpar, h, parname</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	h - FITS or STSDAS header, string array</span>
<span class="comments">;	parname - string or string array of keyword name(s) to delete</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;	h - updated FITS header, If all lines are deleted from </span>
<span class="comments">;		the header, then h is returned with a value of 0</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;	Delete the astrometry keywords CDn_n from a FITS header, h</span>
<span class="comments">;</span>
<span class="comments">;	IDL> sxdelpar, h, ['CD1_1','CD1_2','CD2_1','CD2_2']</span>
<span class="comments">;</span>
<span class="comments">; NOTES:</span>
<span class="comments">;	(1)  No message is returned if the keyword to be deleted is not found</span>
<span class="comments">;	(2)  All appearances of a keyword in the header will be deleted</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	version 1  D. Lindler Feb. 1987</span>
<span class="comments">;	Test for case where all keywords are deleted    W. Landsman Aug 1995 </span>
<span class="comments">;       Allow for headers with more than 32767 lines W. Landsman Jan. 2003</span>
<span class="comments">;       Use ARRAY_EQUAL, cleaner syntax  W. L.  July 2009</span>
<span class="comments">;------------------------------------------------------------------</span>
 On_error,2
 compile_opt idl2

 if N_Params() LT 2 then begin
      print,'Syntax - SXDELPAR, h, parname'
      return
 endif

<span class="comments">; convert parameters to string array of upper case names of length 8 char</span>


 if size(parname,/type) NE 7 then $
         message,'Keyword name(s) must be a string or string array'
 par = strtrim( strupcase(parname),2 ) 

 sz = size(h,/structure)
 if (sz.N_dimensions NE 1) or (sz.type NE 7) then $
	message,'FITS header (1st parameter) must be a string array'

 nlines = sz.N_elements		<span class="comments">;number of lines in header array</span>
 pos = 0L		<span class="comments">;position in compressed header with keywords removed</span>

<span class="comments">; loop on header lines</span>

 keyword = strtrim( strmid(h,0,8), 2 )
 for i = 0L, nlines-1 do begin
        if array_equal(keyword[i] NE par, 1b) then begin   
 	   h[pos] = h[i]		<span class="comments">;keep it</span>
	   pos = pos+1		<span class="comments">;increment number of lines kept</span>
	   if keyword[i] eq 'END' then break  	<span class="comments">;end of header</span>
        endif 
 endfor

 if pos GT 0 then h = h[0:pos-1] else h = 0	      <span class="comments">;truncate</span>

 return
 end
</code>
    </div>
  </body>
</html>