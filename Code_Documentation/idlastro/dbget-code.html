<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:26 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dbget.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dbget.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="dbget:source"></a>function dbget,item,values,listin,SILENT=silent, FULLSTRING = fullstring, $
               Count = count
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       DBGET</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Find entry numbers which contain specified values of a given item.</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       DBGET() is useful as an alternative to DBFIND() when the desired </span>
<span class="comments">;       search values are not easily expressed as a string.  </span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       list = dbget( item, values, [ listin ], /SILENT, /FULLSTRING )</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       item - Item name or number</span>
<span class="comments">;       values -  scalar or vector containing item values to search for.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUTS:</span>
<span class="comments">;       listin - list of entries to be searched.  If not supplied, or</span>
<span class="comments">;               set to -1, then all entries are searched</span>
<span class="comments">;</span>
<span class="comments">; OUTPUT:</span>
<span class="comments">;       list - vector giving the entry number of entries containing desired</span>
<span class="comments">;               item values.  The number of elements in  LIST may be different </span>
<span class="comments">;               from that of VALUE, since a value might be located zero, once, </span>
<span class="comments">;               or many times in the database.  Use the function DBMATCH if a </span>
<span class="comments">;               one to one correspondence is desired between VALUES and LIST. </span>
<span class="comments">; OPTIONAL INPUT KEYWORDS:</span>
<span class="comments">;       /SILENT - If this keyword is set, then DBGET will not display</span>
<span class="comments">;               the number of entries found</span>
<span class="comments">;       /FULLSTRING - By default, one has a match if a search string is </span>
<span class="comments">;               included in any part of a database value (substring match).   </span>
<span class="comments">;               But if /FULLSTRING is set, then all characters in the database</span>
<span class="comments">;               value must match the search string (excluding leading and </span>
<span class="comments">;               trailing blanks).    Both types of string searches are case</span>
<span class="comments">;               insensitive.</span>
<span class="comments">; OPTIONAL OUTPUT KEYWORD:</span>
<span class="comments">;       COUNT - Integer scalar giving the number of valid matches</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       When linked databases are opened together, DBGET can only be used to</span>
<span class="comments">;       search on items in the primary database.</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Get info on selected HD stars in Bright Star catalogue</span>
<span class="comments">;</span>
<span class="comments">;       IDL> dbopen, 'YALE_BS' </span>
<span class="comments">;       IDL> hdno = [1141,2363,3574,4128,6192,6314,6668]    ;Desired HD numbers</span>
<span class="comments">;       IDL> list = dbget( 'HD', hdno )        ;Get corresponding entry numbers</span>
<span class="comments">;</span>
<span class="comments">; SYSTEM VARIABLES:</span>
<span class="comments">;       The obsolete system variable !ERR is set to number of entries found</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;       Written,    W. Landsman      STX     February, 1989</span>
<span class="comments">;       William Thompson, GSFC, 14 March 1995 Added keyword FULLSTRING</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Added COUNT keyword, deprecate !ERR        W. Landsman March 2000</span>
<span class="comments">;       Fix bug introduced March 2000              W. Landsman November 2000</span>
<span class="comments">;       Fix possible bug when sublist supplied    W. Landsman August 2008</span>
<span class="comments">;-</span>
<span class="comments">;</span>
 On_error,2                                   <span class="comments">;Return to caller</span>
 compile_opt idl2

 if N_params() LT 2 then begin
   print,'Syntax --  list = ' + $
          'DBGET( item, values, [listin, /SILENT, /FULLSTRING, Count=]'
   return,-1
 endif
   
 if N_params() LT 3 then listin = lonarr(1)-1

 nvals = N_elements(values)

 if nvals EQ 0 then message,'No search values supplied'

 db_item, item, itnum
 index = db_item_info( 'INDEX', itnum)
 list = listin
 
 if nvals EQ 1 then val = [values,values] $  <span class="comments">;Need at least 2 elements</span>
               else val = values 

 if index[0] GE 2 then begin                              <span class="comments">;Sorted item</span>
    if N_elements(list) EQ 1 then list = lonarr(1) + list
    dbfind_sort, itnum[0], nvals, val, list, $
            FULLSTRING = fullstring, Count =count

 endif else begin                                        <span class="comments">;Non-sorted item</span>
    dbext, list, itnum, itvals
    dbsearch, nvals, val, itvals, good, FULLSTRING = fullstring, Count = count
    if count GT 0 then $     <span class="comments">;Updated Aug 2008</span>
        if list[0] NE -1 then list = list[good] else list = good+1
 endelse

 if count LE 0 then begin
     if not keyword_set(SILENT) then $
         print, 'No entries found by DBGET in ' + db_info( 'NAME',0 )
     list = intarr(1)  

 endif else  if not keyword_set( SILENT ) then $
          print,count,' entries found in '+db_info('name',0)

 return, list[ sort(list) ]

 end
</code>
    </div>
  </body>
</html>