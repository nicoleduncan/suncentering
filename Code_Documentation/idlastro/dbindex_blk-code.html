<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:26 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>dbindex_blk.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="dbindex_blk.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION dbindex_blk, unit, nb, bsz, ofb, dtype
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;       DBINDEX_BLK</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;       Subroutine of DBINDEX to create associated variable of correct datatype</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;       DBINDEX_BLK will offset into the file by a specified amount in </span>
<span class="comments">;       preparation for writing to the file.   V5.2 or later</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;       res = dbindex_blk(unit, nb, bsz, ofb, dtype)</span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       unit   The unit number assigned to the file.</span>
<span class="comments">;       nb     The number of blocks to offset into the file.</span>
<span class="comments">;       bsz    The size of each block, in bytes, to offset into the file.</span>
<span class="comments">;       ofb    The offset into the block, in bytes.</span>
<span class="comments">;       dtype  The IDL datatype as defined in the SIZE function</span>
<span class="comments">;</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       res    The returned variable.  This is an associated variable.</span>
<span class="comments">;</span>
<span class="comments">; RESTRICTIONS:</span>
<span class="comments">;       The file must have been previously opened.</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;       Written by Michael R. Greason, STX, 14 June 1990.</span>
<span class="comments">;       Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;       Use 64 bit integer for very large databases  W. Landsman February 2001</span>
<span class="comments">;       Added new unsigned & 64bit integer datatypes    W. Landsman July 2001</span>
<span class="comments">;-</span>
offset = long64(nb) * long64(bsz) + long64(ofb)
case dtype of
        7: datarec=assoc(unit,bytarr(1),offset)         <span class="comments">; string</span>
        1: datarec=assoc(unit,bytarr(1),offset)         <span class="comments">; byte</span>
        2: datarec=assoc(unit,intarr(1),offset)         <span class="comments">; integer</span>
        4: datarec=assoc(unit,fltarr(1),offset)         <span class="comments">; floating point</span>
        3: datarec=assoc(unit,lonarr(1),offset)         <span class="comments">; longword</span>
        5: datarec=assoc(unit,dblarr(1),offset)         <span class="comments">; double</span>
        6: datarec=assoc(unit,complexarr(1),offset)     <span class="comments">; complex</span>
       12: datarec=assoc(unit,uintarr(1),offset)        <span class="comments">; unsigned integer</span>
       13: datarec=assoc(unit,ulonarr(1),offset)        <span class="comments">; unsigned longword</span>
       14: datarec=assoc(unit,lon64arr(1),offset)       <span class="comments">; 64 bit longword</span>
       15: datarec=assoc(unit,ulon64arr(1),offset)   <span class="comments">; unsigned 64bit longword</span>
endcase
<span class="comments">;</span>
RETURN, datarec
END
</code>
    </div>
  </body>
</html>