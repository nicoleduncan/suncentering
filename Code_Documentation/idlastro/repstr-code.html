<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:00 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>repstr.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="repstr.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="repstr:source"></a>function repstr,obj,in,out
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	REPSTR</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Replace all occurences of one substring by another.</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;	Meant to emulate the string substitution capabilities of text editors</span>
<span class="comments">;</span>
<span class="comments">;       For a more sophisticated routine that allows regular expressions look</span>
<span class="comments">;       at MG_STRREPLACE() </span>
<span class="comments">;       http://docs.idldev.com/idllib/strings/mg_streplace.html</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	result = repstr( obj, in, out )</span>
<span class="comments">;</span>
<span class="comments">; INPUT PARAMETERS:</span>
<span class="comments">;	obj    = object string for editing, scalar or array</span>
<span class="comments">;	in     = substring of 'obj' to be replaced, scalar </span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT PARMETER:</span>
<span class="comments">;	out    = what 'in' is replaced with, scalar.   If not supplied</span>
<span class="comments">;		then out = '', i.e. 'in' is not replaced by anything. </span>
<span class="comments">;</span>
<span class="comments">; OUTPUT PARAMETERS:</span>
<span class="comments">;	Result returned as function value.  Input object string</span>
<span class="comments">;	not changed unless assignment done in calling program.</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE:</span>
<span class="comments">;	Searches for 'in', splits 'obj' into 3 pieces, reassembles</span>
<span class="comments">;	with 'out' in place of 'in'.  Repeats until all cases done.</span>
<span class="comments">;</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;	If a = 'I am what I am' then print,repstr(a,'am','was')</span>
<span class="comments">;	will give 'I was what I was'.</span>
<span class="comments">;</span>
<span class="comments">; MODIFICATION HISTORY:</span>
<span class="comments">;	Written by Robert S. Hill, ST Systems Corp., 12 April 1989.</span>
<span class="comments">;	Accept vector object strings, W. Landsman   HSTX,   April, 1996</span>
<span class="comments">;       Convert loop to LONG, vectorize STRLEN call W. Landsman June 2002</span>
<span class="comments">;       Correct bug in optimization, case where STRLEN(OBJ) EQ</span>
<span class="comments">;         STRLEN(IN), C. Markwardt, Jan 2003</span>
<span class="comments">;       Fixed problem when multiple replacements extend the string length</span>
<span class="comments">;                 D. Finkbeiner, W. Landsman  April 2003</span>
<span class="comments">;       Allow third parameter to be optional again W. Landsman  August 2003</span>
<span class="comments">;       Remove limitation of 9999 characters, C. Markwardt Dec 2003</span>
<span class="comments">;       Test for empty "in" string (causing infinite loop) W. Landsman Jan 2010</span>
<span class="comments">;       Streamline code W Landsman Dec 2011</span>
<span class="comments">;-</span>
 On_error,2
 compile_opt idl2
 
 if N_params() LT 2 then begin
	print,'Syntax - result = REPSTR( obj, in, out )'
	return, obj
 endif

 if N_elements(out) EQ 0 then out = ''
 l1 = strlen(in)
 if l1 EQ 0 then message,'ERROR - empty input string not allowed'
 l2 = strlen(out)
 diflen = l2- l1
 Nstring = N_elements(obj)
 object = obj
 lo = strlen(object) - l1             <span class="comments">;Last character needed to look at </span>
 for i= 0L ,Nstring-1 do begin
 last_pos = 0
 pos = 0
 while ( pos LE lo[i]) do begin
   pos = strpos(object[i],in,last_pos)
   if (pos GE 0) then begin
	      first_part = strmid(object[i],0,pos)
	      last_part  = strmid(object[i],pos+l1)
	      object[i] = first_part + out + last_part
              last_pos = pos + l2
              lo[i] += diflen      <span class="comments">;Length of string may have changed</span>
   endif else break
 endwhile
 endfor

 return,object

 end
</code>
    </div>
  </body>
</html>