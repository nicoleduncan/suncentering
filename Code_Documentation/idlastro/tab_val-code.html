<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:58:06 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>tab_val.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="tab_val.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><a id="tab_val:source"></a>function tab_val, tcb, table, column, rows
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;	TAB_VAL</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;	Routine to read a column from an SDAS table file</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;	values = tab_val( tcb, table, column, [ rows ] )</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;	tcb - table control block returned by tab_val</span>
<span class="comments">;	table - table array returned by tab_val</span>
<span class="comments">;	column - scalar column name or number</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;	rows - scalar giving row number or vector giving rows.</span>
<span class="comments">;		If not supplied all rows are returned.</span>
<span class="comments">; OUTPUT:</span>
<span class="comments">;	the values for the specified column (and rows) is returned</span>
<span class="comments">;	as the function value.  If row is specified as a scalar</span>
<span class="comments">;	(single row) then the result will be a scalar.</span>
<span class="comments">; HISTORY:</span>
<span class="comments">;	version 1  D. Lindler  Jan. 1988</span>
<span class="comments">;       Allow for a null column Landsman/Feggans    April 1992</span>
<span class="comments">;	Converted to IDL V5.0   W. Landsman   September 1997</span>
<span class="comments">;-</span>
<span class="comments">;-------------------------------------------------------------------------</span>
on_error,1         <span class="comments">;Return to caller</span>
<span class="comments">;</span>
<span class="comments">; get column information</span>
<span class="comments">;</span>
tab_col,tcb,column,offset,width,datatype,name,units,format
if !err lt 0 then $
 	message,'Specified column, '+string(column) + ', not found'
<span class="comments">;</span>
nrows=tcb[3,0]
<span class="comments">;</span>
<span class="comments">; determine row range</span>
<span class="comments">;</span>
	if n_elements(rows) eq 0 then begin
		row1 = 0
		row2 = nrows-1
	   end else begin
		s = size(rows)
		if s[0] gt 0 then begin
			row1 = min(rows)
			row2 = max(rows)
		   end else begin
			row1 = rows
			row2 = rows
		end
	end
	nrows = row2-row1+1
<span class="comments">;</span>
<span class="comments">; extract column and covert to correct data type</span>
<span class="comments">;</span>
col=table[offset:offset+width-1,row1:row2]
case datatype of
	6: col=float(col,0,nrows)
	7: col=double(col,0,nrows)
	4: col=long(col,0,nrows)
	1: col=long(col,0,nrows)
	2: begin
		col=string(col)
		if nrows eq 1 then begin
			c = col
                        if strlen(col) gt 0 then $
				col=strarr(strlen(col),1) $
			else col = strarr(1,1) + string(32b)    <span class="comments">;Null field</span>
			col[0]=c
		endif
		for i=0,nrows-1 do col[i]=nulltrim(col[i])
	   end
	else: message,'Unsupported column data type'
endcase
if n_elements(rows) gt 0 then return,col[rows-row1] else return,col
end
</code>
    </div>
  </body>
</html>