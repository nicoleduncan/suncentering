<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:29 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>euler.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="euler.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">PRO EULER,AI,BI,AO,BO,SELECT, FK4 = FK4, SELECT = select1, RADIAN=radian
<span class="comments">;+</span>
<span class="comments">; NAME:</span>
<span class="comments">;     EULER</span>
<span class="comments">; PURPOSE:</span>
<span class="comments">;     Transform between Galactic, celestial, and ecliptic coordinates.</span>
<span class="comments">; EXPLANATION:</span>
<span class="comments">;     Use the procedure ASTRO to use this routine interactively</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE:</span>
<span class="comments">;      EULER, AI, BI, AO, BO, [ SELECT, /FK4, /RADIAN, SELECT = ] </span>
<span class="comments">;</span>
<span class="comments">; INPUTS:</span>
<span class="comments">;       AI - Input Longitude, scalar or vector.  In DEGREES unless /RADIAN</span>
<span class="comments">;            is set.  If only two parameters are supplied, then  AI and BI </span>
<span class="comments">;             will be modified to contain the output longitude and latitude.</span>
<span class="comments">;       BI - Input Latitude in DEGREES</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT:</span>
<span class="comments">;       SELECT - Integer (1-6) specifying type of coordinate transformation.  </span>
<span class="comments">;</span>
<span class="comments">;      SELECT   From          To        |   SELECT      From            To</span>
<span class="comments">;       1     RA-Dec (2000)  Galactic   |     4       Ecliptic      RA-Dec    </span>
<span class="comments">;       2     Galactic       RA-DEC     |     5       Ecliptic      Galactic  </span>
<span class="comments">;       3     RA-Dec         Ecliptic   |     6       Galactic      Ecliptic  </span>
<span class="comments">;</span>
<span class="comments">;      If not supplied as a parameter or keyword, then EULER will prompt for </span>
<span class="comments">;      the value of SELECT</span>
<span class="comments">;      Celestial coordinates (RA, Dec) should be given in equinox J2000 </span>
<span class="comments">;      unless the /FK4 keyword is set.</span>
<span class="comments">; OUTPUTS:</span>
<span class="comments">;       AO - Output Longitude in DEGREES, always double precision</span>
<span class="comments">;       BO - Output Latitude in DEGREES, always double precision</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;       /FK4 - If this keyword is set and non-zero, then input and output </span>
<span class="comments">;             celestial and ecliptic coordinates should be given in equinox </span>
<span class="comments">;             B1950.</span>
<span class="comments">;       /RADIAN - if set, then all input and output angles are in radians rather</span>
<span class="comments">;             than degrees.</span>
<span class="comments">;       SELECT  - The coordinate conversion integer (1-6) may alternatively be </span>
<span class="comments">;              specified as a keyword</span>
<span class="comments">; EXAMPLE:</span>
<span class="comments">;       Find the Galactic coordinates of Cyg X-1 (ra=299.590315, dec=35.201604)</span>
<span class="comments">;       IDL> ra = 299.590315d</span>
<span class="comments">;       IDL> dec = 35.201604d</span>
<span class="comments">;       IDL> euler,ra,dec,glong,glat,1 & print,glong,glat </span>
<span class="comments">;            71.334990, 3.0668335</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;       Written W. Landsman,  February 1987</span>
<span class="comments">;       Adapted from Fortran by Daryl Yentis NRL</span>
<span class="comments">;       Made J2000 the default, added /FK4 keyword  W. Landsman December 1998</span>
<span class="comments">;       Add option to specify SELECT as a keyword W. Landsman March 2003</span>
<span class="comments">;       Use less virtual memory for large input arrays W. Landsman June 2008</span>
<span class="comments">;       Added /RADIAN input keyword  W. Landsman   Sep 2008</span>
<span class="comments">;-</span>
 On_error,2
 compile_opt idl2

 npar = N_params()
 if npar LT 2 then begin
    print,'Syntax - EULER, AI, BI, A0, B0, [ SELECT, /FK4, /RADIAN, SELECT= ]'
    print,'    AI,BI - Input longitude,latitude in degrees'
    print,'    AO,BO - Output longitude, latitude in degrees'
    print,'    SELECT - Scalar (1-6) specifying transformation type'
    return
 endif

  twopi   =   2.0d*!DPI
  fourpi  =   4.0d*!DPI
  rad_to_deg = 180.0d/!DPI

<span class="comments">;   J2000 coordinate conversions are based on the following constants</span>
<span class="comments">;   (see the Hipparcos explanatory supplement).</span>
<span class="comments">;  eps = 23.4392911111d              Obliquity of the ecliptic</span>
<span class="comments">;  alphaG = 192.85948d               Right Ascension of Galactic North Pole</span>
<span class="comments">;  deltaG = 27.12825d                Declination of Galactic North Pole</span>
<span class="comments">;  lomega = 32.93192d                Galactic longitude of celestial equator  </span>
<span class="comments">;  alphaE = 180.02322d              Ecliptic longitude of Galactic North Pole</span>
<span class="comments">;  deltaE = 29.811438523d            Ecliptic latitude of Galactic North Pole</span>
<span class="comments">;  Eomega  = 6.3839743d              Galactic longitude of ecliptic equator              </span>

  if keyword_set(FK4) then begin 

  equinox = '(B1950)' 
  psi   = [ 0.57595865315D, 4.9261918136D,  $
            0.00000000000D, 0.0000000000D,  $  
            0.11129056012D, 4.7005372834D]     
  stheta =[ 0.88781538514D,-0.88781538514D, $
            0.39788119938D,-0.39788119938D, $
            0.86766174755D,-0.86766174755D]    
  ctheta =[ 0.46019978478D, 0.46019978478D, $
            0.91743694670D, 0.91743694670D, $
            0.49715499774D, 0.49715499774D]    
   phi  = [ 4.9261918136D,  0.57595865315D, $
            0.0000000000D, 0.00000000000D, $
	    4.7005372834d, 0.11129056012d]


 endif else begin 

  equinox = '(J2000)'
  psi   = [ 0.57477043300D, 4.9368292465D,  $
            0.00000000000D, 0.0000000000D,  $  
            0.11142137093D, 4.71279419371D]     
  stheta =[ 0.88998808748D,-0.88998808748D, $
            0.39777715593D,-0.39777715593D, $
            0.86766622025D,-0.86766622025D]    
  ctheta =[ 0.45598377618D, 0.45598377618D, $
            0.91748206207D, 0.91748206207D, $
            0.49714719172D, 0.49714719172D]    
   phi  = [ 4.9368292465D,  0.57477043300D, $
            0.0000000000D, 0.00000000000D, $
            4.71279419371d, 0.11142137093d]

 endelse
<span class="comments">;</span>
 if N_elements(select) EQ 0 then $
          if N_elements(select1) EQ 1 then select=select1
 if N_elements(select) EQ 0 then begin
        print,' '
        print,' 1 RA-DEC ' + equinox + ' to Galactic'
        print,' 2 Galactic       to RA-DEC' + equinox
        print,' 3 RA-DEC ' + equinox + ' to Ecliptic'
        print,' 4 Ecliptic       to RA-DEC' + equinox
        print,' 5 Ecliptic       to Galactic'
        print,' 6 Galactic       to Ecliptic'
<span class="comments">;</span>
        select = 0
        read,'Enter selection: ',select
 endif

 I  = select - 1                         <span class="comments">; IDL offset</span>
 if npar EQ 2 then begin

      if keyword_set(radian) then begin 
         ao = temporary(ai) - phi[i]
         bo = temporary(bi)
      endif else begin  
         ao = temporary(ai)/rad_to_deg - phi[i]
         bo = temporary(bi)/rad_to_deg
      endelse 
      
      endif else begin 
      if keyword_set(radian) then begin 
           ao = ai - phi[i]
	   bo = bi
      endif else begin      
          ao  = ai/rad_to_deg - phi[i]
          bo = bi/rad_to_deg
       endelse	  
 endelse
 sb = sin(bo) &	cb = cos(bo)
 cbsa = cb * sin(ao)
 bo  = -stheta[i] * cbsa + ctheta[i] * sb
 bo    = asin(bo&lt<span class="comments">;1.0d)</span>
 if ~keyword_set(radian) then bo = bo*rad_to_deg
<span class="comments">;</span>
 ao =  atan( ctheta[i] * cbsa + stheta[i] * sb, cb * cos(ao) )
 ao = ( (ao+psi[i]+fourpi) mod twopi) 
 if ~keyword_set(radian) then ao = ao*rad_to_deg


 if ( npar EQ 2 ) then begin
	ai = temporary(ao) & bi=temporary(bo)
 endif

 return
 end
</code>
    </div>
  </body>
</html>