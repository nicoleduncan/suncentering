<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Mon Sep 30 16:57:20 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>break_path.pro (Documentation for ./)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="break_path.pro (Documentation for ./)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">        FUNCTION BREAK_PATH, PATHS, NOCURRENT=NOCURRENT
<span class="comments">;+</span>
<span class="comments">; NAME: </span>
<span class="comments">;    BREAK_PATH()</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE: </span>
<span class="comments">;     Breaks up a path string into its component directories.</span>
<span class="comments">;</span>
<span class="comments">; CALLING SEQUENCE: </span>
<span class="comments">;     Result = BREAK_PATH( PATHS [ /NoCurrent])</span>
<span class="comments">;</span>
<span class="comments">; INPUTS: </span>
<span class="comments">;     PATHS   = A string containing one or more directory paths.  The</span>
<span class="comments">;               individual paths are separated by commas, although in UNIX, </span>
<span class="comments">;               colons can also be used.  In other words, PATHS has the same </span>
<span class="comments">;               format as !PATH, except that commas can be used as a separator </span>
<span class="comments">;               regardless of operating system.</span>
<span class="comments">;</span>
<span class="comments">;               A leading $ can be used in any path to signal that what follows </span>
<span class="comments">;               is an environmental variable, but the $ is not necessary.    </span>
<span class="comments">;               Environmental variables can themselves contain multiple paths.</span>
<span class="comments">;</span>
<span class="comments">; OUTPUT: </span>
<span class="comments">;      The result of the function is a string array of directories.</span>
<span class="comments">;      Unless the NOCURRENT keyword is set, the first element of the array is </span>
<span class="comments">;      always the null string, representing the current directory.  All the </span>
<span class="comments">;      other directories will end in the correct separator character for the </span>
<span class="comments">;      current operating system.</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORD:</span>
<span class="comments">;      /NOCURRENT = If set, then the current directory (represented by</span>
<span class="comments">;               the null string) will not automatically be prepended to the</span>
<span class="comments">;               output.</span>
<span class="comments">;</span>
<span class="comments">; PROCEDURE CALLS:</span>
<span class="comments">;      None.</span>
<span class="comments">;</span>
<span class="comments">; REVISION HISTORY:</span>
<span class="comments">;       Version 1, William Thompson, GSFC, 6 May 1993.</span>
<span class="comments">;               Added IDL for Windows compatibility.</span>
<span class="comments">;       Version 2, William Thompson, GSFC, 16 May 1995</span>
<span class="comments">;               Added keyword NOCURRENT</span>
<span class="comments">;       Version 3, William Thompson, GSFC, 29 August 1995</span>
<span class="comments">;               Modified to use OS_FAMILY</span>
<span class="comments">;       Version 4, Zarro, GSFC, 4 August 1997</span>
<span class="comments">;               Added trim to input</span>
<span class="comments">;       Fix directory character on Macintosh system   A. Ferro   February 2000</span>
<span class="comments">;       Use STRSPLIT instead of STR_SEP()   W. Landsman    July 2002</span>
<span class="comments">;       Remove VMS support    W. Landsman   September 2006</span>
<span class="comments">;-</span>
<span class="comments">;</span>
        ON_ERROR, 2
<span class="comments">;</span>
<span class="comments">;  Check the number of parameters:</span>
<span class="comments">;</span>
        IF SIZE(PATHS,/TNAME) NE 'STRING' THEN MESSAGE,       $
                'Syntax:  Result = BREAK_PATH( PATHS )'
<span class="comments">;</span>
<span class="comments">;  Reformat PATHS into an array.  The first element is the null string.  In</span>
<span class="comments">;  Unix, both the comma and colon character can be separators, so two passes</span>
<span class="comments">;  are needed to extract everything.  The same is true for Microsoft Windows</span>
<span class="comments">;  and semi-colons.</span>
<span class="comments">;</span>
        sep = path_sep(/SEARCH_PATH) 
        PATH = ['',STRSPLIT(PATHS,SEP + ',',/EXTRACT)] 
<span class="comments">;</span>
<span class="comments">;  For each path, see if it is really an environment variable.  If so, then</span>
<span class="comments">;  decompose the environmental variable into its constituent paths.</span>
<span class="comments">;</span>
        I = 0
        WHILE I LT N_ELEMENTS(PATH) DO BEGIN
<span class="comments">;</span>
<span class="comments">;  First, try the path by itself.  Remove any trailing "/", "\", or ":"</span>
<span class="comments">;  characters.  </span>
 
                CHAR = STRMID(PATH[I],STRLEN(PATH[I])-1,1)
                IF (CHAR EQ '/') OR (CHAR EQ '\') OR (CHAR EQ ':') THEN $
                        PATH[I] = STRMID(PATH[I],0,STRLEN(PATH[I])-1)
                TEMP = PATH[I]
                TEST = GETENV(TEMP)
<span class="comments">;</span>
<span class="comments">;  If that doesn't yield anything, and the path begins with the $ prompt, then</span>
<span class="comments">;  try what follows after the $.</span>
<span class="comments">;</span>
                IF TEST EQ '' THEN IF STRMID(PATH[I],0,1) EQ '$' THEN BEGIN
                        FOLLOWING = STRMID(TEMP,1,STRLEN(TEMP)-1)
                        TEST = GETENV(FOLLOWING)
		ENDIF	
<span class="comments">;</span>
<span class="comments">;</span>
<span class="comments">;  If something was found, then decompose this into whatever paths it may</span>
<span class="comments">;  contain.</span>
<span class="comments">;</span>
                IF TEST NE '' THEN BEGIN
                        PTH = STRSPLIT(TEST,SEP+',',/EXTRACT) 
<span class="comments">;</span>
<span class="comments">;  Insert this sublist into the main path list.</span>
<span class="comments">;</span>
                        IF N_ELEMENTS(PATH) EQ 1 THEN BEGIN
                                PATH = PTH
                        END ELSE IF I EQ 0 THEN BEGIN
                                PATH = [PTH,PATH[1:*]]
                        END ELSE IF I EQ N_ELEMENTS(PATH)-1 THEN BEGIN
                                PATH = [PATH[0:I-1],PTH]
                        END ELSE BEGIN
                                PATH = [PATH[0:I-1],PTH,PATH[I+1:*]]
                        ENDELSE
<span class="comments">;</span>
<span class="comments">;  Otherwise, check whether or not the path ends in the correct character.  </span>
<span class="comments">;  In Unix, if the path does not end in "/" then append it.  Do the same with</span>
<span class="comments">;  the "\" character in Microsoft Windows.  This step is only taken once the</span>
<span class="comments">;  routine has completely decomposed this part of the path list.</span>
<span class="comments">;</span>
                END ELSE BEGIN
                        IF PATH[I] NE '' THEN BEGIN
                            LAST = STRMID(PATH[I], STRLEN(PATH[I])-1, 1)
                            CASE !VERSION.OS_FAMILY OF
                                'Windows':  IF LAST NE '\' THEN $
                                                PATH[I] = PATH[I] + '\'
                                'MacOS': IF LAST NE ':' THEN $
                                 			PATH[I] = PATH[I] + ':'
                                ELSE:  IF LAST NE '/' THEN      $
                                                PATH[I] = PATH[I] + '/'
                            ENDCASE
                        ENDIF
<span class="comments">;</span>
<span class="comments">;  Advance to the next path, and continue.</span>
<span class="comments">;</span>
                        I = I + 1
                ENDELSE
        ENDWHILE
<span class="comments">;</span>
<span class="comments">;  If the NOCURRENT keyword was set, then remove the first element which</span>
<span class="comments">;  represents the current directory</span>
<span class="comments">;</span>
        IF KEYWORD_SET(NOCURRENT) AND (N_ELEMENTS(PATH) GT 1) THEN      $
                PATH = PATH[1:*]
<span class="comments">;</span>
        RETURN, PATH
        END
</code>
    </div>
  </body>
</html>