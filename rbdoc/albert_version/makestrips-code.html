<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.5.1 on Tue Jun 11 15:09:27 2013 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>makestrips.pro (Documentation for /Users/jerensuzuki/Documents/suncentering/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="makestrips.pro (Documentation for /Users/jerensuzuki/Documents/suncentering/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source">FUNCTION makestrips, inputstruct, inputimage
<span class="comments">;+</span>
<span class="comments">;   :Description:</span>
<span class="comments">;       Makes strips using approx centroiding method to make cropped areas</span>
<span class="comments">;</span>
<span class="comments">;   :Params:</span>
<span class="comments">;       inputstruct: in, required</span>
<span class="comments">;           Structure containing all the solar information</span>
<span class="comments">;</span>
<span class="comments">;       inputimage: in, required</span>
<span class="comments">;           The raw input image</span>
<span class="comments">;</span>
<span class="comments">;-</span>

im=inputimage

for i = 0, N_ELEMENTS(inputstruct)-1 do begin
    s = SIZE(inputimage,/dim)
    <span class="comments">; If center is too close to edge, pad it</span>
    if inputstruct[i].xpos + !param.crop_box gt s[0] or $
        inputstruct[i].ypos + !param.crop_box gt s[1] or $
        inputstruct[i].xpos - !param.crop_box lt 0 or $
        inputstruct[i].ypos - !param.crop_box lt 0  then begin
        
        sidepad = !param.crop_box
        paddedimage = BYTARR(s+sidepad*2) + MODE(inputimage)
        paddedimage[sidepad,sidepad]=inputimage

        crop = paddedimage[inputstruct[i].xpos - !param.crop_box + sidepad : inputstruct[i].xpos+ !param.crop_box + sidepad, inputstruct[i].ypos - !param.crop_box + sidepad : inputstruct[i].ypos + !param.crop_box + sidepad]

        for j = 0, !param.nstrips - 1 do begin
            inputstruct[i].xstrips[j].rowindex = j
            inputstruct[i].xstrips[j].array = REFORM(crop[*,( !param.crop_box)+(j - !param.nstrips/2) * !param.scan_width])
            inputstruct[i].ystrips[j].colindex = j
            inputstruct[i].ystrips[j].array = REFORM(crop[( !param.crop_box)+(j - !param.nstrips/2) * !param.scan_width,*])
        endfor

    endif else begin
        crop = im[inputstruct[i].xpos - !param.crop_box : inputstruct[i].xpos + !param.crop_box,inputstruct[i].ypos - !param.crop_box : inputstruct[i].ypos + !param.crop_box]
        for j = 0, !param.nstrips - 1 do begin
            inputstruct[i].xstrips[j].rowindex = j
            inputstruct[i].xstrips[j].array = REFORM(crop[*,( !param.crop_box)+(j - !param.nstrips/2) * !param.scan_width])
            inputstruct[i].ystrips[j].colindex = j
            inputstruct[i].ystrips[j].array = REFORM(crop[( !param.crop_box)+(j - !param.nstrips/2) * !param.scan_width,*])
        endfor
    endelse
endfor

RETURN,inputstruct
END
</code>
    </div>
  </body>
</html>